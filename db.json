{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/user.gif","path":"images/user.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.gif","path":"images/logo.gif","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/algolia-search.js","path":"js/src/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/busuanzi.js","path":"js/src/busuanzi.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/exturl.js","path":"js/src/exturl.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/js.cookie.js","path":"js/src/js.cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scroll-cookie.js","path":"js/src/scroll-cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","path":"lib/canvas-nest/canvas-nest.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","path":"lib/algolia-instant-search/instantsearch.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","path":"lib/canvas-ribbon/canvas-ribbon.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/README.md","path":"lib/fastclick/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/LICENSE","path":"lib/fastclick/LICENSE","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/bower.json","path":"lib/fastclick/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","path":"lib/jquery_lazyload/CONTRIBUTING.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","path":"lib/jquery_lazyload/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","path":"lib/pace/pace-theme-barber-shop.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","path":"lib/pace/pace-theme-big-counter.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","path":"lib/jquery_lazyload/jquery.scrollstop.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","path":"lib/jquery_lazyload/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","path":"lib/pace/pace-theme-bounce.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","path":"lib/pace/pace-theme-center-circle.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","path":"lib/pace/pace-theme-center-radar.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","path":"lib/jquery_lazyload/jquery.lazyload.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","path":"lib/pace/pace-theme-center-atom.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","path":"lib/pace/pace-theme-flash.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","path":"lib/pace/pace-theme-center-simple.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","path":"lib/pace/pace-theme-corner-indicator.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","path":"lib/pace/pace-theme-fill-left.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","path":"lib/pace/pace-theme-minimal.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","path":"lib/pace/pace-theme-mac-osx.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","path":"lib/pace/pace-theme-loading-bar.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","path":"lib/three/canvas_lines.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","path":"lib/three/canvas_sphere.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace.min.js","path":"lib/pace/pace.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.css","path":"lib/needsharebutton/needsharebutton.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.js","path":"lib/needsharebutton/needsharebutton.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/bower.json","path":"lib/velocity/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/three-waves.min.js","path":"lib/three/three-waves.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/font-embedded.css","path":"lib/needsharebutton/font-embedded.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","path":"lib/velocity/velocity.ui.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery/index.js","path":"lib/jquery/index.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.css","path":"lib/Han/dist/han.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.css","path":"lib/Han/dist/han.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","path":"lib/fancybox/source/fancybox_loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","path":"lib/fancybox/source/blank.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","path":"lib/fancybox/source/fancybox_loading@2x.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","path":"lib/fancybox/source/fancybox_sprite.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","path":"lib/fancybox/source/fancybox_overlay.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","path":"lib/fancybox/source/fancybox_sprite@2x.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","path":"lib/fancybox/source/jquery.fancybox.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","path":"lib/fancybox/source/jquery.fancybox.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.js","path":"lib/Han/dist/han.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","path":"lib/fancybox/source/jquery.fancybox.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","path":"lib/ua-parser-js/dist/ua-parser.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","path":"lib/fastclick/lib/fastclick.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","path":"lib/ua-parser-js/dist/ua-parser.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","path":"lib/fastclick/lib/fastclick.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.js","path":"lib/Han/dist/han.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","path":"lib/Han/dist/font/han.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","path":"lib/Han/dist/font/han-space.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","path":"lib/Han/dist/font/han.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","path":"lib/Han/dist/font/han-space.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","path":"lib/fancybox/source/helpers/fancybox_buttons.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.woff2","path":"lib/Han/dist/font/han.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","path":"lib/font-awesome/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.js","path":"lib/velocity/velocity.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","path":"lib/fancybox/source/helpers/jquery.fancybox-media.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","path":"lib/font-awesome/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","path":"lib/algolia-instant-search/instantsearch.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/three.min.js","path":"lib/three/three.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","path":"lib/font-awesome/fonts/fontawesome-webfont.svg","modified":0,"renderable":1}],"Cache":[{"_id":"themes/next/.bowerrc","hash":"334da94ca6f024d60d012cc26ea655681e724ad8","modified":1545670568056},{"_id":"themes/next/.gitattributes","hash":"8454b9313cb1a97b63fb87e2d29daee497ce6249","modified":1545670568057},{"_id":"themes/next/.gitignore","hash":"ee0b13c268cc8695d3883a5da84930af02d4ed08","modified":1545670568060},{"_id":"themes/next/.editorconfig","hash":"211d2c92bfdddb3e81ea946f4ca7a539f150f4da","modified":1545670568057},{"_id":"themes/next/.hound.yml","hash":"289dcf5bfe92dbd680d54d6e0668f41c9c9c0c78","modified":1545670568061},{"_id":"themes/next/.jshintrc","hash":"b7d23f2ce8d99fa073f22f9960605f318acd7710","modified":1545670568062},{"_id":"themes/next/LICENSE","hash":"ec44503d7e617144909e54533754f0147845f0c5","modified":1545670568063},{"_id":"themes/next/.javascript_ignore","hash":"cd250ad74ca22bd2c054476456a73d9687f05f87","modified":1545670568062},{"_id":"themes/next/.stylintrc","hash":"3b7f9785e9ad0dab764e1c535b40df02f4ff5fd6","modified":1545670568062},{"_id":"themes/next/.travis.yml","hash":"6674fbdfe0d0c03b8a04527ffb8ab66a94253acd","modified":1545670568063},{"_id":"themes/next/_config.yml","hash":"9d9a8b5d4695016dc0d58a4a6db5d02da596f791","modified":1545815567321},{"_id":"themes/next/README.cn.md","hash":"23e92a2599725db2f8dbd524fbef2087c6d11c7b","modified":1545670568064},{"_id":"themes/next/bower.json","hash":"486ebd72068848c97def75f36b71cbec9bb359c5","modified":1545670568067},{"_id":"themes/next/package.json","hash":"3963ad558a24c78a3fd4ef23cf5f73f421854627","modified":1545670568132},{"_id":"themes/next/gulpfile.coffee","hash":"412defab3d93d404b7c26aaa0279e2e586e97454","modified":1545670568067},{"_id":"themes/next/README.md","hash":"50abff86ffe4113051a409c1ed9261195d2aead0","modified":1545670568065},{"_id":"themes/next/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1545670568011},{"_id":"themes/next/.git/config","hash":"8e94cc015a498d35202e9fd57e44b3c51e1e5634","modified":1545670568024},{"_id":"themes/next/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1545670538796},{"_id":"themes/next/.git/FETCH_HEAD","hash":"778b51a21e3c53e17a5b722a6329f3f7c0eb829f","modified":1545832563828},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"5adfad3ef1b870063e621bc0838268eb2c7c697a","modified":1545670568058},{"_id":"themes/next/.git/index","hash":"d91adc5bf66bdd7ed1906bec597b9f4a3c0de9aa","modified":1545670568345},{"_id":"themes/next/.git/packed-refs","hash":"69237944e31c16fe545d1f47b0b1e5b1d99660da","modified":1545670567997},{"_id":"themes/next/.github/browserstack_logo.png","hash":"a6c43887f64a7f48a2814e3714eaa1215e542037","modified":1545670568059},{"_id":"themes/next/.github/ISSUE_TEMPLATE.md","hash":"a0a82dbfabdef9a9d7c17a08ceebfb4052d98d81","modified":1545670568058},{"_id":"themes/next/languages/de.yml","hash":"fd02d9c2035798d5dc7c1a96b4c3e24b05b31a47","modified":1545670568068},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"1228506a940114288d61812bfe60c045a0abeac1","modified":1545670568059},{"_id":"themes/next/languages/default.yml","hash":"b3bcd8934327448a43d9bfada5dd11b1b8c1402e","modified":1545670568068},{"_id":"themes/next/languages/fr-FR.yml","hash":"efeeb55d5c4add54ad59a612fc0630ee1300388c","modified":1545670568070},{"_id":"themes/next/languages/it.yml","hash":"a215d016146b1bd92cef046042081cbe0c7f976f","modified":1545670568070},{"_id":"themes/next/languages/en.yml","hash":"2f4b4776ca1a08cc266a19afb0d1350a3926f42c","modified":1545670568069},{"_id":"themes/next/languages/id.yml","hash":"dccae33e2a5b3c9f11c0e05ec4a7201af1b25745","modified":1545670568070},{"_id":"themes/next/languages/ko.yml","hash":"dc8f3e8c64eb7c4bb2385025b3006b8efec8b31d","modified":1545670568072},{"_id":"themes/next/languages/nl-NL.yml","hash":"213e7a002b82fb265f69dabafbbc382cfd460030","modified":1545670568072},{"_id":"themes/next/languages/pt-BR.yml","hash":"568d494a1f37726a5375b11452a45c71c3e2852d","modified":1545670568073},{"_id":"themes/next/languages/ja.yml","hash":"37f954e47a3bc669620ca559e3edb3b0072a4be5","modified":1545670568071},{"_id":"themes/next/languages/pt.yml","hash":"2efcd240c66ab1a122f061505ca0fb1e8819877b","modified":1545670568073},{"_id":"themes/next/languages/ru.yml","hash":"e33ee44e80f82e329900fc41eb0bb6823397a4d6","modified":1545670568074},{"_id":"themes/next/languages/vi.yml","hash":"a9b89ebd3e5933033d1386c7c56b66c44aca299a","modified":1545670568074},{"_id":"themes/next/languages/zh-Hans.yml","hash":"66b9b42f143c3cb2f782a94abd4c4cbd5fd7f55f","modified":1545670568075},{"_id":"themes/next/languages/zh-hk.yml","hash":"fe0d45807d015082049f05b54714988c244888da","modified":1545670568075},{"_id":"themes/next/layout/_layout.swig","hash":"3df0e83d9167293869bccf6aa88a117838b514b0","modified":1545814772710},{"_id":"themes/next/languages/zh-tw.yml","hash":"432463b481e105073accda16c3e590e54c8e7b74","modified":1545670568076},{"_id":"themes/next/layout/archive.swig","hash":"9a2c14874a75c7085d2bada5e39201d3fc4fd2b4","modified":1545670568127},{"_id":"themes/next/layout/index.swig","hash":"555a357ecf17128db4e29346c92bb6298e66547a","modified":1545670568129},{"_id":"themes/next/layout/category.swig","hash":"3cbb3f72429647411f9e85f2544bdf0e3ad2e6b2","modified":1545670568128},{"_id":"themes/next/layout/page.swig","hash":"e8fcaa641d46930237675d2ad4b56964d9e262e9","modified":1545670568129},{"_id":"themes/next/layout/post.swig","hash":"7a6ce102ca82c3a80f776e555dddae1a9981e1ed","modified":1545670568130},{"_id":"themes/next/scripts/merge-configs.js","hash":"38d86aab4fc12fb741ae52099be475196b9db972","modified":1545670568133},{"_id":"themes/next/scripts/merge.js","hash":"39b84b937b2a9608b94e5872349a47200e1800ff","modified":1545670568134},{"_id":"themes/next/layout/tag.swig","hash":"34e1c016cbdf94a31f9c5d494854ff46b2a182e9","modified":1545670568131},{"_id":"themes/next/layout/schedule.swig","hash":"87ad6055df01fa2e63e51887d34a2d8f0fbd2f5a","modified":1545670568131},{"_id":"source/_posts/javascript精雕细琢（二）：-、-那点事.md","hash":"85f32c76dddcceea22758d93ae31a9e96c8b3a5b","modified":1545999932596},{"_id":"themes/next/test/.jshintrc","hash":"c9fca43ae0d99718e45a6f5ce736a18ba5fc8fb6","modified":1545670568341},{"_id":"themes/next/test/helpers.js","hash":"f25e7f3265eb5a6e1ccbb5e5012fa9bebf134105","modified":1545670568342},{"_id":"themes/next/test/intern.js","hash":"db90b1063356727d72be0d77054fdc32fa882a66","modified":1545670568343},{"_id":"source/_posts/前端案例分享（一）：CSS-JS实现流星雨动画.md","hash":"b95ce4276833864cb4f1c542b9176be288f68bdd","modified":1545752198923},{"_id":"source/_posts/javascript精雕细琢（一）：var-let-const-function声明的区别.md","hash":"4d34da3d86b9fe8729f69b7b512f9935acb7f07b","modified":1545812922524},{"_id":"source/_posts/深入浅出CSS（一）：line-height与vertical-align的性质.md","hash":"c400de2b78ea1281abd450d1d3c76927386d09ea","modified":1545811285713},{"_id":"source/categories/index.md","hash":"6954661854e758cc13182bb8cb4dafd836f10afd","modified":1545672143104},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1545670568218},{"_id":"themes/next/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1545670538797},{"_id":"source/tags/index.md","hash":"c19ee28ec50384fccb73730514affa7c6fd10407","modified":1545672149912},{"_id":"themes/next/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1545670538801},{"_id":"themes/next/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1545670538798},{"_id":"themes/next/.git/hooks/fsmonitor-watchman.sample","hash":"f7c0aa40cb0d620ff0bca3efe3521ec79e5d7156","modified":1545670538799},{"_id":"themes/next/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1545670538806},{"_id":"themes/next/.git/hooks/pre-rebase.sample","hash":"288efdc0027db4cfd8b7c47c4aeddba09b6ded12","modified":1545670538807},{"_id":"themes/next/.git/hooks/pre-commit.sample","hash":"33729ad4ce51acda35094e581e4088f3167a0af8","modified":1545670538805},{"_id":"themes/next/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1545670538803},{"_id":"themes/next/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1545670538808},{"_id":"themes/next/.git/hooks/prepare-commit-msg.sample","hash":"2584806ba147152ae005cb675aa4f01d5d068456","modified":1545670538809},{"_id":"themes/next/layout/_custom/header.swig","hash":"ba8ab5a0280b953aa97435ff8946cbcbb2755a27","modified":1545670568076},{"_id":"themes/next/layout/_custom/sidebar.swig","hash":"ba8ab5a0280b953aa97435ff8946cbcbb2755a27","modified":1545670568077},{"_id":"themes/next/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1545670538811},{"_id":"themes/next/.git/logs/HEAD","hash":"ec57b796a309e42f88a47c44cb4c8896ad1dc75e","modified":1545670568015},{"_id":"themes/next/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1545670538810},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"8c56dd26157cbc580ae41d97ac34b90ab48ced3f","modified":1545670568078},{"_id":"themes/next/layout/_macro/post-copyright.swig","hash":"f83befdc740beb8dc88805efd7fbb0fef9ed19be","modified":1545670568078},{"_id":"themes/next/layout/_macro/reward.swig","hash":"357d86ec9586705bfbb2c40a8c7d247a407db21a","modified":1545670568079},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"9c7343fd470e0943ebd75f227a083a980816290b","modified":1545670568080},{"_id":"themes/next/layout/_partials/footer.swig","hash":"f8ea8ec44359a8f57c0670d676bcc61f1974586b","modified":1545707523297},{"_id":"themes/next/layout/_partials/comments.swig","hash":"bf7e53acb25fd2aee98ee61e218f83da11c95825","modified":1545760964269},{"_id":"themes/next/layout/_macro/post.swig","hash":"21803bbaf92a0ae29eb727b53fb03325480d7dce","modified":1545707390382},{"_id":"themes/next/layout/_macro/wechat-subscriber.swig","hash":"e2e4eae391476da994045ed4c7faf5e05aca2cd7","modified":1545670568081},{"_id":"themes/next/layout/_partials/page-header.swig","hash":"77c61e0baea3544df361b7338c3cd13dc84dde22","modified":1545670568090},{"_id":"themes/next/layout/_partials/header.swig","hash":"c54b32263bc8d75918688fb21f795103b3f57f03","modified":1545670568090},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"1634fb887842698e01ff6e632597fe03c75d2d01","modified":1545670568091},{"_id":"themes/next/layout/_partials/search.swig","hash":"b4ebe4a52a3b51efe549dd1cdee846103664f5eb","modified":1545670568091},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"c0f5a0955f69ca4ed9ee64a2d5f8aa75064935ad","modified":1545670568097},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"931808ad9b8d8390c0dcf9bdeb0954eeb9185d68","modified":1545670568097},{"_id":"themes/next/layout/_partials/head.swig","hash":"f14a39dad1ddd98e6d3ceb25dda092ba80d391b5","modified":1545670568087},{"_id":"themes/next/layout/_third-party/exturl.swig","hash":"8301c9600bb3e47f7fb98b0e0332ef3c51bb1688","modified":1545670568120},{"_id":"themes/next/layout/_third-party/duoshuo-hot-articles.swig","hash":"ba75672183d94f1de7c8bd0eeee497a58c70e889","modified":1545670568119},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"9be624634703be496a5d2535228bc568a8373af9","modified":1545670568101},{"_id":"themes/next/layout/_third-party/needsharebutton.swig","hash":"fa882641da3bd83d9a58a8a97f9d4c62a9ee7b5c","modified":1545670568121},{"_id":"themes/next/layout/_third-party/rating.swig","hash":"554ec568e9d2c71e4a624a8de3cb5929050811d6","modified":1545670568121},{"_id":"themes/next/layout/_third-party/scroll-cookie.swig","hash":"9a188938d46931d5f3882a140aa1c48b3a893f0c","modified":1545670568123},{"_id":"themes/next/layout/_third-party/mathjax.swig","hash":"a0bd3388587fd943baae0d84ca779a707fbcad89","modified":1545670568120},{"_id":"themes/next/layout/_third-party/schedule.swig","hash":"db15d7e1552aa2d2386a6b8a33b3b3a40bf9e43d","modified":1545670568122},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1545670568219},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1545670568221},{"_id":"themes/next/source/css/main.styl","hash":"a91dbb7ef799f0a171b5e726c801139efe545176","modified":1545670568217},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1545670568219},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1545670568222},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1545670568224},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1545670568221},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1545670568226},{"_id":"themes/next/source/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1545670568225},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1545670568224},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1545670568227},{"_id":"themes/next/source/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1545670568226},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1545670568227},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1545670568229},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1545670568230},{"_id":"themes/next/source/images/logo.svg","hash":"169f56fd82941591dad3abd734a50ec7259be950","modified":1545670568228},{"_id":"themes/next/scripts/tags/button.js","hash":"eddbb612c15ac27faf11c59c019ce188f33dec2c","modified":1545670568135},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"99b66949f18398689b904907af23c013be1b978f","modified":1545670568136},{"_id":"themes/next/scripts/tags/full-image.js","hash":"c9f833158c66bd72f627a0559cf96550e867aa72","modified":1545670568137},{"_id":"themes/next/scripts/tags/exturl.js","hash":"5022c0ba9f1d13192677cf1fd66005c57c3d0f53","modified":1545670568136},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"ac681b0d0d8d39ba3817336c0270c6787c2b6b70","modified":1545670568138},{"_id":"themes/next/scripts/tags/label.js","hash":"6f00952d70aadece844ce7fd27adc52816cc7374","modified":1545670568138},{"_id":"themes/next/scripts/tags/lazy-image.js","hash":"bcba2ff25cd7850ce6da322d8bd85a8dd00b5ceb","modified":1545670568139},{"_id":"themes/next/scripts/tags/note.js","hash":"f7eae135f35cdab23728e9d0d88b76e00715faa0","modified":1545670568140},{"_id":"themes/next/scripts/tags/tabs.js","hash":"aa7fc94a5ec27737458d9fe1a75c0db7593352fd","modified":1545670568141},{"_id":"themes/next/source/images/quote-l.svg","hash":"cd108d6f44351cadf8e6742565217f88818a0458","modified":1545670568229},{"_id":"themes/next/source/images/quote-r.svg","hash":"2a2a250b32a87c69dcc1b1976c74b747bedbfb41","modified":1545670568230},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1545670568099},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1545670568099},{"_id":"themes/next/source/images/user.gif","hash":"f3f9add4e5975975ae481e760501bcad2ba58b37","modified":1534402000502},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1545670568194},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1545670568195},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1545670568196},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1545670568215},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1545670568216},{"_id":"themes/next/source/images/logo.gif","hash":"a3f31afcc0aefaa7d36ed7efb7ae9dff27ad9862","modified":1490019766522},{"_id":"themes/next/.git/refs/heads/master","hash":"7999da428ebb87e5a2b27315d8d5123c1ccdfaa5","modified":1545670568014},{"_id":"themes/next/layout/_partials/head/external-fonts.swig","hash":"f5e487b0d213ca0bd94aa30bc23b240d65081627","modified":1545670568089},{"_id":"themes/next/layout/_partials/head/custom-head.swig","hash":"a223919d2e1bf17ca4d6abb2c86f2efca9883dc1","modified":1545670568088},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"b2f0d247b213e4cf8de47af6a304d98070cc7256","modified":1545670568092},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"a8c7f9ca7c605d039a1f3bf4e4d3183700a3dd62","modified":1545670568093},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"b25002a83cbd2ca0c4a5df87ad5bff26477c0457","modified":1545670568093},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"9e3d133ac5bcc6cb51702c83b2611a49811abad1","modified":1545670568094},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"d4fbffd7fa8f2090eb32a871872665d90a885fac","modified":1545670568095},{"_id":"themes/next/layout/_scripts/schemes/gemini.swig","hash":"a9a3995b9615adfb8d6b127c78c6771627bee19a","modified":1545670568099},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"0a9cdd6958395fcdffc80ab60f0c6301b63664a5","modified":1545670568096},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"9b84ab576982b2c3bb0291da49143bc77fba3cc6","modified":1545670568098},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"a9a3995b9615adfb8d6b127c78c6771627bee19a","modified":1545670568100},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"b83a51bbe0f1e2ded9819070840b0ea145f003a6","modified":1545670568114},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"d9e2d9282f9be6e04eae105964abb81e512bffed","modified":1545670568094},{"_id":"themes/next/layout/_third-party/comments/duoshuo.swig","hash":"1600f340e0225361580c44890568dc07dbcf2c89","modified":1545670568114},{"_id":"themes/next/layout/_third-party/comments/gitalk.swig","hash":"f30ef9b18c0c05406a432e3d2453f77ddb142809","modified":1545760452472},{"_id":"themes/next/layout/_third-party/comments/gitment.swig","hash":"4dcc3213c033994d342d02b800b6229295433d30","modified":1545670568115},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"4c501ea0b9c494181eb3c607c5526a5754e7fbd8","modified":1545670568113},{"_id":"themes/next/layout/_third-party/comments/index.swig","hash":"75d973fc442af673a15b253379a1839df29b1a32","modified":1545757029463},{"_id":"themes/next/layout/_third-party/comments/hypercomments.swig","hash":"af7f3e43cbdc4f88c13f101f0f341af96ace3383","modified":1545670568116},{"_id":"themes/next/layout/_third-party/analytics/analytics-with-widget.swig","hash":"ff947f3561b229bc528cb1837d4ca19612219411","modified":1545670568102},{"_id":"themes/next/layout/_third-party/comments/valine.swig","hash":"4050553d44ba1396174161c9a6bb0f89fa779eca","modified":1545670568117},{"_id":"themes/next/layout/_third-party/comments/youyan.swig","hash":"7e65ff8fe586cd655b0e9d1ad2912663ff9bd36c","modified":1545670568118},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"9246162d4bc7e949ce1d12d135cbbaf5dc3024ec","modified":1545670568117},{"_id":"themes/next/layout/_third-party/analytics/busuanzi-counter.swig","hash":"16cb23818909f57dac1a5ada66869971c33d7bd8","modified":1545706476063},{"_id":"themes/next/layout/_third-party/analytics/cnzz-analytics.swig","hash":"a10b7f19d7b5725527514622899df413a34a89db","modified":1545670568105},{"_id":"themes/next/layout/_third-party/analytics/application-insights.swig","hash":"71397a5823e8ec8aad3b68aace13150623b3e19d","modified":1545670568103},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"753d262911c27baf663fcaf199267133528656af","modified":1545670568104},{"_id":"themes/next/layout/_third-party/analytics/facebook-sdk.swig","hash":"7d94845f96197d9d84a405fa5d4ede75fb81b225","modified":1545670568105},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"45f3f629c2aacc381095750e1c8649041a71a84b","modified":1545670568108},{"_id":"themes/next/layout/_third-party/analytics/firestore.swig","hash":"ccc443b22bd4f8c7ac4145664686c756395b90e0","modified":1545670568106},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"b1e13df83fb2b1d5d513b30b7aa6158b0837daab","modified":1545670568107},{"_id":"themes/next/layout/_third-party/analytics/tencent-mta.swig","hash":"5a8027328f060f965b3014060bebec1d7cf149c1","modified":1545670568110},{"_id":"themes/next/layout/_third-party/analytics/vkontakte-api.swig","hash":"f9a1647a8f1866deeb94052d1f87a5df99cb1e70","modified":1545670568111},{"_id":"themes/next/layout/_third-party/search/index.swig","hash":"34599633658f3b0ffb487728b7766e1c7b551f5a","modified":1545670568125},{"_id":"themes/next/layout/_third-party/analytics/tencent-analytics.swig","hash":"8a399df90dadba5ad4e781445b58f4765aeb701e","modified":1545670568110},{"_id":"themes/next/layout/_third-party/analytics/lean-analytics.swig","hash":"e6d10ee4fb70b3ae1cd37e9e36e000306734aa2e","modified":1545670568109},{"_id":"themes/next/layout/_third-party/search/tinysou.swig","hash":"fe95dd3d166634c466e19aa756e65ad6e8254d3e","modified":1545670568126},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"426f68dd9b233add9698fc818c09c6944ec55e05","modified":1545814145334},{"_id":"themes/next/layout/_third-party/seo/baidu-push.swig","hash":"d8c98938719284fa06492c114d99a1904652a555","modified":1545670568126},{"_id":"themes/next/source/css/_mixins/Gemini.styl","hash":"07f7da320689f828f6e36a6123807964a45157a0","modified":1545670568194},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"7896c3ee107e1a8b9108b6019f1c070600a1e8cc","modified":1545670568195},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"0e55cbd93852dc3f8ccb44df74d35d9918f847e0","modified":1545670568196},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"93479642fd076a1257fecc25fcf5d20ccdefe509","modified":1545670568125},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"58e7dd5947817d9fc30770712fc39b2f52230d1e","modified":1545670568214},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"4069f918ccc312da86db6c51205fc6c6eaabb116","modified":1545670568216},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"a25408534f8fe6e321db4bbf9dd03335d648fe17","modified":1545670568215},{"_id":"themes/next/source/js/src/algolia-search.js","hash":"cb431b54ba9c692165a1f5a12e4c564a560f8058","modified":1545670568232},{"_id":"themes/next/source/css/_variables/base.styl","hash":"b1f6ea881a4938a54603d68282b0f8efb4d7915d","modified":1545670568216},{"_id":"themes/next/source/js/src/affix.js","hash":"1b509c3b5b290a6f4607f0f06461a0c33acb69b1","modified":1545670568232},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"0289031200c3d4c2bdd801ee10fff13bb2c353e4","modified":1545670568233},{"_id":"themes/next/source/js/src/busuanzi.js","hash":"7acdf54e60b6e88000de99187f4e65534b7a2490","modified":1545705320857},{"_id":"themes/next/source/js/src/motion.js","hash":"885176ed51d468f662fbf0fc09611f45c7e5a3b1","modified":1545670568236},{"_id":"themes/next/source/js/src/hook-duoshuo.js","hash":"b35a7dc47b634197b93487cea8671a40a9fdffce","modified":1545670568234},{"_id":"themes/next/source/js/src/exturl.js","hash":"a2a0f0de07e46211f74942a468f42ee270aa555c","modified":1545670568233},{"_id":"themes/next/source/js/src/js.cookie.js","hash":"1512c751d219577d338ac0780fb2bbd9075d5298","modified":1545670568235},{"_id":"themes/next/source/js/src/post-details.js","hash":"93a18271b4123dd8f94f09d1439b47c3c19a8712","modified":1545670568236},{"_id":"themes/next/source/js/src/scroll-cookie.js","hash":"02cf91514e41200bc9df5d8bdbeb58575ec06074","modified":1545670568238},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","hash":"aefb13fc275a78df0e539db28191406e9785b792","modified":1545815617754},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"b7657be25fc52ec67c75ab5481bdcb483573338b","modified":1545670568238},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1545670568249},{"_id":"themes/next/source/js/src/utils.js","hash":"b3e9eca64aba59403334f3fa821f100d98d40337","modified":1545670568240},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","hash":"b02737510e9b89aeed6b54f89f602a9c24b06ff2","modified":1545670568257},{"_id":"themes/next/source/lib/fancybox/.bower.json","hash":"9be892a4e14e0da18ff9cb962c9ef71f163b1b22","modified":1545670568258},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"b4aefc910578d76b267e86dfffdd5121c8db9aec","modified":1545670568276},{"_id":"themes/next/source/lib/fancybox/.gitattributes","hash":"672d3b5767e0eacd83bb41b188c913f2cf754793","modified":1545670568259},{"_id":"themes/next/source/lib/font-awesome/.gitignore","hash":"03ddbf76c1dd1afb93eed0b670d2eee747472ef1","modified":1545670568277},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"ee33b2798b1e714b904d663436c6b3521011d1fa","modified":1545670568278},{"_id":"themes/next/source/lib/fastclick/.bower.json","hash":"bf3eef9d647cd7c9b62feda3bc708c6cdd7c0877","modified":1545670568272},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"c31ff06a740955e44edd4403902e653ccabfd4db","modified":1545670568278},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"71e7183634dc1b9449f590f15ebd7201add22ca7","modified":1545670568279},{"_id":"themes/next/source/lib/fastclick/README.md","hash":"68a9b9d53126405b0fa5f3324f1fb96dbcc547aa","modified":1545670568273},{"_id":"themes/next/source/lib/fastclick/LICENSE","hash":"6f474ea75c42442da7bbcf2e9143ce98258efd8d","modified":1545670568272},{"_id":"themes/next/source/lib/fastclick/bower.json","hash":"a9b3ee1e4db71a0e4ea6d5bed292d176dd68b261","modified":1545670568274},{"_id":"themes/next/source/lib/jquery/.bower.json","hash":"865d6c1328ab209a4376b9d2b7a7824369565f28","modified":1545670568302},{"_id":"themes/next/source/lib/jquery_lazyload/.bower.json","hash":"90fa628f156d8045357ff11eaf32e61abacf10e8","modified":1545670568305},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","hash":"4ded6fee668544778e97e38c2b211fc56c848e77","modified":1545670568305},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","hash":"b930297cb98b8e1dbd5abe9bc1ed9d5935d18ce8","modified":1545670568306},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","hash":"ee0d51446cb4ffe1bb96bd7bc8c8e046dddfcf46","modified":1545670568312},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","hash":"5b561dc328af4c4d512e20a76fe964d113a32ba8","modified":1545670568312},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","hash":"bf773ad48a0b9aa77681a89d7569eefc0f7b7b18","modified":1545670568308},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","hash":"e0acf1db27b0cc16128a59c46db1db406b5c4c58","modified":1545670568306},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","hash":"f6bdb9a785b7979dd8ec5c60e278af955ef1e585","modified":1545670568313},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","hash":"a4066769c78affbfbc5e30a600e2c7862cd532e0","modified":1545670568314},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","hash":"ab7cba998bf4c03b13df342bf43647fa4f419783","modified":1545670568315},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","hash":"f4a570908f6c89c6edfb1c74959e733eaadea4f2","modified":1545670568307},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","hash":"dcf79c24fe5350fb73d8038573a104e73639e9d3","modified":1545670568313},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","hash":"13ace22c40312d7bbd8d9c1e50eff897a7a497d8","modified":1545670568319},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","hash":"67f44c947548bd4d77e7590d3f59e236cbf9e98a","modified":1545670568316},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","hash":"b3c64c973f31884e3d8145989476707333406b9a","modified":1545670568316},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","hash":"0bec1e235a4a2cccda3f993b205424e1441a44ae","modified":1545670568318},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","hash":"9cd783cceb8a191f3c8b5d81f7a430ecc3e489d3","modified":1545670568321},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","hash":"9f2e7b51b084da407863826b25265b31150b3821","modified":1545670568321},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","hash":"7ee28875dfc1230d76c537f6605766e8d4011e9f","modified":1545670568320},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","hash":"2d9a9f38c493fdf7c0b833bb9184b6a1645c11b2","modified":1545670568323},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","hash":"46a50b91c98b639c9a2b9265c5a1e66a5c656881","modified":1545670568324},{"_id":"themes/next/source/lib/pace/pace.min.js","hash":"8aaa675f577d5501f5f22d5ccb07c2b76310b690","modified":1545670568322},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.css","hash":"e33aa8fa48b6639d8d8b937d13261597dd473b3a","modified":1545670568310},{"_id":"themes/next/source/lib/velocity/.bower.json","hash":"63da5e80ebb61bb66a2794d5936315ca44231f0c","modified":1545670568334},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.js","hash":"2ce5f3bf15c523b9bfc97720d8884bb22602a454","modified":1545670568311},{"_id":"themes/next/source/lib/velocity/bower.json","hash":"92d92860418c4216aa59eb4cb4a556290a7ad9c3","modified":1545670568334},{"_id":"themes/next/source/lib/three/three-waves.min.js","hash":"8148492dd49aa876d32bb7d5b728d3f5bf6f5074","modified":1545670568324},{"_id":"themes/next/source/lib/needsharebutton/font-embedded.css","hash":"14264a210bf94232d58d7599ea2ba93bfa4fb458","modified":1545670568309},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","hash":"dbbfb50f6502f6b81dcc9fee7b31f1e812da3464","modified":1545670568340},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"dde584994ac13dc601836e86f4cf490e418d9723","modified":1545670568341},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"bf172816a9c57f9040e3d19c24e181a142daf92b","modified":1545670568338},{"_id":"themes/next/source/lib/jquery/index.js","hash":"17a740d68a1c330876c198b6a4d9319f379f3af2","modified":1545670568304},{"_id":"themes/next/.git/logs/refs/heads/master","hash":"ec57b796a309e42f88a47c44cb4c8896ad1dc75e","modified":1545670568016},{"_id":"themes/next/layout/_third-party/search/algolia-search/assets.swig","hash":"218cc936ba3518a3591b2c9eda46bc701edf7710","modified":1545670568124},{"_id":"themes/next/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1545670568010},{"_id":"themes/next/layout/_third-party/search/algolia-search/dom.swig","hash":"2530de0f3125a912756f6c0e9090cd012134a4c5","modified":1545670568124},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"8b32928686c327151e13d3ab100157f9a03cd59f","modified":1545670568143},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"8f86f694c0749a18ab3ad6f6df75466ca137a4bc","modified":1545670568142},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"237d185ac62ec9877e300947fa0109c44fb8db19","modified":1545670568143},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"7ad4081466b397e2a6204141bb7768b7c01bd93c","modified":1545670568145},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"ff4489cd582f518bba6909a301ac1292a38b4e96","modified":1545670568144},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"6eb4bcc3056bd279d000607e8b4dad50d368ca69","modified":1545670568174},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"12662536c7a07fff548abe94171f34b768dd610f","modified":1545670568188},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"4f2801fc4cf3f31bf2069f41db8c6ce0e3da9e39","modified":1545670568156},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"b1025c421406d2c24cc92a02ae28c1915b01e240","modified":1545670568200},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"25d5e45a355ee2093f3b8b8eeac125ebf3905026","modified":1545670568198},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"d0bfd1bef988c76f7d7dd72d88af6f0908a8b0db","modified":1545670568199},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"9c99034f8e00d47e978b3959f51eb4a9ded0fcc8","modified":1545670568201},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1545670568202},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"9b913b73d31d21f057f97115ffab93cfa578b884","modified":1545670568203},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"26666c1f472bf5f3fb9bc62081cca22b4de15ccb","modified":1545670568201},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1545670568207},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"e695e58f714129ca292c2e54cd62c251aca7f7fe","modified":1545670568207},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"31127dcbf4c7b4ada53ffbf1638b5fe325b7cbc0","modified":1545670568206},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"748dbfbf9c08e719ddc775958003c64b00d39dab","modified":1545670568206},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"60fa84aa7731760f05f52dd7d8f79b5f74ac478d","modified":1545670568198},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"5dbc0d0c897e46760e5dbee416530d485c747bba","modified":1545670568208},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"24ee4b356ff55fc6e58f26a929fa07750002cf29","modified":1545670568189},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"1da5c800d025345f212a3bf1be035060f4e5e6ed","modified":1545670568189},{"_id":"themes/next/source/css/_common/scaffolding/mobile.styl","hash":"91ca75492cd51f2553f4d294ed2f48239fcd55eb","modified":1545670568190},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"3f40e8a9fe8e7bd5cfc4cf4cbbbcb9539462e973","modified":1545670568191},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"ea9069645696f86c5df64208490876fe150c8cae","modified":1545670568193},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"a17e2b871a335f290afb392a08f94fd35f59c715","modified":1545670568192},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"4642e30010af8b2b037f5b43146b10a934941958","modified":1545670568211},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"1f6e2ce674735269599acc6d77b3ea18d31967fc","modified":1545670568211},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"bce344d3a665b4c55230d2a91eac2ad16d6f32fd","modified":1545670568210},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"416988dca389e6e2fdfa51fa7f4ee07eb53f82fb","modified":1545670568210},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"86197902dfd3bededba10ba62b8f9f22e0420bde","modified":1545670568213},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"ad2dcedf393ed1f3f5afd2508d24969c916d02fc","modified":1545670568212},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"f1d0b5d7af32c423eaa8bb93ab6a0b45655645dc","modified":1545670568237},{"_id":"themes/next/source/lib/Han/dist/han.min.css","hash":"6d586bfcfb7ae48f1b12f76eec82d3ad31947501","modified":1545670568248},{"_id":"themes/next/source/lib/Han/dist/han.css","hash":"6c26cdb36687d4f0a11dabf5290a909c3506be5c","modified":1545670568245},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1545670568260},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1545670568259},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1545670568261},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1545670568262},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1545670568262},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1545670568263},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","hash":"82f33ad0842aa9c154d029e0dada2497d4eb1d57","modified":1545670568268},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","hash":"d71602cbca33b9ecdb7ab291b7f86a49530f3601","modified":1545670568270},{"_id":"themes/next/source/lib/Han/dist/han.min.js","hash":"16b03db23a52623348f37c04544f2792032c1fb6","modified":1545670568248},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"1573904b82807abbb32c97a3632c6c6808eaac50","modified":1545670568281},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"3655f1fdf1e584c4d8e8d39026093ca306a5a341","modified":1545670568280},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","hash":"ae6318aeb62ad4ce7a7e9a4cdacd93ffb004f0fb","modified":1545670568271},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"88af80502c44cd52ca81ffe7dc7276b7eccb06cf","modified":1545670568282},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"a817b6c158cbc5bab3582713de9fe18a18a80552","modified":1545670568333},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","hash":"1d6aeda0480d0e4cb6198edf7719d601d4ae2ccc","modified":1545670568275},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","hash":"41ea797c68dbcff2f6fb3aba1d1043a22e7cc0f6","modified":1545670568332},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1545670568275},{"_id":"themes/next/source/lib/Han/dist/han.js","hash":"4ac683b2bc8531c84d98f51b86957be0e6f830f3","modified":1545670568247},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1545670568301},{"_id":"themes/next/.git/logs/refs/remotes/origin/HEAD","hash":"ec57b796a309e42f88a47c44cb4c8896ad1dc75e","modified":1545670568010},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d63e0cacc53dd375fcc113465a4328c59ff5f2c1","modified":1545670568147},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"53cde051e0337f4bf42fb8d6d7a79fa3fa6d4ef2","modified":1545670568147},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"1a0d059799a298fe17c49a44298d32cebde93785","modified":1545670568148},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"9f73c4696f0907aa451a855444f88fc0698fa472","modified":1545670568146},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"0656e753f182c9f47fef7304c847b7587a85ef0d","modified":1545670568149},{"_id":"themes/next/source/css/_common/components/highlight/diff.styl","hash":"167986d0f649516671ddf7193eebba7b421cd115","modified":1545670568151},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"7fe4d4d656e86276c17cb4e48a560cb6a4def703","modified":1545670568152},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"50450d9fdc8a2b2be8cfca51e3e1a01ffd636c0b","modified":1545670568151},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"b6f3a06a94a6ee5470c956663164d58eda818a64","modified":1545670568153},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"8cf318644acc8b4978537c263290363e21c7f5af","modified":1545670568155},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"7fb593f90d74a99c21840679933b9ef6fdc16a61","modified":1545670568154},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"1727702eac5d326b5c81a667944a245016668231","modified":1545670568149},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"4e3838d7ac81d9ad133960f0f7ed58a44a015285","modified":1545670568155},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"f9760ecf186954cee3ba4a149be334e9ba296b89","modified":1545670568154},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"875cbe88d5c7f6248990e2beb97c9828920e7e24","modified":1545670568157},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"a200c0a1c5a895ac9dc41e0641a5dfcd766be99b","modified":1545670568158},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"cd9e214e502697f2f2db84eb721bac57a49b0fce","modified":1545670568160},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"a6c6eb8adba0a090ad1f4b9124e866887f20d10d","modified":1545670568159},{"_id":"themes/next/source/css/_common/components/post/post-button.styl","hash":"62fbbd32cf5a99ae550c45c763a2c4813a138d01","modified":1545670568157},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"ca88ea6999a61fb905eb6e72eba5f92d4ee31e6e","modified":1545670568162},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"d0d7a5c90d62b685520d2b47fea8ba6019ff5402","modified":1545670568161},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"27deb3d3a243d30022055dac7dad851024099a8b","modified":1545670568162},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"caf263d1928496688c0e1419801eafd7e6919ce5","modified":1545670568158},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"5a982d8ef3b3623ea5f59e63728990f5623c1b57","modified":1545670568164},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"01567edaea6978628aa5521a122a85434c418bfd","modified":1545670568165},{"_id":"themes/next/source/css/_common/components/post/post-rtl.styl","hash":"b2495ae5e04dcca610aacadc47881d9e716cd440","modified":1545670568163},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"ccb34c52be8adba5996c6b94f9e723bd07d34c16","modified":1545670568164},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"7968343e41f8b94b318c36289dff1196c3eb1791","modified":1545670568165},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"39f04c4c7237a4e10acd3002331992b79945d241","modified":1545670568167},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"761eba9811b050b25d548cc0854de4824b41eb08","modified":1545670568168},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"89d6c3b697efc63de42afd2e89194b1be14152af","modified":1545670568166},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"61f8cea3c01acd600e90e1bc2a07def405503748","modified":1545670568170},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-dimmer.styl","hash":"11c22f0fb3f6beb13e5a425ec064a4ff974c13b7","modified":1545670568169},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"8dd9a1c6f4f6baa00c2cf01837e7617120cf9660","modified":1545670568168},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"1153bb71edf253765145559674390e16dd67c633","modified":1545670568171},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"a1521d48bb06d8d703753f52a198baa197af7da2","modified":1545670568172},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"e71652d3216e289c8548b1ea2357822c1476a425","modified":1545670568173},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"5ef6343835f484a2c0770bd1eb9cc443609e4c39","modified":1545670568172},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"c8fe49a4bc014c24dead05b782a7082411a4abc5","modified":1545670568171},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"2ad1a2a9bbf6742d1b0762c4c623b68113d1e0fe","modified":1545670568177},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"2fe76476432b31993338cb45cdb3b29a518b6379","modified":1545670568175},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"f825da191816eef69ea8efb498a7f756d5ebb498","modified":1545670568176},{"_id":"themes/next/source/css/_common/components/tags/exturl.styl","hash":"a3bdd71237afc112b2aa255f278cab6baeb25351","modified":1545670568176},{"_id":"themes/next/source/css/_common/components/tags/note-modern.styl","hash":"b7076e58d647265ee0ad2b461fe8ce72c9373bc5","modified":1545670568178},{"_id":"themes/next/source/css/_common/components/tags/label.styl","hash":"2ab1322fe52ab5aafd49e68f5bd890e8380ee927","modified":1545670568178},{"_id":"themes/next/source/css/_common/components/tags/note.styl","hash":"9a409b798decdefdaf7a23f0b11004a8c27e82f3","modified":1545670568179},{"_id":"themes/next/source/css/_common/components/tags/tabs.styl","hash":"154a87a32d2fead480d5e909c37f6c476671c5e6","modified":1545670568180},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"b80604868e4f5cf20fccafd7ee415c20c804f700","modified":1545670568181},{"_id":"themes/next/source/css/_common/components/third-party/algolia-search.styl","hash":"bba4f3bdb7517cd85376df3e1209b570c0548c69","modified":1545670568182},{"_id":"themes/next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"a6e7d698702c2e383dde3fde2abde27951679084","modified":1545670568183},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"5dbeed535d63a50265d96b396a5440f9bb31e4ba","modified":1545670568182},{"_id":"themes/next/source/css/_common/components/third-party/gitalk.styl","hash":"a01484e350ad5fc9b1fdfbfafb2ddd9687ad4d20","modified":1545757089839},{"_id":"themes/next/source/css/_common/components/third-party/gitment.styl","hash":"874278147115601d2abf15987f5f7a84ada1ac6b","modified":1545670568184},{"_id":"themes/next/source/css/_common/components/third-party/duoshuo.styl","hash":"717cc7f82be9cc151e23a7678601ff2fd3a7fa1d","modified":1545670568183},{"_id":"themes/next/source/css/_common/components/third-party/han.styl","hash":"10599e16414a8b7a76c4e79e6617b5fe3d4d1adf","modified":1545670568185},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"16087276945fa038f199692e3eabb1c52b8ea633","modified":1545670568186},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"15975ba7456b96916b1dbac448a1a0d2c38b8f3d","modified":1545670568185},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"f6e217260609a0998668c01fd2489929eb3f45c6","modified":1545757120559},{"_id":"themes/next/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"1f09be9bb38411f0629b58c3b23873589a6dbcaa","modified":1545670568205},{"_id":"themes/next/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"1f09be9bb38411f0629b58c3b23873589a6dbcaa","modified":1545670568209},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"a07aa12cc36ac5c819670c2a3c17d07ed7a08986","modified":1545670568204},{"_id":"themes/next/source/css/_common/components/third-party/needsharebutton.styl","hash":"28825ae15fa20ae3942cdaa7bcc1f3523ce59acc","modified":1545670568186},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","hash":"f38ff9b2eecaa17b50b66aa2dae87e9e7436d195","modified":1545670568243},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","hash":"07436f011b44051f61b8329c99de4bec64e86f4b","modified":1545670568241},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","hash":"f1f6bb8f461f5672e000380195d3d2358a28494c","modified":1545670568243},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","hash":"7a635062b10bf5662ae1d218ba0980171005d060","modified":1545670568242},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1545670568264},{"_id":"themes/next/source/lib/Han/dist/font/han.woff2","hash":"623af3ed5423371ac136a4fe0e8cc7bb7396037a","modified":1545670568244},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"b88b589f5f1aa1b3d87cc7eef34c281ff749b1ae","modified":1545670568267},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"6394c48092085788a8c0ef72670b0652006231a1","modified":1545670568265},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1545670568299},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1545670568286},{"_id":"themes/next/source/lib/velocity/velocity.js","hash":"4237c6e9d59da349639de20e559e87c2c0218cfd","modified":1545670568337},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"ee948b4489aedeb548a77c9e45d8c7c5732fd62d","modified":1545670568265},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"d22b1629cb23a6181bebb70d0cf653ffe4b835c8","modified":1545670568268},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"51139a4c79573d372a347ef01a493222a1eaf10a","modified":1545670568266},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1545670568298},{"_id":"themes/next/.git/objects/pack/pack-ce5aaead4992c77ad89f7e79922d1bf5a1722825.idx","hash":"46daad4f50a8d605fab4a73d47b5e337584c74e1","modified":1545670567951},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1545670568289},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","hash":"90a1b22129efc172e2dfcceeeb76bff58bc3192f","modified":1545670568255},{"_id":"themes/next/source/lib/three/three.min.js","hash":"26273b1cb4914850a89529b48091dc584f2c57b8","modified":1545670568330},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"b5483b11f8ba213e733b5b8af9927a04fec996f6","modified":1545670568294},{"_id":"themes/next/.git/objects/pack/pack-ce5aaead4992c77ad89f7e79922d1bf5a1722825.pack","hash":"ed31d195350fff8a6c36475009cdebf86890e420","modified":1545670567952},{"_id":"public/categories/index.html","hash":"0a5b617b8c2a6d374f2a67b65228264299885905","modified":1545999950842},{"_id":"public/tags/index.html","hash":"1a3ba8a5664ff1d778eb190137ebcc2b66293812","modified":1545999950842},{"_id":"public/categories/前端/index.html","hash":"70d24ed30c0e9159c5e3fd22249ac9fd0a7462bd","modified":1545999950843},{"_id":"public/categories/前端/JS/index.html","hash":"8b1ed49dc6f2a6475d6904b402a9b40930d2f656","modified":1545999950843},{"_id":"public/categories/前端/CSS/index.html","hash":"50322a243dcaded832c12781b47ae2aab272fc8a","modified":1545999950843},{"_id":"public/categories/前端/案例分享/index.html","hash":"1493c5d3d3b29db00b974b49ecf0dce45ca045c1","modified":1545999950843},{"_id":"public/tags/JS/index.html","hash":"f0fc1f5ce5a6ebb89897df716e21f6da60f70f95","modified":1545999950843},{"_id":"public/tags/CSS/index.html","hash":"4d17ef0da44c3f628059cae37e5f2bdd19501657","modified":1545999950843},{"_id":"public/tags/HTML/index.html","hash":"80e0aa195db64e8fdbe9fc1a8864408f25172a06","modified":1545999950843},{"_id":"public/javascript精雕细琢（一）：var-let-const-function声明的区别/index.html","hash":"e56285735585e999d4626ece32e6dfc93bee8062","modified":1545999950843},{"_id":"public/深入浅出CSS（一）：line-height与vertical-align的性质/index.html","hash":"b18007c4e208ba08046c3ec347c38d629206f2fd","modified":1545999950843},{"_id":"public/前端案例分享（一）：CSS-JS实现流星雨动画/index.html","hash":"3b3dc094934225f557b810852c21665d5311368b","modified":1545999950843},{"_id":"public/archives/index.html","hash":"112279d9627895859f72aa48e2145b0dabec765d","modified":1545999950843},{"_id":"public/archives/2018/index.html","hash":"69eeacca21c1cfffc3fad00fd542daf4a55485c8","modified":1545999950844},{"_id":"public/index.html","hash":"98d43a95531944158c012166f46f31c1db84249c","modified":1545999950844},{"_id":"public/archives/2018/12/index.html","hash":"e0ecb5644c81e305d67b7834668c2361cd45f608","modified":1545999950844},{"_id":"public/javascript精雕细琢（二）：-、-那点事/index.html","hash":"b915c1262342cc9ca47460e0cc0e6c93fc14e626","modified":1545999950854},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1545999950854},{"_id":"public/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1545999950854},{"_id":"public/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1545999950854},{"_id":"public/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1545999950854},{"_id":"public/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1545999950854},{"_id":"public/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1545999950854},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1545999950854},{"_id":"public/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1545999950854},{"_id":"public/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1545999950854},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1545999950855},{"_id":"public/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1545999950855},{"_id":"public/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1545999950855},{"_id":"public/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1545999950855},{"_id":"public/images/logo.svg","hash":"169f56fd82941591dad3abd734a50ec7259be950","modified":1545999950855},{"_id":"public/images/quote-r.svg","hash":"2a2a250b32a87c69dcc1b1976c74b747bedbfb41","modified":1545999950855},{"_id":"public/images/quote-l.svg","hash":"cd108d6f44351cadf8e6742565217f88818a0458","modified":1545999950855},{"_id":"public/images/user.gif","hash":"f3f9add4e5975975ae481e760501bcad2ba58b37","modified":1545999950855},{"_id":"public/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1545999950855},{"_id":"public/lib/font-awesome/HELP-US-OUT.txt","hash":"ee33b2798b1e714b904d663436c6b3521011d1fa","modified":1545999950855},{"_id":"public/lib/fastclick/LICENSE","hash":"6f474ea75c42442da7bbcf2e9143ce98258efd8d","modified":1545999950855},{"_id":"public/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1545999953573},{"_id":"public/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1545999953576},{"_id":"public/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1545999953577},{"_id":"public/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1545999953577},{"_id":"public/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1545999953578},{"_id":"public/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1545999953578},{"_id":"public/lib/font-awesome/css/font-awesome.css.map","hash":"1573904b82807abbb32c97a3632c6c6808eaac50","modified":1545999953578},{"_id":"public/lib/Han/dist/font/han.woff","hash":"f38ff9b2eecaa17b50b66aa2dae87e9e7436d195","modified":1545999953578},{"_id":"public/lib/Han/dist/font/han.otf","hash":"f1f6bb8f461f5672e000380195d3d2358a28494c","modified":1545999953578},{"_id":"public/lib/Han/dist/font/han-space.woff","hash":"7a635062b10bf5662ae1d218ba0980171005d060","modified":1545999953578},{"_id":"public/lib/Han/dist/font/han-space.otf","hash":"07436f011b44051f61b8329c99de4bec64e86f4b","modified":1545999953578},{"_id":"public/lib/Han/dist/font/han.woff2","hash":"623af3ed5423371ac136a4fe0e8cc7bb7396037a","modified":1545999953578},{"_id":"public/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1545999953578},{"_id":"public/images/logo.gif","hash":"a3f31afcc0aefaa7d36ed7efb7ae9dff27ad9862","modified":1545999953578},{"_id":"public/js/src/bootstrap.js","hash":"034bc8113e0966fe2096ba5b56061bbf10ef0512","modified":1545999953586},{"_id":"public/js/src/algolia-search.js","hash":"b172f697ed339a24b1e80261075232978d164c35","modified":1545999953586},{"_id":"public/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1545999953587},{"_id":"public/js/src/busuanzi.js","hash":"054eedd03f7493ee3587af0e6c0174dd515fa720","modified":1545999953587},{"_id":"public/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1545999953588},{"_id":"public/js/src/exturl.js","hash":"e42e2aaab7bf4c19a0c8e779140e079c6aa5c0b1","modified":1545999953588},{"_id":"public/js/src/post-details.js","hash":"a13f45f7aa8291cf7244ec5ba93907d119c5dbdd","modified":1545999953588},{"_id":"public/js/src/scroll-cookie.js","hash":"09dc828cbf5f31158ff6250d2bf7c3cde6365c67","modified":1545999953588},{"_id":"public/js/src/js.cookie.js","hash":"9b37973a90fd50e71ea91682265715e45ae82c75","modified":1545999953588},{"_id":"public/lib/canvas-nest/canvas-nest.min.js","hash":"76c076adb4d92ef8bd377fef983a73c62389fcdf","modified":1545999953588},{"_id":"public/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1545999953588},{"_id":"public/lib/canvas-ribbon/canvas-ribbon.js","hash":"ff5915eb2596e890a2fc6697c864f861a1995ec0","modified":1545999953588},{"_id":"public/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1545999953588},{"_id":"public/lib/font-awesome/bower.json","hash":"64394a2a9aa00f8e321d8daa5e51a420f0e96dad","modified":1545999953588},{"_id":"public/lib/fastclick/bower.json","hash":"4dcecf83afddba148464d5339c93f6d0aa9f42e9","modified":1545999953589},{"_id":"public/lib/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1545999953589},{"_id":"public/lib/jquery_lazyload/bower.json","hash":"ae3c3b61e6e7f9e1d7e3585ad854380ecc04cf53","modified":1545999953589},{"_id":"public/lib/pace/pace-theme-big-counter.min.css","hash":"5b561dc328af4c4d512e20a76fe964d113a32ba8","modified":1545999953589},{"_id":"public/lib/pace/pace-theme-barber-shop.min.css","hash":"ee0d51446cb4ffe1bb96bd7bc8c8e046dddfcf46","modified":1545999953589},{"_id":"public/lib/pace/pace-theme-bounce.min.css","hash":"f6bdb9a785b7979dd8ec5c60e278af955ef1e585","modified":1545999953589},{"_id":"public/lib/pace/pace-theme-center-circle.min.css","hash":"a4066769c78affbfbc5e30a600e2c7862cd532e0","modified":1545999953589},{"_id":"public/lib/pace/pace-theme-center-simple.min.css","hash":"67f44c947548bd4d77e7590d3f59e236cbf9e98a","modified":1545999953589},{"_id":"public/lib/pace/pace-theme-center-radar.min.css","hash":"ab7cba998bf4c03b13df342bf43647fa4f419783","modified":1545999953589},{"_id":"public/lib/fastclick/README.html","hash":"da3c74d484c73cc7df565e8abbfa4d6a5a18d4da","modified":1545999953589},{"_id":"public/lib/jquery_lazyload/README.html","hash":"bde24335f6bc09d8801c0dcd7274f71b466552bd","modified":1545999953590},{"_id":"public/lib/jquery_lazyload/CONTRIBUTING.html","hash":"a6358170d346af13b1452ac157b60505bec7015c","modified":1545999953590},{"_id":"public/css/main.css","hash":"41ba9dade474ae6396131f7e8cdc7e203ec07eb6","modified":1545999953590},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1545999953590},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1545999953590},{"_id":"public/lib/pace/pace-theme-corner-indicator.min.css","hash":"b3c64c973f31884e3d8145989476707333406b9a","modified":1545999953595},{"_id":"public/lib/pace/pace-theme-center-atom.min.css","hash":"dcf79c24fe5350fb73d8038573a104e73639e9d3","modified":1545999953595},{"_id":"public/lib/pace/pace-theme-flash.min.css","hash":"13ace22c40312d7bbd8d9c1e50eff897a7a497d8","modified":1545999953596},{"_id":"public/lib/pace/pace-theme-fill-left.min.css","hash":"0bec1e235a4a2cccda3f993b205424e1441a44ae","modified":1545999953596},{"_id":"public/lib/pace/pace-theme-minimal.min.css","hash":"9cd783cceb8a191f3c8b5d81f7a430ecc3e489d3","modified":1545999953597},{"_id":"public/lib/pace/pace-theme-mac-osx.min.css","hash":"9f2e7b51b084da407863826b25265b31150b3821","modified":1545999953597},{"_id":"public/lib/needsharebutton/needsharebutton.css","hash":"3ef0020a1815ca6151ea4886cd0d37421ae3695c","modified":1545999953597},{"_id":"public/lib/velocity/bower.json","hash":"0ef14e7ccdfba5db6eb3f8fc6aa3b47282c36409","modified":1545999953597},{"_id":"public/js/src/schemes/pisces.js","hash":"8050a5b2683d1d77238c5762b6bd89c543daed6e","modified":1545999953597},{"_id":"public/lib/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1545999953597},{"_id":"public/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1545999953597},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1545999953597},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1545999953597},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1545999953597},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1545999953597},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1545999953597},{"_id":"public/js/src/motion.js","hash":"754b294394f102c8fd9423a1789ddb1201677898","modified":1545999953597},{"_id":"public/js/src/utils.js","hash":"9b1325801d27213083d1487a12b1a62b539ab6f8","modified":1545999953598},{"_id":"public/lib/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1545999953598},{"_id":"public/lib/font-awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1545999953598},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1545999953598},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1545999953598},{"_id":"public/lib/pace/pace-theme-loading-bar.min.css","hash":"7ee28875dfc1230d76c537f6605766e8d4011e9f","modified":1545999953599},{"_id":"public/lib/pace/pace.min.js","hash":"9944dfb7814b911090e96446cea4d36e2b487234","modified":1545999953599},{"_id":"public/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1545999953599},{"_id":"public/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1545999953599},{"_id":"public/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1545999953599},{"_id":"public/lib/needsharebutton/needsharebutton.js","hash":"9885fd9bea5e7ebafc5b1de9d17be5e106248d96","modified":1545999953836},{"_id":"public/lib/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1545999953836},{"_id":"public/lib/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1545999953962},{"_id":"public/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1545999953962},{"_id":"public/lib/three/canvas_lines.min.js","hash":"dce4a3b65f8bf958f973690caa7ec4952f353b0c","modified":1545999954013},{"_id":"public/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1545999954014},{"_id":"public/lib/three/canvas_sphere.min.js","hash":"d8ea241a53c135a650f7335d2b6982b899fd58a9","modified":1545999954014},{"_id":"public/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1545999954014},{"_id":"public/lib/three/three-waves.min.js","hash":"d968cba6b3a50b3626a02d67b544f349d83b147c","modified":1545999954014},{"_id":"public/lib/Han/dist/han.min.js","hash":"f559c68a25065a14f47da954a7617d87263e409d","modified":1545999954014},{"_id":"public/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1545999954015},{"_id":"public/lib/needsharebutton/font-embedded.css","hash":"c39d37278c1e178838732af21bd26cd0baeddfe0","modified":1545999954321},{"_id":"public/lib/Han/dist/han.min.css","hash":"a0c9e32549a8b8cf327ab9227b037f323cdb60ee","modified":1545999954321},{"_id":"public/lib/Han/dist/han.css","hash":"bd40da3fba8735df5850956814e312bd7b3193d7","modified":1545999954449},{"_id":"public/lib/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1545999954449},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"b5483b11f8ba213e733b5b8af9927a04fec996f6","modified":1545999954461},{"_id":"public/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1545999954585},{"_id":"public/lib/Han/dist/han.js","hash":"e345397e0585c9fed1449e614ec13e0224acf2ab","modified":1545999954585},{"_id":"public/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1545999954637},{"_id":"public/lib/algolia-instant-search/instantsearch.min.js","hash":"9ccc6f8144f54e86df9a3fd33a18368d81cf3a4f","modified":1545999954700},{"_id":"public/lib/three/three.min.js","hash":"73f4cdc17e51a72b9bf5b9291f65386d615c483b","modified":1545999954709}],"Category":[{"name":"前端","_id":"cjq80g9r30006w4vuqblsvd7x"},{"name":"JS","parent":"cjq80g9r30006w4vuqblsvd7x","_id":"cjq80g9r60008w4vu03cg8khb"},{"name":"CSS","parent":"cjq80g9r30006w4vuqblsvd7x","_id":"cjq80g9rz000dw4vufjarxjxs"},{"name":"案例分享","parent":"cjq80g9r30006w4vuqblsvd7x","_id":"cjq80g9vj000jw4vub8gp335t"}],"Data":[],"Page":[{"title":"categories","date":"2018-12-24T17:20:38.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2018-12-25 01:20:38\ntype: categories\n---\n","updated":"2018-12-24T17:22:23.104Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cjq80g9qz0004w4vufsb0xk6c","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"tags","date":"2018-12-24T17:20:01.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2018-12-25 01:20:01\ntype: tags\n---\n","updated":"2018-12-24T17:22:29.912Z","path":"tags/index.html","comments":1,"layout":"page","_id":"cjq80g9r10005w4vuyfjoe3m9","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"javascript精雕细琢（二）：++、--那点事","date":"2018-12-28T12:23:52.000Z","cateories":["前端","JS"],"_content":"\n### 引言\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;对于接触 JS 时间不长的前端来说，刚开始要实现诸如轮播图，选项卡等小模块时，肯定会用到 index 索引来实现。而这其中很大一部分又会使用++（自加）、--（自减），所以清楚的知道++（自加）、--（自减）的计算模式，可以在运用时减少错误。本文将从数学运算、变量引用、数据转换 3 个方面，对++（自加）、--（自减）进行一个详细的说明，力求达到一个在通读全文后，明确++（自加）、--（自减）应用方式的效果。\n<!--more-->\n### ++和--在数学运算中的计算规则\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;老规矩，先上代码：\n\n```\n        let a = 1,\n            b = 1;\n        let num1 = a++ + b++, //num1执行前a=1,b=1，num1执行后a=2,b=2\n            num2 = a++ + ++b, //num2执行前a=2,b=2，num2执行完后a=3,b=3\n            num3 = ++a + b++, //num3执行前a=3,b=3，num3执行完后a=4,b=4\n            num4 = ++a + ++b; //num4执行前a=4,b=4，num4执行完后a=5,b=5\n        console.log(num1);    //结果为2，步骤分解: a + b（1 + 1）=> a++(2) => b++(2) => a=2,b=2;\n        console.log(num2);　　//结果为5，步骤分解: a + (++b)（2 + 3） => a++(3) => a=3,b=3;\n        console.log(num3);　　//结果为7，步骤分解: (++a) + b（4 + 3） => b++(4) => a=4,b=4;\n        console.log(num4);　　//结果为10，步骤分解: (++a) + (++b)（5 + 5） => a=5,b=5;\n```\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过以上代码，可以总结出++和--在数学运算出的计算规则如下（加减乘除没区别）：\n\n1. 当**++、--写在变量前**时，数学计算时，引用的是**++、--未执行**的变量值；\n2. 当**++、--写在变量后**时，数学计算时，引用的是**++、--执行后**的变量值；\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过以上的理解，就不难看出，**num1**得到的求和结果实际上就是 a + b，而**num2**实际上是 a + (++b)，**num3**是(++a) + b，**num4**是(++a) + (++b)，但是求和归求和，++、--只是没在求和结果中执行，实际上变量的++、--都是执行了的，这一点要明确。\n\n### ++和--在变量引用时的计算规则\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上代码：\n\n```\n        let num1 = 0,\n            num2 = 0;\n        let arr = [0, 1, 2, 3, 4, 5, 6];\n        console.log(arr[num1++]); // 0  num1=1\n        console.log(arr[++num2])  // 1  num2=1\n```\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过以上代码，不难看出，当在变量引用时执行++、--，与数学运算有相似的规律。总结起来就是一句话——**++、--在变量前，引用++、--执行后的变量值；++、--在变量后，引用当前变量值（即执行++、--前的值）**。\n\n### ++和--的数据转换应用\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上代码：\n\n```\n        let a = true;\n        let b = false;\n        let c = \"a\";\n        console.log(++a); //2\n        console.log(b++); //0\n        console.log(c++); //NaN\n```\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;总结——对非 Number 类型的数据，应用++、--，相当于执行了 Number()方法。如果转换后是 number 类型，则按上边的规则执行++和--，如果转换后不是 number 类型，则不执行++和--。输出 NaN。不能直接进行类似++true 的操作，必须通过声明变量值为 true 或 false，然后再++、--。\n\n### 结语\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;越是简单常用的技巧，可能越容易被人忘记它的其他方面。保持一颗蓝翔毕业的心，挖掘所有东西~\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文同时发布于我的博客园https://www.cnblogs.com/keepStudying/p/9743457.html\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;转载请注明出处\n","source":"_posts/javascript精雕细琢（二）：-、-那点事.md","raw":"---\ntitle: javascript精雕细琢（二）：++、--那点事\ndate: 2018-12-28 20:23:52\ncateories:\n  - 前端\n  - JS\ntags:\n  - JS\n---\n\n### 引言\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;对于接触 JS 时间不长的前端来说，刚开始要实现诸如轮播图，选项卡等小模块时，肯定会用到 index 索引来实现。而这其中很大一部分又会使用++（自加）、--（自减），所以清楚的知道++（自加）、--（自减）的计算模式，可以在运用时减少错误。本文将从数学运算、变量引用、数据转换 3 个方面，对++（自加）、--（自减）进行一个详细的说明，力求达到一个在通读全文后，明确++（自加）、--（自减）应用方式的效果。\n<!--more-->\n### ++和--在数学运算中的计算规则\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;老规矩，先上代码：\n\n```\n        let a = 1,\n            b = 1;\n        let num1 = a++ + b++, //num1执行前a=1,b=1，num1执行后a=2,b=2\n            num2 = a++ + ++b, //num2执行前a=2,b=2，num2执行完后a=3,b=3\n            num3 = ++a + b++, //num3执行前a=3,b=3，num3执行完后a=4,b=4\n            num4 = ++a + ++b; //num4执行前a=4,b=4，num4执行完后a=5,b=5\n        console.log(num1);    //结果为2，步骤分解: a + b（1 + 1）=> a++(2) => b++(2) => a=2,b=2;\n        console.log(num2);　　//结果为5，步骤分解: a + (++b)（2 + 3） => a++(3) => a=3,b=3;\n        console.log(num3);　　//结果为7，步骤分解: (++a) + b（4 + 3） => b++(4) => a=4,b=4;\n        console.log(num4);　　//结果为10，步骤分解: (++a) + (++b)（5 + 5） => a=5,b=5;\n```\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过以上代码，可以总结出++和--在数学运算出的计算规则如下（加减乘除没区别）：\n\n1. 当**++、--写在变量前**时，数学计算时，引用的是**++、--未执行**的变量值；\n2. 当**++、--写在变量后**时，数学计算时，引用的是**++、--执行后**的变量值；\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过以上的理解，就不难看出，**num1**得到的求和结果实际上就是 a + b，而**num2**实际上是 a + (++b)，**num3**是(++a) + b，**num4**是(++a) + (++b)，但是求和归求和，++、--只是没在求和结果中执行，实际上变量的++、--都是执行了的，这一点要明确。\n\n### ++和--在变量引用时的计算规则\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上代码：\n\n```\n        let num1 = 0,\n            num2 = 0;\n        let arr = [0, 1, 2, 3, 4, 5, 6];\n        console.log(arr[num1++]); // 0  num1=1\n        console.log(arr[++num2])  // 1  num2=1\n```\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过以上代码，不难看出，当在变量引用时执行++、--，与数学运算有相似的规律。总结起来就是一句话——**++、--在变量前，引用++、--执行后的变量值；++、--在变量后，引用当前变量值（即执行++、--前的值）**。\n\n### ++和--的数据转换应用\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上代码：\n\n```\n        let a = true;\n        let b = false;\n        let c = \"a\";\n        console.log(++a); //2\n        console.log(b++); //0\n        console.log(c++); //NaN\n```\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;总结——对非 Number 类型的数据，应用++、--，相当于执行了 Number()方法。如果转换后是 number 类型，则按上边的规则执行++和--，如果转换后不是 number 类型，则不执行++和--。输出 NaN。不能直接进行类似++true 的操作，必须通过声明变量值为 true 或 false，然后再++、--。\n\n### 结语\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;越是简单常用的技巧，可能越容易被人忘记它的其他方面。保持一颗蓝翔毕业的心，挖掘所有东西~\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文同时发布于我的博客园https://www.cnblogs.com/keepStudying/p/9743457.html\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;转载请注明出处\n","slug":"javascript精雕细琢（二）：-、-那点事","published":1,"updated":"2018-12-28T12:25:32.596Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjq80g9lx0000w4vust4v8cqg","content":"<h3 id=\"引言\"><a href=\"#引言\" class=\"headerlink\" title=\"引言\"></a>引言</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;对于接触 JS 时间不长的前端来说，刚开始要实现诸如轮播图，选项卡等小模块时，肯定会用到 index 索引来实现。而这其中很大一部分又会使用++（自加）、–（自减），所以清楚的知道++（自加）、–（自减）的计算模式，可以在运用时减少错误。本文将从数学运算、变量引用、数据转换 3 个方面，对++（自加）、–（自减）进行一个详细的说明，力求达到一个在通读全文后，明确++（自加）、–（自减）应用方式的效果。<br><a id=\"more\"></a></p>\n<h3 id=\"和–在数学运算中的计算规则\"><a href=\"#和–在数学运算中的计算规则\" class=\"headerlink\" title=\"++和–在数学运算中的计算规则\"></a>++和–在数学运算中的计算规则</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;老规矩，先上代码：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let a = 1,</span><br><span class=\"line\">    b = 1;</span><br><span class=\"line\">let num1 = a++ + b++, //num1执行前a=1,b=1，num1执行后a=2,b=2</span><br><span class=\"line\">    num2 = a++ + ++b, //num2执行前a=2,b=2，num2执行完后a=3,b=3</span><br><span class=\"line\">    num3 = ++a + b++, //num3执行前a=3,b=3，num3执行完后a=4,b=4</span><br><span class=\"line\">    num4 = ++a + ++b; //num4执行前a=4,b=4，num4执行完后a=5,b=5</span><br><span class=\"line\">console.log(num1);    //结果为2，步骤分解: a + b（1 + 1）=&gt; a++(2) =&gt; b++(2) =&gt; a=2,b=2;</span><br><span class=\"line\">console.log(num2);　　//结果为5，步骤分解: a + (++b)（2 + 3） =&gt; a++(3) =&gt; a=3,b=3;</span><br><span class=\"line\">console.log(num3);　　//结果为7，步骤分解: (++a) + b（4 + 3） =&gt; b++(4) =&gt; a=4,b=4;</span><br><span class=\"line\">console.log(num4);　　//结果为10，步骤分解: (++a) + (++b)（5 + 5） =&gt; a=5,b=5;</span><br></pre></td></tr></table></figure>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过以上代码，可以总结出++和–在数学运算出的计算规则如下（加减乘除没区别）：</p>\n<ol>\n<li>当<strong>++、–写在变量前</strong>时，数学计算时，引用的是<strong>++、–未执行</strong>的变量值；</li>\n<li>当<strong>++、–写在变量后</strong>时，数学计算时，引用的是<strong>++、–执行后</strong>的变量值；</li>\n</ol>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过以上的理解，就不难看出，<strong>num1</strong>得到的求和结果实际上就是 a + b，而<strong>num2</strong>实际上是 a + (++b)，<strong>num3</strong>是(++a) + b，<strong>num4</strong>是(++a) + (++b)，但是求和归求和，++、–只是没在求和结果中执行，实际上变量的++、–都是执行了的，这一点要明确。</p>\n<h3 id=\"和–在变量引用时的计算规则\"><a href=\"#和–在变量引用时的计算规则\" class=\"headerlink\" title=\"++和–在变量引用时的计算规则\"></a>++和–在变量引用时的计算规则</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上代码：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let num1 = 0,</span><br><span class=\"line\">    num2 = 0;</span><br><span class=\"line\">let arr = [0, 1, 2, 3, 4, 5, 6];</span><br><span class=\"line\">console.log(arr[num1++]); // 0  num1=1</span><br><span class=\"line\">console.log(arr[++num2])  // 1  num2=1</span><br></pre></td></tr></table></figure>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过以上代码，不难看出，当在变量引用时执行++、–，与数学运算有相似的规律。总结起来就是一句话——<strong>++、–在变量前，引用++、–执行后的变量值；++、–在变量后，引用当前变量值（即执行++、–前的值）</strong>。</p>\n<h3 id=\"和–的数据转换应用\"><a href=\"#和–的数据转换应用\" class=\"headerlink\" title=\"++和–的数据转换应用\"></a>++和–的数据转换应用</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上代码：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let a = true;</span><br><span class=\"line\">let b = false;</span><br><span class=\"line\">let c = &quot;a&quot;;</span><br><span class=\"line\">console.log(++a); //2</span><br><span class=\"line\">console.log(b++); //0</span><br><span class=\"line\">console.log(c++); //NaN</span><br></pre></td></tr></table></figure>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;总结——对非 Number 类型的数据，应用++、–，相当于执行了 Number()方法。如果转换后是 number 类型，则按上边的规则执行++和–，如果转换后不是 number 类型，则不执行++和–。输出 NaN。不能直接进行类似++true 的操作，必须通过声明变量值为 true 或 false，然后再++、–。</p>\n<h3 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;越是简单常用的技巧，可能越容易被人忘记它的其他方面。保持一颗蓝翔毕业的心，挖掘所有东西~<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文同时发布于我的博客园<a href=\"https://www.cnblogs.com/keepStudying/p/9743457.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/keepStudying/p/9743457.html</a><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;转载请注明出处</p>\n","site":{"data":{}},"excerpt":"<h3 id=\"引言\"><a href=\"#引言\" class=\"headerlink\" title=\"引言\"></a>引言</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;对于接触 JS 时间不长的前端来说，刚开始要实现诸如轮播图，选项卡等小模块时，肯定会用到 index 索引来实现。而这其中很大一部分又会使用++（自加）、–（自减），所以清楚的知道++（自加）、–（自减）的计算模式，可以在运用时减少错误。本文将从数学运算、变量引用、数据转换 3 个方面，对++（自加）、–（自减）进行一个详细的说明，力求达到一个在通读全文后，明确++（自加）、–（自减）应用方式的效果。<br>","more":"</p>\n<h3 id=\"和–在数学运算中的计算规则\"><a href=\"#和–在数学运算中的计算规则\" class=\"headerlink\" title=\"++和–在数学运算中的计算规则\"></a>++和–在数学运算中的计算规则</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;老规矩，先上代码：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let a = 1,</span><br><span class=\"line\">    b = 1;</span><br><span class=\"line\">let num1 = a++ + b++, //num1执行前a=1,b=1，num1执行后a=2,b=2</span><br><span class=\"line\">    num2 = a++ + ++b, //num2执行前a=2,b=2，num2执行完后a=3,b=3</span><br><span class=\"line\">    num3 = ++a + b++, //num3执行前a=3,b=3，num3执行完后a=4,b=4</span><br><span class=\"line\">    num4 = ++a + ++b; //num4执行前a=4,b=4，num4执行完后a=5,b=5</span><br><span class=\"line\">console.log(num1);    //结果为2，步骤分解: a + b（1 + 1）=&gt; a++(2) =&gt; b++(2) =&gt; a=2,b=2;</span><br><span class=\"line\">console.log(num2);　　//结果为5，步骤分解: a + (++b)（2 + 3） =&gt; a++(3) =&gt; a=3,b=3;</span><br><span class=\"line\">console.log(num3);　　//结果为7，步骤分解: (++a) + b（4 + 3） =&gt; b++(4) =&gt; a=4,b=4;</span><br><span class=\"line\">console.log(num4);　　//结果为10，步骤分解: (++a) + (++b)（5 + 5） =&gt; a=5,b=5;</span><br></pre></td></tr></table></figure>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过以上代码，可以总结出++和–在数学运算出的计算规则如下（加减乘除没区别）：</p>\n<ol>\n<li>当<strong>++、–写在变量前</strong>时，数学计算时，引用的是<strong>++、–未执行</strong>的变量值；</li>\n<li>当<strong>++、–写在变量后</strong>时，数学计算时，引用的是<strong>++、–执行后</strong>的变量值；</li>\n</ol>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过以上的理解，就不难看出，<strong>num1</strong>得到的求和结果实际上就是 a + b，而<strong>num2</strong>实际上是 a + (++b)，<strong>num3</strong>是(++a) + b，<strong>num4</strong>是(++a) + (++b)，但是求和归求和，++、–只是没在求和结果中执行，实际上变量的++、–都是执行了的，这一点要明确。</p>\n<h3 id=\"和–在变量引用时的计算规则\"><a href=\"#和–在变量引用时的计算规则\" class=\"headerlink\" title=\"++和–在变量引用时的计算规则\"></a>++和–在变量引用时的计算规则</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上代码：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let num1 = 0,</span><br><span class=\"line\">    num2 = 0;</span><br><span class=\"line\">let arr = [0, 1, 2, 3, 4, 5, 6];</span><br><span class=\"line\">console.log(arr[num1++]); // 0  num1=1</span><br><span class=\"line\">console.log(arr[++num2])  // 1  num2=1</span><br></pre></td></tr></table></figure>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过以上代码，不难看出，当在变量引用时执行++、–，与数学运算有相似的规律。总结起来就是一句话——<strong>++、–在变量前，引用++、–执行后的变量值；++、–在变量后，引用当前变量值（即执行++、–前的值）</strong>。</p>\n<h3 id=\"和–的数据转换应用\"><a href=\"#和–的数据转换应用\" class=\"headerlink\" title=\"++和–的数据转换应用\"></a>++和–的数据转换应用</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上代码：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let a = true;</span><br><span class=\"line\">let b = false;</span><br><span class=\"line\">let c = &quot;a&quot;;</span><br><span class=\"line\">console.log(++a); //2</span><br><span class=\"line\">console.log(b++); //0</span><br><span class=\"line\">console.log(c++); //NaN</span><br></pre></td></tr></table></figure>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;总结——对非 Number 类型的数据，应用++、–，相当于执行了 Number()方法。如果转换后是 number 类型，则按上边的规则执行++和–，如果转换后不是 number 类型，则不执行++和–。输出 NaN。不能直接进行类似++true 的操作，必须通过声明变量值为 true 或 false，然后再++、–。</p>\n<h3 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;越是简单常用的技巧，可能越容易被人忘记它的其他方面。保持一颗蓝翔毕业的心，挖掘所有东西~<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文同时发布于我的博客园<a href=\"https://www.cnblogs.com/keepStudying/p/9743457.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/keepStudying/p/9743457.html</a><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;转载请注明出处</p>"},{"title":"javascript精雕细琢（一）：var let const function声明的区别","date":"2018-12-25T03:54:21.000Z","_content":"### 引言\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在学习 javascript 的过程中，变量是无时无刻不在使用的。那么相对应的，变量声明方法也如是。变量是由自己决定，但变量声明方法是早已经定义好的。那么在使用变量之前，了解变量声明方法，就变得尤为重要。在 ES6 推出之前，最常用的声明变量方法就是 var。但是由于 var 自身的缺陷，ES6 推出了 let 和 const 替代 var。虽然修正了 var 的缺陷，但不能改变的，是之前已经用 var 写了多少年的项目，这些项目是无法随着 var 的被取代而轻易更改的。所以仍存在着使用 var 的公司和项目，这也使得了解 var、let、const 的区别变得有必要。\n<!--more-->\n### var\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在说明 var 并看代码之前，我们先统一思路，将变量的声明及使用过程分为：**创建 → 初始化 → 赋值 → 修改**四步。\n\n> **首先，来看 var 的声明及使用：**\n\n```\nfunction test() {\n　　/*\n   　　预解析，初始化与赋值分离\n       var a = undefined // 创建变量a，并初始化为undefined。此时变量已经存在与环境中\n   */\n        　　\n   console.log(a) //undefined\n\n   var a = 0; //赋值为0\n   console.log(a); // 0\n\n   a = 1; //可以修改变量值\n   console.log(a) // 1\n}\n\ntest();\n```\n\n以上代码可以看出，var 在它的执行环境中的声明及操作过程为：\n\n**（ 创建 → 初始化 ）→ 赋值 → 修改**\n\n1. 预解析：在环境最顶端，创建变量，并初始化为 undefined—— 变量提升；\n2. 为变量赋值；\n3. 对变量进行操作，可以在后续操作中对变量值进行修改；\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过 console.log 的打印结果，我们可以清晰的认识到一点——var 的初始化与赋值是分离的，而且初始化的过程优先于执行环境中的所有操作。这就是为什么在 var 声明赋值前 console.log 变量，会打印出 undefined，而不是报错的原因。\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var 声明的初始化先于赋值的现象，就叫做**变量提升**。\n\n> **然后着重说一下变量提升**\n\n1. if 判断中的变量提升\n\n```\nfunction test() {\n　　/*\n   　　预解析\n      虽然if判断没有执行，但var的变量提升已经发生，此时执行环境中，已经存在变量a，值为undefined；\n   */\n        　　\n   console.log(a) // undefined，变量提升\n        　　\n   if (false) {\n   　　var a = 1;\n       console.log(a) //不执行\n   }\n\n   console.log(a); //undefined，变量未赋值\n\n   a = 1; //注意，此时因为a的变量提升，未加声明符号的赋值，并没有提升到全局环境中\n   console.log(a); // 1\n}\n\ntest();\n\nconsole.log(a); // 报错，因为if中a的变量提升，a = 1的赋值并没有存在与全局中。如果注释掉if判断中的内容，a = 1因为没加变量声明符号，相当于在与全局中声明，那么最后的console.log(a)将打印1\n```\n\n<br>\n2.for循环中的变量提升\n```\nfunction test() {\n　　/*\n   　　预解析\n      虽然if判断没有执行，但var的变量提升已经发生，此时执行环境中，已经存在变量a，值为undefined；\n   */\n        　　　\n   console.log(a) // undefined，变量提升\n        　　\n   console.log(i); //undefined，变量提升\n   for (var i = 0;i < 0;i++) {\n   　　var a = 1;\n      console.log(a) //未执行\n   }\n   console.log(i); //1，for中的初始化语句已经执行\n\nconsole.log(a); //undefined，变量未赋值\n\na = 1;\nconsole.log(a);  \n}\n\ntest();\nconsole.log(a); //报错，变量不存在\n\n```\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;从上边代码中可以看出，**当var声明存在于if和for循环中时，不管赋值有没有执行，创建及初始化的过程都已经提升到了执行环境中**。\n\n> **最后说明var的一个缺陷：**\n```\n\nfunction test() {\n　 var a = 0;\nvar a = 1;\nvar a = 2;\n  \n console.log(a); // 2\n}\n\ntest();\n\n```\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由以上代码可以看出，var声明一个变量后，可以**无限次的以同一个变量名不断的重复 创建→初始化→赋值**，这跟直接修改变量值的结果是一样的。但是实际操作中不会有人通过这种方式操作变量，而且如果项目很大，很难保证不出现给不同变量声明同一个变量名的情况，很容易出现错误。\n\n### let\n> **首先，来看var的声明及使用：**\n```\n\nfunction test() {\n/_\n预解析，没有变量提升，啥也没有。创建、初始化与赋值同时进行\n_/\n  \n　 console.log(a); //报错，变量仍未创建\n\n    let a = 0; // 创建变量a，初始化并赋值为0.不赋值的话，则为undefined;\n    console.log(a); // 0\n\n    a = 2; // 可以修改变量值\n    console.log(a); // 2\n\n}\n\ntest();\n\n```\n同样，先分析过程：\n\n**（ 创建→初始化→赋值 ）→修改**\n\n1. 预解析，啥也没有；~~在环境最顶端，创建变量，并初始化为undefined—— 变量提升；~~\n2. 创建变量、初始化并赋值；\n3. 对变量进行操作，可以在后续操作中对变量值进行修改；\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过上方代码，我们可以看出let声明变量时，**（ 创建→初始化→赋值 ）是在一步完成的，不存在变量提升的现象**。所以在let声明前console.log(a)，报错a is not defined，因为此时a还没有被创建。而let初始化前的执行区域就叫做**暂存死区**。\n\n> **然后，来看let在重复声明时的表现：**\n```\n\nfunction test() {\n　 let a = 1;\nlet a = 2;\nlet a = 3;\n\nconsole.log(a); // 报错\n}\n\ntest();\n\n```\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以上说明了let区别于var的另一个特性——**变量的唯一性**。**同一个变量名，不能在let中重复使用**，所以执行上方代码操作的结果，就是报错**Identifier 'a' has already been declared**；\n\n> **最后，let与var最大的区别——块级作用域**\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;首先说明，**块级作用域**的概念——简单理解，**{}一个大括号就是一个代码块，一个单独的执行环境**。那么它理应不受外部影响（如果不是刻意为之的话，它也不应该影响外部环境）。\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;但是在let之前，JS中的变量声明是**没有块级作用域**的属性的。这其中最典型的案例，就是**for循环中的var声明i**。\n```\n\nfunction a() {\n　　 for (var i = 1;i < 5;i++) {\n　　 console.log(i);\nfor( var i = 10;i < 20;i++) {\n　　 console.log(i);\n}\n}\n}\na(); //只执行外部循环一次，因为内部循环由于 var 声明的缘故，执行过后 i 值已经为 11，外部循环判断后，将不再执行\n\nfunction testA() {\n　　/_\n　 预解析\n创建 i 并赋值为 undefined\n注意，此时实际上是两个 i 的变量提升\n_/\nconsole.log(i); // undefined\n\nvar i = 0; // 赋值 i = 0\nconsole.log(i); // 0;\n\n{\n　　 console.log(i); // 0，访问第一个 i\nvar i = 10 // 赋值 i = 10，覆盖第一个 i\nconsole.log(i); // 10，访问第二个 i\n}\n\nconsole.log(i); // 10，访问第二个 i，i 已经被覆盖\n}\ntestA();\n\n```\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以上代码，通过testA函数，侧面解释了一下a函数中的行为原因。这一行为模式，充分暴露了var声明的缺陷。\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**然后再来看let声明中的块级作用域：**\n```\n\nfunction b() {\n　　 for (let i = 0;i < 5;i++) {\n　　 console.log(i);\nfor(let i = 10;i < 20;i++) {\n　　 console.log(i);\n}\n}\n}\nb(); //因为块级作用域的存在，两个循环的 i 互不影响，所有循环次数都会被执行。实际使用时，建议还是不要都用同一变量名\n\nfunction testB() { 　　\n/_预解析啥也没有 _/\nconsole.log(i); // 报错，暂存死区\n\nlet i = 0;\n// 赋值 i = 0\nconsole.log(i); // 0;\n\n{\nconsole.log(i); // 报错，暂存死区，因为块中又声明了变量 i。如果块中没有 let i 的话，则按作用域链向上查找，打印外部 i 值 0\nlet i = 10 // 赋值 i = 10，不覆盖第一个 i\nconsole.log(i); // 10，访问第二个 i\n}\n\nconsole.log(i); // 0，访问第一个 i，两个 i 相互不影响  \n}\ntestB();\n\n```\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以上代码，通过testB函数，侧面解释了一下b函数中的行为原因。这一行为模式，体现了let生命中块级作用域的存在，并暴露出了let与var的最大区别。\n\n### const\n```\n\nfunction test() {\n　　/_\n　　预解析啥也没有，创建、初始化与赋值同时进行\n_/\nconsole.log(a); // 报错，变量仍未创建\n\nconst a = {\n　　 name: \"Lyu\" // 创建对象 a，并赋值为一个对象地址\n}\nconsole.log(a); //{name: \"Lyu\"}\nconsole.log(a.name); // Lyu\n\na = 1; //报错，常量值不可修改\n\na.name = \"Jack\";\n　　 console.log(a); // {name: \"Jack\"}\nconsole.log(a.name); // Jack\n}\n\ntest();\n\n```\n分析过程：\n\n**（ 创建→初始化→赋值 ）→修改**\n\n1. 预解析，啥也没有；~~预解析在环境最顶端，创建变量，并初始化为undefined—— 变量提升；~~\n2. 创建变量、初始化并赋值。必须赋值，不赋值会报错；\n3. 对变量进行操作，可以在后续操作中对变量值进行修改，不可以对变量进行修改，但是可以对变量的属性进行修改；\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为了说明const的特性，**特意声明了一个对象**。在理解了var和let的过程之后，再来看const的整个过程，会发现**在（ 创建→初始化→赋值 ）的过程中，const和let是没有区别的**。唯一的区别在于**→修改**。如果执行了上方的代码，在**a = 1**那步会报错**Assignment to constant variable**。其中的constant就是const的英文全拼，它的意思的**不变的、恒定的、恒量**。那么从字面上就能理解，通过const声明的变量，**是一个恒定值，即无法更改的值**。所以当通过**a = 1**试图修改a的值时，报错。\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;虽然**a本身的值**无法修改，但是a为对象，值为地址，所以**a的属性是可以修改的**。从代码最后一步可以看出。a.name的值成功修改为\"Jack\"。这就是const 的第二个特性。\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;同let一样的，const的第三个特性也是**变量的唯一性**，不再过多阐述。\n\n### function\n> **首先，来看function的声明及使用：**　\n```\n\n/_\n　　 funtcion test() {...}\n预解析，创建、初始化、赋值三位一体\n此时函数已经完成变量声明的所有操作，在执行环境的任何位置都可以调用函数  \n_/\n\ntest(); //调用函数，只要函数确实存在并可用，那么在执行环境任何位置都可以调用\n\nfunction test() {...}\n\n```\n分析过程：\n\n**（ 创建→初始化→赋值 ）→执行/修改**\n\n1. 预解析，在环境最顶端，创建函数，初始化并赋值为函数定义；\n2. 执行函数，无论函数在何位置，只要可用，就可以调用；\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function是专门用于函数声明的方法，由于函数的复杂性，以及利用性。function声明的函数，会在整个环境变量最顶端完成**创建、初始化、赋值三位一体**的操作。这样一来，不管在何处声明了函数，可以在任何地方调用函数方法。这是比较合乎常理的性质。\n\n> **然后，function同var一样，同样存在变量声明的特性：**\n\n1. if判断中的变量提升\n```\n\nfunction test() {\n　　/_\n　　预解析\n　　虽然 if 判断没有执行，但 function 的变量提升已经发生，此时执行环境中，已经存在变量 a，值为 undefined；\n_/\n　　\nconsole.log(a) // undefined，变量提升\n　　\nif (false) {\n　　 function a(){}; // 变量提升\nconsole.log(a) //不执行\n}\n\nconsole.log(a); //undefined，变量未赋值\n\na = 1; //注意，此时因为 a 的变量提升，未加声明符号的赋值，并没有提升到全局环境中\nconsole.log(a); // 1  \n}\n\ntest();\n\nconsole.log(a); // 报错，因为 if 中 a 的变量提升，a = 1 的赋值并没有存在与全局中。如果注释掉 if 判断中的内容，a = 1 因为没加变量声明符号，相当于在与全局中声明，那么最后的 console.log(a)将打印 1\n\n```\n<br>\n\n2. for循环中的变量提升\n```\n\nfunction test() {\n　　/_\n　　预解析\n虽然 if 判断没有执行，但 function 的变量提升已经发生，此时执行环境中，已经存在变量 a，值为 undefined；\n_/\n　　　\nconsole.log(a) // undefined，变量提升\n　　\nconsole.log(i); //报错，暂存死区\nfor (let i = 0;i < 0;i++) {\n　　 function a() {}; //变量提升\nconsole.log(a) //未执行\n}\nconsole.log(i); //报错，let 不存在变量提升\n\nconsole.log(a); //undefined，变量未赋值\n\na = 1;\nconsole.log(a);  \n}\n\ntest();\nconsole.log(a); //报错，变量不存在\n\n```\n\n> **最后，function同var一样，它也可以对同一变量重复声明，而且后边的函数定义会覆盖前边的函数定义：**\n\n```\n\ntest(); // 2\n\nfunction test() {\n　　 console.log(1);　　\n}\n\nfunction test() {\n　　 console.log(2);\n}\n\n```\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;结果打印2，说明前边声明的函数方法被后边所覆盖。\n\n### 结语\n综上所述，可以总结为如下几点：\n\n1.var与let、const的区别在于**变量提升**，以及**变量的唯一性**；\n2.const与let的区别，**除了变量值不能修改，其他性质一样**；\n3.function由于其自身的需要，**创建→初始化→赋值三位一体**，在环境最顶端完成；也正因为这种性质，**函数声明的函数可以在任何位置被调用**；\n4.如果可以，尽量**使用let、const代替var**；\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文仅仅简单罗列了在函数声明及操作方面，var、let、const、function的区别，意在为初学者理清概念偏差，少走弯路，并通过理解学习，早日跨入JS门槛。\n\n**以上，如有错误或是纰漏，欢迎批评指正~**\n","source":"_posts/javascript精雕细琢（一）：var-let-const-function声明的区别.md","raw":"---\ntitle: javascript精雕细琢（一）：var let const function声明的区别\ndate: 2018-12-25 11:54:21\ncategories:\n  - 前端\n  - JS\ntags:\n  - JS\n---\n### 引言\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在学习 javascript 的过程中，变量是无时无刻不在使用的。那么相对应的，变量声明方法也如是。变量是由自己决定，但变量声明方法是早已经定义好的。那么在使用变量之前，了解变量声明方法，就变得尤为重要。在 ES6 推出之前，最常用的声明变量方法就是 var。但是由于 var 自身的缺陷，ES6 推出了 let 和 const 替代 var。虽然修正了 var 的缺陷，但不能改变的，是之前已经用 var 写了多少年的项目，这些项目是无法随着 var 的被取代而轻易更改的。所以仍存在着使用 var 的公司和项目，这也使得了解 var、let、const 的区别变得有必要。\n<!--more-->\n### var\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在说明 var 并看代码之前，我们先统一思路，将变量的声明及使用过程分为：**创建 → 初始化 → 赋值 → 修改**四步。\n\n> **首先，来看 var 的声明及使用：**\n\n```\nfunction test() {\n　　/*\n   　　预解析，初始化与赋值分离\n       var a = undefined // 创建变量a，并初始化为undefined。此时变量已经存在与环境中\n   */\n        　　\n   console.log(a) //undefined\n\n   var a = 0; //赋值为0\n   console.log(a); // 0\n\n   a = 1; //可以修改变量值\n   console.log(a) // 1\n}\n\ntest();\n```\n\n以上代码可以看出，var 在它的执行环境中的声明及操作过程为：\n\n**（ 创建 → 初始化 ）→ 赋值 → 修改**\n\n1. 预解析：在环境最顶端，创建变量，并初始化为 undefined—— 变量提升；\n2. 为变量赋值；\n3. 对变量进行操作，可以在后续操作中对变量值进行修改；\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过 console.log 的打印结果，我们可以清晰的认识到一点——var 的初始化与赋值是分离的，而且初始化的过程优先于执行环境中的所有操作。这就是为什么在 var 声明赋值前 console.log 变量，会打印出 undefined，而不是报错的原因。\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var 声明的初始化先于赋值的现象，就叫做**变量提升**。\n\n> **然后着重说一下变量提升**\n\n1. if 判断中的变量提升\n\n```\nfunction test() {\n　　/*\n   　　预解析\n      虽然if判断没有执行，但var的变量提升已经发生，此时执行环境中，已经存在变量a，值为undefined；\n   */\n        　　\n   console.log(a) // undefined，变量提升\n        　　\n   if (false) {\n   　　var a = 1;\n       console.log(a) //不执行\n   }\n\n   console.log(a); //undefined，变量未赋值\n\n   a = 1; //注意，此时因为a的变量提升，未加声明符号的赋值，并没有提升到全局环境中\n   console.log(a); // 1\n}\n\ntest();\n\nconsole.log(a); // 报错，因为if中a的变量提升，a = 1的赋值并没有存在与全局中。如果注释掉if判断中的内容，a = 1因为没加变量声明符号，相当于在与全局中声明，那么最后的console.log(a)将打印1\n```\n\n<br>\n2.for循环中的变量提升\n```\nfunction test() {\n　　/*\n   　　预解析\n      虽然if判断没有执行，但var的变量提升已经发生，此时执行环境中，已经存在变量a，值为undefined；\n   */\n        　　　\n   console.log(a) // undefined，变量提升\n        　　\n   console.log(i); //undefined，变量提升\n   for (var i = 0;i < 0;i++) {\n   　　var a = 1;\n      console.log(a) //未执行\n   }\n   console.log(i); //1，for中的初始化语句已经执行\n\nconsole.log(a); //undefined，变量未赋值\n\na = 1;\nconsole.log(a);  \n}\n\ntest();\nconsole.log(a); //报错，变量不存在\n\n```\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;从上边代码中可以看出，**当var声明存在于if和for循环中时，不管赋值有没有执行，创建及初始化的过程都已经提升到了执行环境中**。\n\n> **最后说明var的一个缺陷：**\n```\n\nfunction test() {\n　 var a = 0;\nvar a = 1;\nvar a = 2;\n  \n console.log(a); // 2\n}\n\ntest();\n\n```\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由以上代码可以看出，var声明一个变量后，可以**无限次的以同一个变量名不断的重复 创建→初始化→赋值**，这跟直接修改变量值的结果是一样的。但是实际操作中不会有人通过这种方式操作变量，而且如果项目很大，很难保证不出现给不同变量声明同一个变量名的情况，很容易出现错误。\n\n### let\n> **首先，来看var的声明及使用：**\n```\n\nfunction test() {\n/_\n预解析，没有变量提升，啥也没有。创建、初始化与赋值同时进行\n_/\n  \n　 console.log(a); //报错，变量仍未创建\n\n    let a = 0; // 创建变量a，初始化并赋值为0.不赋值的话，则为undefined;\n    console.log(a); // 0\n\n    a = 2; // 可以修改变量值\n    console.log(a); // 2\n\n}\n\ntest();\n\n```\n同样，先分析过程：\n\n**（ 创建→初始化→赋值 ）→修改**\n\n1. 预解析，啥也没有；~~在环境最顶端，创建变量，并初始化为undefined—— 变量提升；~~\n2. 创建变量、初始化并赋值；\n3. 对变量进行操作，可以在后续操作中对变量值进行修改；\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过上方代码，我们可以看出let声明变量时，**（ 创建→初始化→赋值 ）是在一步完成的，不存在变量提升的现象**。所以在let声明前console.log(a)，报错a is not defined，因为此时a还没有被创建。而let初始化前的执行区域就叫做**暂存死区**。\n\n> **然后，来看let在重复声明时的表现：**\n```\n\nfunction test() {\n　 let a = 1;\nlet a = 2;\nlet a = 3;\n\nconsole.log(a); // 报错\n}\n\ntest();\n\n```\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以上说明了let区别于var的另一个特性——**变量的唯一性**。**同一个变量名，不能在let中重复使用**，所以执行上方代码操作的结果，就是报错**Identifier 'a' has already been declared**；\n\n> **最后，let与var最大的区别——块级作用域**\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;首先说明，**块级作用域**的概念——简单理解，**{}一个大括号就是一个代码块，一个单独的执行环境**。那么它理应不受外部影响（如果不是刻意为之的话，它也不应该影响外部环境）。\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;但是在let之前，JS中的变量声明是**没有块级作用域**的属性的。这其中最典型的案例，就是**for循环中的var声明i**。\n```\n\nfunction a() {\n　　 for (var i = 1;i < 5;i++) {\n　　 console.log(i);\nfor( var i = 10;i < 20;i++) {\n　　 console.log(i);\n}\n}\n}\na(); //只执行外部循环一次，因为内部循环由于 var 声明的缘故，执行过后 i 值已经为 11，外部循环判断后，将不再执行\n\nfunction testA() {\n　　/_\n　 预解析\n创建 i 并赋值为 undefined\n注意，此时实际上是两个 i 的变量提升\n_/\nconsole.log(i); // undefined\n\nvar i = 0; // 赋值 i = 0\nconsole.log(i); // 0;\n\n{\n　　 console.log(i); // 0，访问第一个 i\nvar i = 10 // 赋值 i = 10，覆盖第一个 i\nconsole.log(i); // 10，访问第二个 i\n}\n\nconsole.log(i); // 10，访问第二个 i，i 已经被覆盖\n}\ntestA();\n\n```\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以上代码，通过testA函数，侧面解释了一下a函数中的行为原因。这一行为模式，充分暴露了var声明的缺陷。\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**然后再来看let声明中的块级作用域：**\n```\n\nfunction b() {\n　　 for (let i = 0;i < 5;i++) {\n　　 console.log(i);\nfor(let i = 10;i < 20;i++) {\n　　 console.log(i);\n}\n}\n}\nb(); //因为块级作用域的存在，两个循环的 i 互不影响，所有循环次数都会被执行。实际使用时，建议还是不要都用同一变量名\n\nfunction testB() { 　　\n/_预解析啥也没有 _/\nconsole.log(i); // 报错，暂存死区\n\nlet i = 0;\n// 赋值 i = 0\nconsole.log(i); // 0;\n\n{\nconsole.log(i); // 报错，暂存死区，因为块中又声明了变量 i。如果块中没有 let i 的话，则按作用域链向上查找，打印外部 i 值 0\nlet i = 10 // 赋值 i = 10，不覆盖第一个 i\nconsole.log(i); // 10，访问第二个 i\n}\n\nconsole.log(i); // 0，访问第一个 i，两个 i 相互不影响  \n}\ntestB();\n\n```\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以上代码，通过testB函数，侧面解释了一下b函数中的行为原因。这一行为模式，体现了let生命中块级作用域的存在，并暴露出了let与var的最大区别。\n\n### const\n```\n\nfunction test() {\n　　/_\n　　预解析啥也没有，创建、初始化与赋值同时进行\n_/\nconsole.log(a); // 报错，变量仍未创建\n\nconst a = {\n　　 name: \"Lyu\" // 创建对象 a，并赋值为一个对象地址\n}\nconsole.log(a); //{name: \"Lyu\"}\nconsole.log(a.name); // Lyu\n\na = 1; //报错，常量值不可修改\n\na.name = \"Jack\";\n　　 console.log(a); // {name: \"Jack\"}\nconsole.log(a.name); // Jack\n}\n\ntest();\n\n```\n分析过程：\n\n**（ 创建→初始化→赋值 ）→修改**\n\n1. 预解析，啥也没有；~~预解析在环境最顶端，创建变量，并初始化为undefined—— 变量提升；~~\n2. 创建变量、初始化并赋值。必须赋值，不赋值会报错；\n3. 对变量进行操作，可以在后续操作中对变量值进行修改，不可以对变量进行修改，但是可以对变量的属性进行修改；\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为了说明const的特性，**特意声明了一个对象**。在理解了var和let的过程之后，再来看const的整个过程，会发现**在（ 创建→初始化→赋值 ）的过程中，const和let是没有区别的**。唯一的区别在于**→修改**。如果执行了上方的代码，在**a = 1**那步会报错**Assignment to constant variable**。其中的constant就是const的英文全拼，它的意思的**不变的、恒定的、恒量**。那么从字面上就能理解，通过const声明的变量，**是一个恒定值，即无法更改的值**。所以当通过**a = 1**试图修改a的值时，报错。\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;虽然**a本身的值**无法修改，但是a为对象，值为地址，所以**a的属性是可以修改的**。从代码最后一步可以看出。a.name的值成功修改为\"Jack\"。这就是const 的第二个特性。\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;同let一样的，const的第三个特性也是**变量的唯一性**，不再过多阐述。\n\n### function\n> **首先，来看function的声明及使用：**　\n```\n\n/_\n　　 funtcion test() {...}\n预解析，创建、初始化、赋值三位一体\n此时函数已经完成变量声明的所有操作，在执行环境的任何位置都可以调用函数  \n_/\n\ntest(); //调用函数，只要函数确实存在并可用，那么在执行环境任何位置都可以调用\n\nfunction test() {...}\n\n```\n分析过程：\n\n**（ 创建→初始化→赋值 ）→执行/修改**\n\n1. 预解析，在环境最顶端，创建函数，初始化并赋值为函数定义；\n2. 执行函数，无论函数在何位置，只要可用，就可以调用；\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function是专门用于函数声明的方法，由于函数的复杂性，以及利用性。function声明的函数，会在整个环境变量最顶端完成**创建、初始化、赋值三位一体**的操作。这样一来，不管在何处声明了函数，可以在任何地方调用函数方法。这是比较合乎常理的性质。\n\n> **然后，function同var一样，同样存在变量声明的特性：**\n\n1. if判断中的变量提升\n```\n\nfunction test() {\n　　/_\n　　预解析\n　　虽然 if 判断没有执行，但 function 的变量提升已经发生，此时执行环境中，已经存在变量 a，值为 undefined；\n_/\n　　\nconsole.log(a) // undefined，变量提升\n　　\nif (false) {\n　　 function a(){}; // 变量提升\nconsole.log(a) //不执行\n}\n\nconsole.log(a); //undefined，变量未赋值\n\na = 1; //注意，此时因为 a 的变量提升，未加声明符号的赋值，并没有提升到全局环境中\nconsole.log(a); // 1  \n}\n\ntest();\n\nconsole.log(a); // 报错，因为 if 中 a 的变量提升，a = 1 的赋值并没有存在与全局中。如果注释掉 if 判断中的内容，a = 1 因为没加变量声明符号，相当于在与全局中声明，那么最后的 console.log(a)将打印 1\n\n```\n<br>\n\n2. for循环中的变量提升\n```\n\nfunction test() {\n　　/_\n　　预解析\n虽然 if 判断没有执行，但 function 的变量提升已经发生，此时执行环境中，已经存在变量 a，值为 undefined；\n_/\n　　　\nconsole.log(a) // undefined，变量提升\n　　\nconsole.log(i); //报错，暂存死区\nfor (let i = 0;i < 0;i++) {\n　　 function a() {}; //变量提升\nconsole.log(a) //未执行\n}\nconsole.log(i); //报错，let 不存在变量提升\n\nconsole.log(a); //undefined，变量未赋值\n\na = 1;\nconsole.log(a);  \n}\n\ntest();\nconsole.log(a); //报错，变量不存在\n\n```\n\n> **最后，function同var一样，它也可以对同一变量重复声明，而且后边的函数定义会覆盖前边的函数定义：**\n\n```\n\ntest(); // 2\n\nfunction test() {\n　　 console.log(1);　　\n}\n\nfunction test() {\n　　 console.log(2);\n}\n\n```\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;结果打印2，说明前边声明的函数方法被后边所覆盖。\n\n### 结语\n综上所述，可以总结为如下几点：\n\n1.var与let、const的区别在于**变量提升**，以及**变量的唯一性**；\n2.const与let的区别，**除了变量值不能修改，其他性质一样**；\n3.function由于其自身的需要，**创建→初始化→赋值三位一体**，在环境最顶端完成；也正因为这种性质，**函数声明的函数可以在任何位置被调用**；\n4.如果可以，尽量**使用let、const代替var**；\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文仅仅简单罗列了在函数声明及操作方面，var、let、const、function的区别，意在为初学者理清概念偏差，少走弯路，并通过理解学习，早日跨入JS门槛。\n\n**以上，如有错误或是纰漏，欢迎批评指正~**\n","slug":"javascript精雕细琢（一）：var-let-const-function声明的区别","published":1,"updated":"2018-12-26T08:28:42.524Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjq80g9qv0003w4vusvuqqk66","content":"<h3 id=\"引言\"><a href=\"#引言\" class=\"headerlink\" title=\"引言\"></a>引言</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在学习 javascript 的过程中，变量是无时无刻不在使用的。那么相对应的，变量声明方法也如是。变量是由自己决定，但变量声明方法是早已经定义好的。那么在使用变量之前，了解变量声明方法，就变得尤为重要。在 ES6 推出之前，最常用的声明变量方法就是 var。但是由于 var 自身的缺陷，ES6 推出了 let 和 const 替代 var。虽然修正了 var 的缺陷，但不能改变的，是之前已经用 var 写了多少年的项目，这些项目是无法随着 var 的被取代而轻易更改的。所以仍存在着使用 var 的公司和项目，这也使得了解 var、let、const 的区别变得有必要。<br><a id=\"more\"></a></p>\n<h3 id=\"var\"><a href=\"#var\" class=\"headerlink\" title=\"var\"></a>var</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在说明 var 并看代码之前，我们先统一思路，将变量的声明及使用过程分为：<strong>创建 → 初始化 → 赋值 → 修改</strong>四步。</p>\n<blockquote>\n<p><strong>首先，来看 var 的声明及使用：</strong></p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　　/*</span><br><span class=\"line\">   　　预解析，初始化与赋值分离</span><br><span class=\"line\">       var a = undefined // 创建变量a，并初始化为undefined。此时变量已经存在与环境中</span><br><span class=\"line\">   */</span><br><span class=\"line\">        　　</span><br><span class=\"line\">   console.log(a) //undefined</span><br><span class=\"line\"></span><br><span class=\"line\">   var a = 0; //赋值为0</span><br><span class=\"line\">   console.log(a); // 0</span><br><span class=\"line\"></span><br><span class=\"line\">   a = 1; //可以修改变量值</span><br><span class=\"line\">   console.log(a) // 1</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br></pre></td></tr></table></figure>\n<p>以上代码可以看出，var 在它的执行环境中的声明及操作过程为：</p>\n<p><strong>（ 创建 → 初始化 ）→ 赋值 → 修改</strong></p>\n<ol>\n<li>预解析：在环境最顶端，创建变量，并初始化为 undefined—— 变量提升；</li>\n<li>为变量赋值；</li>\n<li>对变量进行操作，可以在后续操作中对变量值进行修改；</li>\n</ol>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过 console.log 的打印结果，我们可以清晰的认识到一点——var 的初始化与赋值是分离的，而且初始化的过程优先于执行环境中的所有操作。这就是为什么在 var 声明赋值前 console.log 变量，会打印出 undefined，而不是报错的原因。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var 声明的初始化先于赋值的现象，就叫做<strong>变量提升</strong>。</p>\n<blockquote>\n<p><strong>然后着重说一下变量提升</strong></p>\n</blockquote>\n<ol>\n<li>if 判断中的变量提升</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　　/*</span><br><span class=\"line\">   　　预解析</span><br><span class=\"line\">      虽然if判断没有执行，但var的变量提升已经发生，此时执行环境中，已经存在变量a，值为undefined；</span><br><span class=\"line\">   */</span><br><span class=\"line\">        　　</span><br><span class=\"line\">   console.log(a) // undefined，变量提升</span><br><span class=\"line\">        　　</span><br><span class=\"line\">   if (false) &#123;</span><br><span class=\"line\">   　　var a = 1;</span><br><span class=\"line\">       console.log(a) //不执行</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   console.log(a); //undefined，变量未赋值</span><br><span class=\"line\"></span><br><span class=\"line\">   a = 1; //注意，此时因为a的变量提升，未加声明符号的赋值，并没有提升到全局环境中</span><br><span class=\"line\">   console.log(a); // 1</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(a); // 报错，因为if中a的变量提升，a = 1的赋值并没有存在与全局中。如果注释掉if判断中的内容，a = 1因为没加变量声明符号，相当于在与全局中声明，那么最后的console.log(a)将打印1</span><br></pre></td></tr></table></figure>\n<p><br><br>2.for循环中的变量提升<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　　/*</span><br><span class=\"line\">   　　预解析</span><br><span class=\"line\">      虽然if判断没有执行，但var的变量提升已经发生，此时执行环境中，已经存在变量a，值为undefined；</span><br><span class=\"line\">   */</span><br><span class=\"line\">        　　　</span><br><span class=\"line\">   console.log(a) // undefined，变量提升</span><br><span class=\"line\">        　　</span><br><span class=\"line\">   console.log(i); //undefined，变量提升</span><br><span class=\"line\">   for (var i = 0;i &lt; 0;i++) &#123;</span><br><span class=\"line\">   　　var a = 1;</span><br><span class=\"line\">      console.log(a) //未执行</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   console.log(i); //1，for中的初始化语句已经执行</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(a); //undefined，变量未赋值</span><br><span class=\"line\"></span><br><span class=\"line\">a = 1;</span><br><span class=\"line\">console.log(a);  </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br><span class=\"line\">console.log(a); //报错，变量不存在</span><br></pre></td></tr></table></figure></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;从上边代码中可以看出，<strong>当var声明存在于if和for循环中时，不管赋值有没有执行，创建及初始化的过程都已经提升到了执行环境中</strong>。</p>\n<blockquote>\n<p><strong>最后说明var的一个缺陷：</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　 var a = 0;</span><br><span class=\"line\">var a = 1;</span><br><span class=\"line\">var a = 2;</span><br><span class=\"line\">  </span><br><span class=\"line\"> console.log(a); // 2</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由以上代码可以看出，var声明一个变量后，可以<strong>无限次的以同一个变量名不断的重复 创建→初始化→赋值</strong>，这跟直接修改变量值的结果是一样的。但是实际操作中不会有人通过这种方式操作变量，而且如果项目很大，很难保证不出现给不同变量声明同一个变量名的情况，很容易出现错误。</p>\n<h3 id=\"let\"><a href=\"#let\" class=\"headerlink\" title=\"let\"></a>let</h3><blockquote>\n<p><strong>首先，来看var的声明及使用：</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function test() &#123;</span><br><span class=\"line\">/_</span><br><span class=\"line\">预解析，没有变量提升，啥也没有。创建、初始化与赋值同时进行</span><br><span class=\"line\">_/</span><br><span class=\"line\">  </span><br><span class=\"line\">　 console.log(a); //报错，变量仍未创建</span><br><span class=\"line\"></span><br><span class=\"line\">    let a = 0; // 创建变量a，初始化并赋值为0.不赋值的话，则为undefined;</span><br><span class=\"line\">    console.log(a); // 0</span><br><span class=\"line\"></span><br><span class=\"line\">    a = 2; // 可以修改变量值</span><br><span class=\"line\">    console.log(a); // 2</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>同样，先分析过程：</p>\n<p><strong>（ 创建→初始化→赋值 ）→修改</strong></p>\n<ol>\n<li>预解析，啥也没有；<del>在环境最顶端，创建变量，并初始化为undefined—— 变量提升；</del></li>\n<li>创建变量、初始化并赋值；</li>\n<li>对变量进行操作，可以在后续操作中对变量值进行修改；</li>\n</ol>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过上方代码，我们可以看出let声明变量时，<strong>（ 创建→初始化→赋值 ）是在一步完成的，不存在变量提升的现象</strong>。所以在let声明前console.log(a)，报错a is not defined，因为此时a还没有被创建。而let初始化前的执行区域就叫做<strong>暂存死区</strong>。</p>\n<blockquote>\n<p><strong>然后，来看let在重复声明时的表现：</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　 let a = 1;</span><br><span class=\"line\">let a = 2;</span><br><span class=\"line\">let a = 3;</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(a); // 报错</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以上说明了let区别于var的另一个特性——<strong>变量的唯一性</strong>。<strong>同一个变量名，不能在let中重复使用</strong>，所以执行上方代码操作的结果，就是报错<strong>Identifier ‘a’ has already been declared</strong>；</p>\n<blockquote>\n<p><strong>最后，let与var最大的区别——块级作用域</strong></p>\n</blockquote>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;首先说明，<strong>块级作用域</strong>的概念——简单理解，<strong>{}一个大括号就是一个代码块，一个单独的执行环境</strong>。那么它理应不受外部影响（如果不是刻意为之的话，它也不应该影响外部环境）。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;但是在let之前，JS中的变量声明是<strong>没有块级作用域</strong>的属性的。这其中最典型的案例，就是<strong>for循环中的var声明i</strong>。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function a() &#123;</span><br><span class=\"line\">　　 for (var i = 1;i &lt; 5;i++) &#123;</span><br><span class=\"line\">　　 console.log(i);</span><br><span class=\"line\">for( var i = 10;i &lt; 20;i++) &#123;</span><br><span class=\"line\">　　 console.log(i);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">a(); //只执行外部循环一次，因为内部循环由于 var 声明的缘故，执行过后 i 值已经为 11，外部循环判断后，将不再执行</span><br><span class=\"line\"></span><br><span class=\"line\">function testA() &#123;</span><br><span class=\"line\">　　/_</span><br><span class=\"line\">　 预解析</span><br><span class=\"line\">创建 i 并赋值为 undefined</span><br><span class=\"line\">注意，此时实际上是两个 i 的变量提升</span><br><span class=\"line\">_/</span><br><span class=\"line\">console.log(i); // undefined</span><br><span class=\"line\"></span><br><span class=\"line\">var i = 0; // 赋值 i = 0</span><br><span class=\"line\">console.log(i); // 0;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">　　 console.log(i); // 0，访问第一个 i</span><br><span class=\"line\">var i = 10 // 赋值 i = 10，覆盖第一个 i</span><br><span class=\"line\">console.log(i); // 10，访问第二个 i</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(i); // 10，访问第二个 i，i 已经被覆盖</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">testA();</span><br></pre></td></tr></table></figure></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以上代码，通过testA函数，侧面解释了一下a函数中的行为原因。这一行为模式，充分暴露了var声明的缺陷。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>然后再来看let声明中的块级作用域：</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function b() &#123;</span><br><span class=\"line\">　　 for (let i = 0;i &lt; 5;i++) &#123;</span><br><span class=\"line\">　　 console.log(i);</span><br><span class=\"line\">for(let i = 10;i &lt; 20;i++) &#123;</span><br><span class=\"line\">　　 console.log(i);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">b(); //因为块级作用域的存在，两个循环的 i 互不影响，所有循环次数都会被执行。实际使用时，建议还是不要都用同一变量名</span><br><span class=\"line\"></span><br><span class=\"line\">function testB() &#123; 　　</span><br><span class=\"line\">/_预解析啥也没有 _/</span><br><span class=\"line\">console.log(i); // 报错，暂存死区</span><br><span class=\"line\"></span><br><span class=\"line\">let i = 0;</span><br><span class=\"line\">// 赋值 i = 0</span><br><span class=\"line\">console.log(i); // 0;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">console.log(i); // 报错，暂存死区，因为块中又声明了变量 i。如果块中没有 let i 的话，则按作用域链向上查找，打印外部 i 值 0</span><br><span class=\"line\">let i = 10 // 赋值 i = 10，不覆盖第一个 i</span><br><span class=\"line\">console.log(i); // 10，访问第二个 i</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(i); // 0，访问第一个 i，两个 i 相互不影响  </span><br><span class=\"line\">&#125;</span><br><span class=\"line\">testB();</span><br></pre></td></tr></table></figure></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以上代码，通过testB函数，侧面解释了一下b函数中的行为原因。这一行为模式，体现了let生命中块级作用域的存在，并暴露出了let与var的最大区别。</p>\n<h3 id=\"const\"><a href=\"#const\" class=\"headerlink\" title=\"const\"></a>const</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　　/_</span><br><span class=\"line\">　　预解析啥也没有，创建、初始化与赋值同时进行</span><br><span class=\"line\">_/</span><br><span class=\"line\">console.log(a); // 报错，变量仍未创建</span><br><span class=\"line\"></span><br><span class=\"line\">const a = &#123;</span><br><span class=\"line\">　　 name: &quot;Lyu&quot; // 创建对象 a，并赋值为一个对象地址</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">console.log(a); //&#123;name: &quot;Lyu&quot;&#125;</span><br><span class=\"line\">console.log(a.name); // Lyu</span><br><span class=\"line\"></span><br><span class=\"line\">a = 1; //报错，常量值不可修改</span><br><span class=\"line\"></span><br><span class=\"line\">a.name = &quot;Jack&quot;;</span><br><span class=\"line\">　　 console.log(a); // &#123;name: &quot;Jack&quot;&#125;</span><br><span class=\"line\">console.log(a.name); // Jack</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br></pre></td></tr></table></figure>\n<p>分析过程：</p>\n<p><strong>（ 创建→初始化→赋值 ）→修改</strong></p>\n<ol>\n<li>预解析，啥也没有；<del>预解析在环境最顶端，创建变量，并初始化为undefined—— 变量提升；</del></li>\n<li>创建变量、初始化并赋值。必须赋值，不赋值会报错；</li>\n<li>对变量进行操作，可以在后续操作中对变量值进行修改，不可以对变量进行修改，但是可以对变量的属性进行修改；</li>\n</ol>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为了说明const的特性，<strong>特意声明了一个对象</strong>。在理解了var和let的过程之后，再来看const的整个过程，会发现<strong>在（ 创建→初始化→赋值 ）的过程中，const和let是没有区别的</strong>。唯一的区别在于<strong>→修改</strong>。如果执行了上方的代码，在<strong>a = 1</strong>那步会报错<strong>Assignment to constant variable</strong>。其中的constant就是const的英文全拼，它的意思的<strong>不变的、恒定的、恒量</strong>。那么从字面上就能理解，通过const声明的变量，<strong>是一个恒定值，即无法更改的值</strong>。所以当通过<strong>a = 1</strong>试图修改a的值时，报错。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;虽然<strong>a本身的值</strong>无法修改，但是a为对象，值为地址，所以<strong>a的属性是可以修改的</strong>。从代码最后一步可以看出。a.name的值成功修改为”Jack”。这就是const 的第二个特性。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;同let一样的，const的第三个特性也是<strong>变量的唯一性</strong>，不再过多阐述。</p>\n<h3 id=\"function\"><a href=\"#function\" class=\"headerlink\" title=\"function\"></a>function</h3><blockquote>\n<p><strong>首先，来看function的声明及使用：</strong>　<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">/_</span><br><span class=\"line\">　　 funtcion test() &#123;...&#125;</span><br><span class=\"line\">预解析，创建、初始化、赋值三位一体</span><br><span class=\"line\">此时函数已经完成变量声明的所有操作，在执行环境的任何位置都可以调用函数  </span><br><span class=\"line\">_/</span><br><span class=\"line\"></span><br><span class=\"line\">test(); //调用函数，只要函数确实存在并可用，那么在执行环境任何位置都可以调用</span><br><span class=\"line\"></span><br><span class=\"line\">function test() &#123;...&#125;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>分析过程：</p>\n<p><strong>（ 创建→初始化→赋值 ）→执行/修改</strong></p>\n<ol>\n<li>预解析，在环境最顶端，创建函数，初始化并赋值为函数定义；</li>\n<li>执行函数，无论函数在何位置，只要可用，就可以调用；</li>\n</ol>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function是专门用于函数声明的方法，由于函数的复杂性，以及利用性。function声明的函数，会在整个环境变量最顶端完成<strong>创建、初始化、赋值三位一体</strong>的操作。这样一来，不管在何处声明了函数，可以在任何地方调用函数方法。这是比较合乎常理的性质。</p>\n<blockquote>\n<p><strong>然后，function同var一样，同样存在变量声明的特性：</strong></p>\n</blockquote>\n<ol>\n<li>if判断中的变量提升<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　　/_</span><br><span class=\"line\">　　预解析</span><br><span class=\"line\">　　虽然 if 判断没有执行，但 function 的变量提升已经发生，此时执行环境中，已经存在变量 a，值为 undefined；</span><br><span class=\"line\">_/</span><br><span class=\"line\">　　</span><br><span class=\"line\">console.log(a) // undefined，变量提升</span><br><span class=\"line\">　　</span><br><span class=\"line\">if (false) &#123;</span><br><span class=\"line\">　　 function a()&#123;&#125;; // 变量提升</span><br><span class=\"line\">console.log(a) //不执行</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(a); //undefined，变量未赋值</span><br><span class=\"line\"></span><br><span class=\"line\">a = 1; //注意，此时因为 a 的变量提升，未加声明符号的赋值，并没有提升到全局环境中</span><br><span class=\"line\">console.log(a); // 1  </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(a); // 报错，因为 if 中 a 的变量提升，a = 1 的赋值并没有存在与全局中。如果注释掉 if 判断中的内容，a = 1 因为没加变量声明符号，相当于在与全局中声明，那么最后的 console.log(a)将打印 1</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p><br></p>\n<ol start=\"2\">\n<li>for循环中的变量提升<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　　/_</span><br><span class=\"line\">　　预解析</span><br><span class=\"line\">虽然 if 判断没有执行，但 function 的变量提升已经发生，此时执行环境中，已经存在变量 a，值为 undefined；</span><br><span class=\"line\">_/</span><br><span class=\"line\">　　　</span><br><span class=\"line\">console.log(a) // undefined，变量提升</span><br><span class=\"line\">　　</span><br><span class=\"line\">console.log(i); //报错，暂存死区</span><br><span class=\"line\">for (let i = 0;i &lt; 0;i++) &#123;</span><br><span class=\"line\">　　 function a() &#123;&#125;; //变量提升</span><br><span class=\"line\">console.log(a) //未执行</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">console.log(i); //报错，let 不存在变量提升</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(a); //undefined，变量未赋值</span><br><span class=\"line\"></span><br><span class=\"line\">a = 1;</span><br><span class=\"line\">console.log(a);  </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br><span class=\"line\">console.log(a); //报错，变量不存在</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<blockquote>\n<p><strong>最后，function同var一样，它也可以对同一变量重复声明，而且后边的函数定义会覆盖前边的函数定义：</strong></p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">test(); // 2</span><br><span class=\"line\"></span><br><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　　 console.log(1);　　</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　　 console.log(2);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;结果打印2，说明前边声明的函数方法被后边所覆盖。</p>\n<h3 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h3><p>综上所述，可以总结为如下几点：</p>\n<p>1.var与let、const的区别在于<strong>变量提升</strong>，以及<strong>变量的唯一性</strong>；<br>2.const与let的区别，<strong>除了变量值不能修改，其他性质一样</strong>；<br>3.function由于其自身的需要，<strong>创建→初始化→赋值三位一体</strong>，在环境最顶端完成；也正因为这种性质，<strong>函数声明的函数可以在任何位置被调用</strong>；<br>4.如果可以，尽量<strong>使用let、const代替var</strong>；</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文仅仅简单罗列了在函数声明及操作方面，var、let、const、function的区别，意在为初学者理清概念偏差，少走弯路，并通过理解学习，早日跨入JS门槛。</p>\n<p><strong>以上，如有错误或是纰漏，欢迎批评指正~</strong></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"引言\"><a href=\"#引言\" class=\"headerlink\" title=\"引言\"></a>引言</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在学习 javascript 的过程中，变量是无时无刻不在使用的。那么相对应的，变量声明方法也如是。变量是由自己决定，但变量声明方法是早已经定义好的。那么在使用变量之前，了解变量声明方法，就变得尤为重要。在 ES6 推出之前，最常用的声明变量方法就是 var。但是由于 var 自身的缺陷，ES6 推出了 let 和 const 替代 var。虽然修正了 var 的缺陷，但不能改变的，是之前已经用 var 写了多少年的项目，这些项目是无法随着 var 的被取代而轻易更改的。所以仍存在着使用 var 的公司和项目，这也使得了解 var、let、const 的区别变得有必要。<br>","more":"</p>\n<h3 id=\"var\"><a href=\"#var\" class=\"headerlink\" title=\"var\"></a>var</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在说明 var 并看代码之前，我们先统一思路，将变量的声明及使用过程分为：<strong>创建 → 初始化 → 赋值 → 修改</strong>四步。</p>\n<blockquote>\n<p><strong>首先，来看 var 的声明及使用：</strong></p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　　/*</span><br><span class=\"line\">   　　预解析，初始化与赋值分离</span><br><span class=\"line\">       var a = undefined // 创建变量a，并初始化为undefined。此时变量已经存在与环境中</span><br><span class=\"line\">   */</span><br><span class=\"line\">        　　</span><br><span class=\"line\">   console.log(a) //undefined</span><br><span class=\"line\"></span><br><span class=\"line\">   var a = 0; //赋值为0</span><br><span class=\"line\">   console.log(a); // 0</span><br><span class=\"line\"></span><br><span class=\"line\">   a = 1; //可以修改变量值</span><br><span class=\"line\">   console.log(a) // 1</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br></pre></td></tr></table></figure>\n<p>以上代码可以看出，var 在它的执行环境中的声明及操作过程为：</p>\n<p><strong>（ 创建 → 初始化 ）→ 赋值 → 修改</strong></p>\n<ol>\n<li>预解析：在环境最顶端，创建变量，并初始化为 undefined—— 变量提升；</li>\n<li>为变量赋值；</li>\n<li>对变量进行操作，可以在后续操作中对变量值进行修改；</li>\n</ol>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过 console.log 的打印结果，我们可以清晰的认识到一点——var 的初始化与赋值是分离的，而且初始化的过程优先于执行环境中的所有操作。这就是为什么在 var 声明赋值前 console.log 变量，会打印出 undefined，而不是报错的原因。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var 声明的初始化先于赋值的现象，就叫做<strong>变量提升</strong>。</p>\n<blockquote>\n<p><strong>然后着重说一下变量提升</strong></p>\n</blockquote>\n<ol>\n<li>if 判断中的变量提升</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　　/*</span><br><span class=\"line\">   　　预解析</span><br><span class=\"line\">      虽然if判断没有执行，但var的变量提升已经发生，此时执行环境中，已经存在变量a，值为undefined；</span><br><span class=\"line\">   */</span><br><span class=\"line\">        　　</span><br><span class=\"line\">   console.log(a) // undefined，变量提升</span><br><span class=\"line\">        　　</span><br><span class=\"line\">   if (false) &#123;</span><br><span class=\"line\">   　　var a = 1;</span><br><span class=\"line\">       console.log(a) //不执行</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   console.log(a); //undefined，变量未赋值</span><br><span class=\"line\"></span><br><span class=\"line\">   a = 1; //注意，此时因为a的变量提升，未加声明符号的赋值，并没有提升到全局环境中</span><br><span class=\"line\">   console.log(a); // 1</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(a); // 报错，因为if中a的变量提升，a = 1的赋值并没有存在与全局中。如果注释掉if判断中的内容，a = 1因为没加变量声明符号，相当于在与全局中声明，那么最后的console.log(a)将打印1</span><br></pre></td></tr></table></figure>\n<p><br><br>2.for循环中的变量提升<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　　/*</span><br><span class=\"line\">   　　预解析</span><br><span class=\"line\">      虽然if判断没有执行，但var的变量提升已经发生，此时执行环境中，已经存在变量a，值为undefined；</span><br><span class=\"line\">   */</span><br><span class=\"line\">        　　　</span><br><span class=\"line\">   console.log(a) // undefined，变量提升</span><br><span class=\"line\">        　　</span><br><span class=\"line\">   console.log(i); //undefined，变量提升</span><br><span class=\"line\">   for (var i = 0;i &lt; 0;i++) &#123;</span><br><span class=\"line\">   　　var a = 1;</span><br><span class=\"line\">      console.log(a) //未执行</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   console.log(i); //1，for中的初始化语句已经执行</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(a); //undefined，变量未赋值</span><br><span class=\"line\"></span><br><span class=\"line\">a = 1;</span><br><span class=\"line\">console.log(a);  </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br><span class=\"line\">console.log(a); //报错，变量不存在</span><br></pre></td></tr></table></figure></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;从上边代码中可以看出，<strong>当var声明存在于if和for循环中时，不管赋值有没有执行，创建及初始化的过程都已经提升到了执行环境中</strong>。</p>\n<blockquote>\n<p><strong>最后说明var的一个缺陷：</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　 var a = 0;</span><br><span class=\"line\">var a = 1;</span><br><span class=\"line\">var a = 2;</span><br><span class=\"line\">  </span><br><span class=\"line\"> console.log(a); // 2</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由以上代码可以看出，var声明一个变量后，可以<strong>无限次的以同一个变量名不断的重复 创建→初始化→赋值</strong>，这跟直接修改变量值的结果是一样的。但是实际操作中不会有人通过这种方式操作变量，而且如果项目很大，很难保证不出现给不同变量声明同一个变量名的情况，很容易出现错误。</p>\n<h3 id=\"let\"><a href=\"#let\" class=\"headerlink\" title=\"let\"></a>let</h3><blockquote>\n<p><strong>首先，来看var的声明及使用：</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function test() &#123;</span><br><span class=\"line\">/_</span><br><span class=\"line\">预解析，没有变量提升，啥也没有。创建、初始化与赋值同时进行</span><br><span class=\"line\">_/</span><br><span class=\"line\">  </span><br><span class=\"line\">　 console.log(a); //报错，变量仍未创建</span><br><span class=\"line\"></span><br><span class=\"line\">    let a = 0; // 创建变量a，初始化并赋值为0.不赋值的话，则为undefined;</span><br><span class=\"line\">    console.log(a); // 0</span><br><span class=\"line\"></span><br><span class=\"line\">    a = 2; // 可以修改变量值</span><br><span class=\"line\">    console.log(a); // 2</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>同样，先分析过程：</p>\n<p><strong>（ 创建→初始化→赋值 ）→修改</strong></p>\n<ol>\n<li>预解析，啥也没有；<del>在环境最顶端，创建变量，并初始化为undefined—— 变量提升；</del></li>\n<li>创建变量、初始化并赋值；</li>\n<li>对变量进行操作，可以在后续操作中对变量值进行修改；</li>\n</ol>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过上方代码，我们可以看出let声明变量时，<strong>（ 创建→初始化→赋值 ）是在一步完成的，不存在变量提升的现象</strong>。所以在let声明前console.log(a)，报错a is not defined，因为此时a还没有被创建。而let初始化前的执行区域就叫做<strong>暂存死区</strong>。</p>\n<blockquote>\n<p><strong>然后，来看let在重复声明时的表现：</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　 let a = 1;</span><br><span class=\"line\">let a = 2;</span><br><span class=\"line\">let a = 3;</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(a); // 报错</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以上说明了let区别于var的另一个特性——<strong>变量的唯一性</strong>。<strong>同一个变量名，不能在let中重复使用</strong>，所以执行上方代码操作的结果，就是报错<strong>Identifier ‘a’ has already been declared</strong>；</p>\n<blockquote>\n<p><strong>最后，let与var最大的区别——块级作用域</strong></p>\n</blockquote>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;首先说明，<strong>块级作用域</strong>的概念——简单理解，<strong>{}一个大括号就是一个代码块，一个单独的执行环境</strong>。那么它理应不受外部影响（如果不是刻意为之的话，它也不应该影响外部环境）。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;但是在let之前，JS中的变量声明是<strong>没有块级作用域</strong>的属性的。这其中最典型的案例，就是<strong>for循环中的var声明i</strong>。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function a() &#123;</span><br><span class=\"line\">　　 for (var i = 1;i &lt; 5;i++) &#123;</span><br><span class=\"line\">　　 console.log(i);</span><br><span class=\"line\">for( var i = 10;i &lt; 20;i++) &#123;</span><br><span class=\"line\">　　 console.log(i);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">a(); //只执行外部循环一次，因为内部循环由于 var 声明的缘故，执行过后 i 值已经为 11，外部循环判断后，将不再执行</span><br><span class=\"line\"></span><br><span class=\"line\">function testA() &#123;</span><br><span class=\"line\">　　/_</span><br><span class=\"line\">　 预解析</span><br><span class=\"line\">创建 i 并赋值为 undefined</span><br><span class=\"line\">注意，此时实际上是两个 i 的变量提升</span><br><span class=\"line\">_/</span><br><span class=\"line\">console.log(i); // undefined</span><br><span class=\"line\"></span><br><span class=\"line\">var i = 0; // 赋值 i = 0</span><br><span class=\"line\">console.log(i); // 0;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">　　 console.log(i); // 0，访问第一个 i</span><br><span class=\"line\">var i = 10 // 赋值 i = 10，覆盖第一个 i</span><br><span class=\"line\">console.log(i); // 10，访问第二个 i</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(i); // 10，访问第二个 i，i 已经被覆盖</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">testA();</span><br></pre></td></tr></table></figure></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以上代码，通过testA函数，侧面解释了一下a函数中的行为原因。这一行为模式，充分暴露了var声明的缺陷。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>然后再来看let声明中的块级作用域：</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function b() &#123;</span><br><span class=\"line\">　　 for (let i = 0;i &lt; 5;i++) &#123;</span><br><span class=\"line\">　　 console.log(i);</span><br><span class=\"line\">for(let i = 10;i &lt; 20;i++) &#123;</span><br><span class=\"line\">　　 console.log(i);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">b(); //因为块级作用域的存在，两个循环的 i 互不影响，所有循环次数都会被执行。实际使用时，建议还是不要都用同一变量名</span><br><span class=\"line\"></span><br><span class=\"line\">function testB() &#123; 　　</span><br><span class=\"line\">/_预解析啥也没有 _/</span><br><span class=\"line\">console.log(i); // 报错，暂存死区</span><br><span class=\"line\"></span><br><span class=\"line\">let i = 0;</span><br><span class=\"line\">// 赋值 i = 0</span><br><span class=\"line\">console.log(i); // 0;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">console.log(i); // 报错，暂存死区，因为块中又声明了变量 i。如果块中没有 let i 的话，则按作用域链向上查找，打印外部 i 值 0</span><br><span class=\"line\">let i = 10 // 赋值 i = 10，不覆盖第一个 i</span><br><span class=\"line\">console.log(i); // 10，访问第二个 i</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(i); // 0，访问第一个 i，两个 i 相互不影响  </span><br><span class=\"line\">&#125;</span><br><span class=\"line\">testB();</span><br></pre></td></tr></table></figure></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以上代码，通过testB函数，侧面解释了一下b函数中的行为原因。这一行为模式，体现了let生命中块级作用域的存在，并暴露出了let与var的最大区别。</p>\n<h3 id=\"const\"><a href=\"#const\" class=\"headerlink\" title=\"const\"></a>const</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　　/_</span><br><span class=\"line\">　　预解析啥也没有，创建、初始化与赋值同时进行</span><br><span class=\"line\">_/</span><br><span class=\"line\">console.log(a); // 报错，变量仍未创建</span><br><span class=\"line\"></span><br><span class=\"line\">const a = &#123;</span><br><span class=\"line\">　　 name: &quot;Lyu&quot; // 创建对象 a，并赋值为一个对象地址</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">console.log(a); //&#123;name: &quot;Lyu&quot;&#125;</span><br><span class=\"line\">console.log(a.name); // Lyu</span><br><span class=\"line\"></span><br><span class=\"line\">a = 1; //报错，常量值不可修改</span><br><span class=\"line\"></span><br><span class=\"line\">a.name = &quot;Jack&quot;;</span><br><span class=\"line\">　　 console.log(a); // &#123;name: &quot;Jack&quot;&#125;</span><br><span class=\"line\">console.log(a.name); // Jack</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br></pre></td></tr></table></figure>\n<p>分析过程：</p>\n<p><strong>（ 创建→初始化→赋值 ）→修改</strong></p>\n<ol>\n<li>预解析，啥也没有；<del>预解析在环境最顶端，创建变量，并初始化为undefined—— 变量提升；</del></li>\n<li>创建变量、初始化并赋值。必须赋值，不赋值会报错；</li>\n<li>对变量进行操作，可以在后续操作中对变量值进行修改，不可以对变量进行修改，但是可以对变量的属性进行修改；</li>\n</ol>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为了说明const的特性，<strong>特意声明了一个对象</strong>。在理解了var和let的过程之后，再来看const的整个过程，会发现<strong>在（ 创建→初始化→赋值 ）的过程中，const和let是没有区别的</strong>。唯一的区别在于<strong>→修改</strong>。如果执行了上方的代码，在<strong>a = 1</strong>那步会报错<strong>Assignment to constant variable</strong>。其中的constant就是const的英文全拼，它的意思的<strong>不变的、恒定的、恒量</strong>。那么从字面上就能理解，通过const声明的变量，<strong>是一个恒定值，即无法更改的值</strong>。所以当通过<strong>a = 1</strong>试图修改a的值时，报错。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;虽然<strong>a本身的值</strong>无法修改，但是a为对象，值为地址，所以<strong>a的属性是可以修改的</strong>。从代码最后一步可以看出。a.name的值成功修改为”Jack”。这就是const 的第二个特性。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;同let一样的，const的第三个特性也是<strong>变量的唯一性</strong>，不再过多阐述。</p>\n<h3 id=\"function\"><a href=\"#function\" class=\"headerlink\" title=\"function\"></a>function</h3><blockquote>\n<p><strong>首先，来看function的声明及使用：</strong>　<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">/_</span><br><span class=\"line\">　　 funtcion test() &#123;...&#125;</span><br><span class=\"line\">预解析，创建、初始化、赋值三位一体</span><br><span class=\"line\">此时函数已经完成变量声明的所有操作，在执行环境的任何位置都可以调用函数  </span><br><span class=\"line\">_/</span><br><span class=\"line\"></span><br><span class=\"line\">test(); //调用函数，只要函数确实存在并可用，那么在执行环境任何位置都可以调用</span><br><span class=\"line\"></span><br><span class=\"line\">function test() &#123;...&#125;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>分析过程：</p>\n<p><strong>（ 创建→初始化→赋值 ）→执行/修改</strong></p>\n<ol>\n<li>预解析，在环境最顶端，创建函数，初始化并赋值为函数定义；</li>\n<li>执行函数，无论函数在何位置，只要可用，就可以调用；</li>\n</ol>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function是专门用于函数声明的方法，由于函数的复杂性，以及利用性。function声明的函数，会在整个环境变量最顶端完成<strong>创建、初始化、赋值三位一体</strong>的操作。这样一来，不管在何处声明了函数，可以在任何地方调用函数方法。这是比较合乎常理的性质。</p>\n<blockquote>\n<p><strong>然后，function同var一样，同样存在变量声明的特性：</strong></p>\n</blockquote>\n<ol>\n<li>if判断中的变量提升<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　　/_</span><br><span class=\"line\">　　预解析</span><br><span class=\"line\">　　虽然 if 判断没有执行，但 function 的变量提升已经发生，此时执行环境中，已经存在变量 a，值为 undefined；</span><br><span class=\"line\">_/</span><br><span class=\"line\">　　</span><br><span class=\"line\">console.log(a) // undefined，变量提升</span><br><span class=\"line\">　　</span><br><span class=\"line\">if (false) &#123;</span><br><span class=\"line\">　　 function a()&#123;&#125;; // 变量提升</span><br><span class=\"line\">console.log(a) //不执行</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(a); //undefined，变量未赋值</span><br><span class=\"line\"></span><br><span class=\"line\">a = 1; //注意，此时因为 a 的变量提升，未加声明符号的赋值，并没有提升到全局环境中</span><br><span class=\"line\">console.log(a); // 1  </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(a); // 报错，因为 if 中 a 的变量提升，a = 1 的赋值并没有存在与全局中。如果注释掉 if 判断中的内容，a = 1 因为没加变量声明符号，相当于在与全局中声明，那么最后的 console.log(a)将打印 1</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p><br></p>\n<ol start=\"2\">\n<li>for循环中的变量提升<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　　/_</span><br><span class=\"line\">　　预解析</span><br><span class=\"line\">虽然 if 判断没有执行，但 function 的变量提升已经发生，此时执行环境中，已经存在变量 a，值为 undefined；</span><br><span class=\"line\">_/</span><br><span class=\"line\">　　　</span><br><span class=\"line\">console.log(a) // undefined，变量提升</span><br><span class=\"line\">　　</span><br><span class=\"line\">console.log(i); //报错，暂存死区</span><br><span class=\"line\">for (let i = 0;i &lt; 0;i++) &#123;</span><br><span class=\"line\">　　 function a() &#123;&#125;; //变量提升</span><br><span class=\"line\">console.log(a) //未执行</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">console.log(i); //报错，let 不存在变量提升</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(a); //undefined，变量未赋值</span><br><span class=\"line\"></span><br><span class=\"line\">a = 1;</span><br><span class=\"line\">console.log(a);  </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">test();</span><br><span class=\"line\">console.log(a); //报错，变量不存在</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<blockquote>\n<p><strong>最后，function同var一样，它也可以对同一变量重复声明，而且后边的函数定义会覆盖前边的函数定义：</strong></p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">test(); // 2</span><br><span class=\"line\"></span><br><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　　 console.log(1);　　</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function test() &#123;</span><br><span class=\"line\">　　 console.log(2);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;结果打印2，说明前边声明的函数方法被后边所覆盖。</p>\n<h3 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h3><p>综上所述，可以总结为如下几点：</p>\n<p>1.var与let、const的区别在于<strong>变量提升</strong>，以及<strong>变量的唯一性</strong>；<br>2.const与let的区别，<strong>除了变量值不能修改，其他性质一样</strong>；<br>3.function由于其自身的需要，<strong>创建→初始化→赋值三位一体</strong>，在环境最顶端完成；也正因为这种性质，<strong>函数声明的函数可以在任何位置被调用</strong>；<br>4.如果可以，尽量<strong>使用let、const代替var</strong>；</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文仅仅简单罗列了在函数声明及操作方面，var、let、const、function的区别，意在为初学者理清概念偏差，少走弯路，并通过理解学习，早日跨入JS门槛。</p>\n<p><strong>以上，如有错误或是纰漏，欢迎批评指正~</strong></p>"},{"title":"深入浅出CSS（一）：line-height与vertical-align的性质","date":"2018-12-26T07:31:17.000Z","_content":"### 引言\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;学会CSS简单，学好CSS太难。CSS带给我的压迫感，甚于JS。虽然大的趋势是将CSS开发平台化，专注于业务逻辑。但是CSS本身可以挖掘的地方其实有很多，而那些趣味性十足（但实用性不大）的demo也确实带给我很多乐趣。所以在决定写《案例分享》系列和《javascript精雕细琢》系列时，《深入浅出CSS》系列我也早就心心念念。本系列会就CSS中一些细节以及奇技淫巧进行分享，志不在提高技术，在提升前端学习乐趣~\n<!--more-->\n> 测试代码\n```\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>vertical与line-height测试</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n        }\n        div {\n            border: 1px solid #000;\n            width:300px;\n            height: 200px;\n            line-height: 200px;\n            text-align: center;\n        }\n        p {\n            display: inline-block;\n            vertical-align: middle;\n        img {\n            vertical-align: middle;\n            border: 1px solid #000;\n        }\n    </style>\n</head>\n<body>\n    <div>\n        <p class=\"p\">我啊</p>\n        <img src=\"http://mat1.gtimg.com/www/qq2018/imgs/qq_logo_2018x2.png\" alt=\"图片加载失败\">\n    </div>\n</body>\n</html>\n```\n### line-height的性质\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line-height在CSS中的定义为行高，具体计算方法如图所示：\n![](https://upload-images.jianshu.io/upload_images/4473919-4b730589164c4674.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由图中可以看出，在**不设置元素高度以及padding、border、margin均为0的情况下，元素本身的高度就是它的line-height值**，而文本与文本之间的间隙就是**(line-height - font-size)**。所以此时通过**设置line-height值，就等于在设置元素高度**（元素高度不固定且padding、border、margin不为0时，高度由padding、border、margin及行高共同控制）。\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;那么，在了解了line-height对元素高度的控制原理之后，就不难理解文本元素垂直居中的原理，令height=line-height，或者不设置height（默认line-height），都是通过让height = (line-height - font-size)/2 + font-size +  (line-height - font-size)/2，然后文本居中显示。如果在一个<div>中嵌套一个<p>分别把p元素display: inline-block、display:line，则为下图展示的原理：\n1. display：block(默认);\n![](https://upload-images.jianshu.io/upload_images/4473919-5076fd7a90089ebb.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n**p元素与div元素等高且等宽**\n\n2. display：inline-block;\n![](https://upload-images.jianshu.io/upload_images/4473919-48ec99a87de6f270.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n**p元素与div元素等高，与内容等宽**\n\n3. display:：inline;\n![](https://upload-images.jianshu.io/upload_images/4473919-9943a469c184d386.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n**p元素与内容等高且等宽**\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上面三张图片，分别展示了p在三种元素类型下的不同表现形式，从中可以理解inline-block的工作机理（子元素继承），实际上是**通过控制高度，使内容（inline）居中，而不是元素本身居中**。那么试想一下，如果在p元素前插入一段纯文本，或者P元素是多行文本，那么div中显示情况又会如何？图中的div的height是固定的100px，那如果不设置height的值，又会如何显示？？请各位自己动手进行验证~\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;另外，**从第一张及第二张图中还可以看出一个小问题，p元素的边框溢出了div的盒子**。通过父元素div设置固定值height与不设置固定值时，确定子元素p的height与父元素div的height的计算关系。希望各位同仁能够找到自己的答案~\n\n### vertical-align的性质\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertical-align从字面上理解就是垂直排列，这货有一大堆属性可写。不要觉得这货平常不怎么用，实际上它无处不在。因为浏览器默认设置中，inline与inline-block的对齐方式，就是baseline基线对齐，想要理解各种属性的对齐方式，我们先看一下各种属性的意义，如图所示：\n![](https://upload-images.jianshu.io/upload_images/4473919-e21ae5c85d2bfcd5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这个图实在是难画，从水印也可以看出来，我是直接从网上粘过来的，如有雷同，我选择删除（哈哈，skr）\n1. vertical-align各种属性：\n　　　　　　vertical-align: baseline;\n　　　　　　vertical-align: sub;\n　　　　　　vertical-align: super;\n　　　　　　vertical-align: text-top;\n　　　　　　vertical-align: text-bottom;\n　　　　　　vertical-align: middle;\n　　　　　　vertical-align: top;\n　　　　　　vertical-align: bottom;\n\n2. vertical-align对齐方式：\n  1）浏览器默认baseline对齐；\n  2）设置了middle/baseline的情况下，元素自身middle/baseline会和行内其他元素的baseline对齐（一个inline-block元素，如果里面没有inline内联元素，或者overflow不是visible，则该元素的基线就是其margin底边缘，否则，其基线就是元素里面最后一行内联元素的基线——**摘自张鑫旭《CSS深入理解vertical-align和line-height的基友关系》**）；\n3）设置了top/bottm情况下，自己的top/bottom会和行内其余元素中最高的top/最低的bottom对齐；\n　　\n3. 其余补充：　　　　 \n1）verti-align只可用于inline或inline-block；　　　　\n2）vertical-align必须在目标元素中声明，对其他元素不产生影响；\n3）vertical-align如果设置%属性的话，以line-height值为计算基数；\n4）vertical-align默认属性为baseline；\n\n### line-height与vertical-align的搭配使用，元素垂直居中\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在第一部分最后我说到了，通过line-height达到的居中效果，实际上是子元素继承了父元素的height与line-height设置，**本质上是内容的居中，而非元素本身的居中**。试想一下，如果div中嵌入的是img而非p元素，如何在一个height设置了固定值的div中，将img垂直居中显示？？（这里的固定值，包括从父元素按%计算而来的固定值。未设置固定高度值的，高度以内容为准，可通过padding-top/bottom或line-height设置居中）\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这就涉及到了line-height与vertical-align的配合使用。\n\n在实际操作前，首先回忆一下刚才的内容：\n1. line-height通过控制元素高度与其内容字体高度的差值均分，实现垂直居中；\n2. vertical-align默认baseline对齐；\n3. vertical-align在目标元素中声明，且目标元素一定是inline或inline-block属性的元素；\n\nDuang~准备就绪。现在开始说明操作过程，同样以图片直观的展现：\n1. 当给div一个**固定的height值**，在**不设置line-height及vertical-align**时，由于设置了* {margin: 0;padding: 0;}，图片是紧贴顶端的。\n![](https://upload-images.jianshu.io/upload_images/4473919-eb159024457c5674.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n2. 让我们来加一段文字，让理解更直观。此时，我们就能看到**vertical-align的默认属性baseline对齐**。**图片由于不是文字，它的基线就是它的margin底（此图中margin为0），即border-bottom**。\n![](https://upload-images.jianshu.io/upload_images/4473919-47656f4e246628ce.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n3. 下面让我们给img属性增加**vertical-align: middle;**，可以看出文本与图片**似乎居中对齐了**，但是文本呢，有一点emmmmmm，不那么居中！因为**图片是以自身的middle line与文本的baseline对齐的**。所以实际的中点要在对齐线的上方（详情上翻至vertical-align的对齐方式）。\n![](https://upload-images.jianshu.io/upload_images/4473919-dacf683641c4d742.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n4. 设置div的line-height = height值，去除文字的border（防止子元素p继承父元素div的高度后，增加border溢出）。此时文本垂直居中显示，按照上一步的解释，不难看出，图片因为与文本并不是真正的居中对齐，所以实际上它在div中并没有真正的垂直居中。\n![](https://upload-images.jianshu.io/upload_images/4473919-4115996dba610e9b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n5. 解决方案\n1）那么怎么才能让图片真正的垂直居中呢？脑子转的快的朋友肯定已经想到了，可以把**p元素也声明vertical-align: middle;**啊。这确实是个好方法，但是！如果文本设置了vertical-align后，它自身也并不是垂直居中了的话，那这种方法就不成立了。而且很不幸的是，情况就是这样（控制台可查看p元素高度，已经溢出div盒子）。那么为什么会出现这种情况呢。那就要我们回想一下，如果**行内只有一个p元素或者一个img元素的话，它又是跟谁对齐的**？\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;要理解行内元素对齐，这里就必须提出一个假设，**假设block元素内，存在一个empty元素**。**在block元素内只嵌套了一个inline或inline-block元素时，作为规则的参照物**。而且empty元素虽然看不见，但要**假设它里边有一个继承自父元素font-size的文本**，**这样它才具有正常的baseline、middle line及top、bottom等**。理解了这一假设，就不难理解为什么p元素设置vertical-align: middle;后，图片仍然不是垂直居中。因为**p元素中线与empty元素的基线对齐了**。\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;那么有的朋友又会提出问题了，既然图片与文本的基线对齐，文本下移了，图片为什么没有跟着文本的基线一起下移呢？那是因为**基线始终都只有一条，那就是empty元素的基线**。这也就解释了，**为什么p元素设置了vertical-align: middle;后，只有p元素下移，而img元素纹丝不动**。因为**p元素与empty元素由baseline对齐baseline变为了middle line对齐baseline，造成了下移，而img元素始终都与empty元素对齐，所以纹丝不动**。\n2）俗话说柳暗花明又一村，一条路走不通，必然有另一条路。既然改变p元素的vertical-align行不通，那就尝试其他方法，比如**改变基线的位置**。\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这就需要另一个属性**font-size**，既然**基线由行内empty元素的字体大小决定**，那如果我把**font-size设置成0**，那不是**所有线全都汇聚成了一条**，那么**文字的居中显示，不就变成了这条汇聚线的居中显示？这样的话，跟基线对齐岂不是就成了居中对齐**？简直美滋滋~\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这样又有朋友说了，这样**文字就消失不见了**，一个问题解决了，又出来个新问题，这什么时候是个头啊？？？别急，这个方法简单，那就是**给p元素，单独加一个font-size声明**，这样的话，p元素的内容就出来。我们的目的只是改变empty元素的继承自父元素div的字体大小，完美解决~\n![](https://upload-images.jianshu.io/upload_images/4473919-5cf3e3ccb5042429.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n### 结语\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;至此，line-height与vertical-align的性质及组合用法就介绍完毕，本文**主要参考了张鑫旭大神的《CSS深入理解vertical-align和line-height的基友关系》**，如有雷同，不用怀疑，就是受了他的启发~\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;文中若有错误及不妥之处，欢迎指正~\n\n\n","source":"_posts/深入浅出CSS（一）：line-height与vertical-align的性质.md","raw":"---\ntitle: 深入浅出CSS（一）：line-height与vertical-align的性质\ndate: 2018-12-26 15:31:17\ncategories: \n  - 前端\n  - CSS\ntags: \n  - CSS\n---\n### 引言\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;学会CSS简单，学好CSS太难。CSS带给我的压迫感，甚于JS。虽然大的趋势是将CSS开发平台化，专注于业务逻辑。但是CSS本身可以挖掘的地方其实有很多，而那些趣味性十足（但实用性不大）的demo也确实带给我很多乐趣。所以在决定写《案例分享》系列和《javascript精雕细琢》系列时，《深入浅出CSS》系列我也早就心心念念。本系列会就CSS中一些细节以及奇技淫巧进行分享，志不在提高技术，在提升前端学习乐趣~\n<!--more-->\n> 测试代码\n```\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>vertical与line-height测试</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n        }\n        div {\n            border: 1px solid #000;\n            width:300px;\n            height: 200px;\n            line-height: 200px;\n            text-align: center;\n        }\n        p {\n            display: inline-block;\n            vertical-align: middle;\n        img {\n            vertical-align: middle;\n            border: 1px solid #000;\n        }\n    </style>\n</head>\n<body>\n    <div>\n        <p class=\"p\">我啊</p>\n        <img src=\"http://mat1.gtimg.com/www/qq2018/imgs/qq_logo_2018x2.png\" alt=\"图片加载失败\">\n    </div>\n</body>\n</html>\n```\n### line-height的性质\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line-height在CSS中的定义为行高，具体计算方法如图所示：\n![](https://upload-images.jianshu.io/upload_images/4473919-4b730589164c4674.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由图中可以看出，在**不设置元素高度以及padding、border、margin均为0的情况下，元素本身的高度就是它的line-height值**，而文本与文本之间的间隙就是**(line-height - font-size)**。所以此时通过**设置line-height值，就等于在设置元素高度**（元素高度不固定且padding、border、margin不为0时，高度由padding、border、margin及行高共同控制）。\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;那么，在了解了line-height对元素高度的控制原理之后，就不难理解文本元素垂直居中的原理，令height=line-height，或者不设置height（默认line-height），都是通过让height = (line-height - font-size)/2 + font-size +  (line-height - font-size)/2，然后文本居中显示。如果在一个<div>中嵌套一个<p>分别把p元素display: inline-block、display:line，则为下图展示的原理：\n1. display：block(默认);\n![](https://upload-images.jianshu.io/upload_images/4473919-5076fd7a90089ebb.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n**p元素与div元素等高且等宽**\n\n2. display：inline-block;\n![](https://upload-images.jianshu.io/upload_images/4473919-48ec99a87de6f270.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n**p元素与div元素等高，与内容等宽**\n\n3. display:：inline;\n![](https://upload-images.jianshu.io/upload_images/4473919-9943a469c184d386.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n**p元素与内容等高且等宽**\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上面三张图片，分别展示了p在三种元素类型下的不同表现形式，从中可以理解inline-block的工作机理（子元素继承），实际上是**通过控制高度，使内容（inline）居中，而不是元素本身居中**。那么试想一下，如果在p元素前插入一段纯文本，或者P元素是多行文本，那么div中显示情况又会如何？图中的div的height是固定的100px，那如果不设置height的值，又会如何显示？？请各位自己动手进行验证~\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;另外，**从第一张及第二张图中还可以看出一个小问题，p元素的边框溢出了div的盒子**。通过父元素div设置固定值height与不设置固定值时，确定子元素p的height与父元素div的height的计算关系。希望各位同仁能够找到自己的答案~\n\n### vertical-align的性质\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertical-align从字面上理解就是垂直排列，这货有一大堆属性可写。不要觉得这货平常不怎么用，实际上它无处不在。因为浏览器默认设置中，inline与inline-block的对齐方式，就是baseline基线对齐，想要理解各种属性的对齐方式，我们先看一下各种属性的意义，如图所示：\n![](https://upload-images.jianshu.io/upload_images/4473919-e21ae5c85d2bfcd5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这个图实在是难画，从水印也可以看出来，我是直接从网上粘过来的，如有雷同，我选择删除（哈哈，skr）\n1. vertical-align各种属性：\n　　　　　　vertical-align: baseline;\n　　　　　　vertical-align: sub;\n　　　　　　vertical-align: super;\n　　　　　　vertical-align: text-top;\n　　　　　　vertical-align: text-bottom;\n　　　　　　vertical-align: middle;\n　　　　　　vertical-align: top;\n　　　　　　vertical-align: bottom;\n\n2. vertical-align对齐方式：\n  1）浏览器默认baseline对齐；\n  2）设置了middle/baseline的情况下，元素自身middle/baseline会和行内其他元素的baseline对齐（一个inline-block元素，如果里面没有inline内联元素，或者overflow不是visible，则该元素的基线就是其margin底边缘，否则，其基线就是元素里面最后一行内联元素的基线——**摘自张鑫旭《CSS深入理解vertical-align和line-height的基友关系》**）；\n3）设置了top/bottm情况下，自己的top/bottom会和行内其余元素中最高的top/最低的bottom对齐；\n　　\n3. 其余补充：　　　　 \n1）verti-align只可用于inline或inline-block；　　　　\n2）vertical-align必须在目标元素中声明，对其他元素不产生影响；\n3）vertical-align如果设置%属性的话，以line-height值为计算基数；\n4）vertical-align默认属性为baseline；\n\n### line-height与vertical-align的搭配使用，元素垂直居中\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在第一部分最后我说到了，通过line-height达到的居中效果，实际上是子元素继承了父元素的height与line-height设置，**本质上是内容的居中，而非元素本身的居中**。试想一下，如果div中嵌入的是img而非p元素，如何在一个height设置了固定值的div中，将img垂直居中显示？？（这里的固定值，包括从父元素按%计算而来的固定值。未设置固定高度值的，高度以内容为准，可通过padding-top/bottom或line-height设置居中）\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这就涉及到了line-height与vertical-align的配合使用。\n\n在实际操作前，首先回忆一下刚才的内容：\n1. line-height通过控制元素高度与其内容字体高度的差值均分，实现垂直居中；\n2. vertical-align默认baseline对齐；\n3. vertical-align在目标元素中声明，且目标元素一定是inline或inline-block属性的元素；\n\nDuang~准备就绪。现在开始说明操作过程，同样以图片直观的展现：\n1. 当给div一个**固定的height值**，在**不设置line-height及vertical-align**时，由于设置了* {margin: 0;padding: 0;}，图片是紧贴顶端的。\n![](https://upload-images.jianshu.io/upload_images/4473919-eb159024457c5674.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n2. 让我们来加一段文字，让理解更直观。此时，我们就能看到**vertical-align的默认属性baseline对齐**。**图片由于不是文字，它的基线就是它的margin底（此图中margin为0），即border-bottom**。\n![](https://upload-images.jianshu.io/upload_images/4473919-47656f4e246628ce.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n3. 下面让我们给img属性增加**vertical-align: middle;**，可以看出文本与图片**似乎居中对齐了**，但是文本呢，有一点emmmmmm，不那么居中！因为**图片是以自身的middle line与文本的baseline对齐的**。所以实际的中点要在对齐线的上方（详情上翻至vertical-align的对齐方式）。\n![](https://upload-images.jianshu.io/upload_images/4473919-dacf683641c4d742.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n4. 设置div的line-height = height值，去除文字的border（防止子元素p继承父元素div的高度后，增加border溢出）。此时文本垂直居中显示，按照上一步的解释，不难看出，图片因为与文本并不是真正的居中对齐，所以实际上它在div中并没有真正的垂直居中。\n![](https://upload-images.jianshu.io/upload_images/4473919-4115996dba610e9b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n5. 解决方案\n1）那么怎么才能让图片真正的垂直居中呢？脑子转的快的朋友肯定已经想到了，可以把**p元素也声明vertical-align: middle;**啊。这确实是个好方法，但是！如果文本设置了vertical-align后，它自身也并不是垂直居中了的话，那这种方法就不成立了。而且很不幸的是，情况就是这样（控制台可查看p元素高度，已经溢出div盒子）。那么为什么会出现这种情况呢。那就要我们回想一下，如果**行内只有一个p元素或者一个img元素的话，它又是跟谁对齐的**？\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;要理解行内元素对齐，这里就必须提出一个假设，**假设block元素内，存在一个empty元素**。**在block元素内只嵌套了一个inline或inline-block元素时，作为规则的参照物**。而且empty元素虽然看不见，但要**假设它里边有一个继承自父元素font-size的文本**，**这样它才具有正常的baseline、middle line及top、bottom等**。理解了这一假设，就不难理解为什么p元素设置vertical-align: middle;后，图片仍然不是垂直居中。因为**p元素中线与empty元素的基线对齐了**。\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;那么有的朋友又会提出问题了，既然图片与文本的基线对齐，文本下移了，图片为什么没有跟着文本的基线一起下移呢？那是因为**基线始终都只有一条，那就是empty元素的基线**。这也就解释了，**为什么p元素设置了vertical-align: middle;后，只有p元素下移，而img元素纹丝不动**。因为**p元素与empty元素由baseline对齐baseline变为了middle line对齐baseline，造成了下移，而img元素始终都与empty元素对齐，所以纹丝不动**。\n2）俗话说柳暗花明又一村，一条路走不通，必然有另一条路。既然改变p元素的vertical-align行不通，那就尝试其他方法，比如**改变基线的位置**。\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这就需要另一个属性**font-size**，既然**基线由行内empty元素的字体大小决定**，那如果我把**font-size设置成0**，那不是**所有线全都汇聚成了一条**，那么**文字的居中显示，不就变成了这条汇聚线的居中显示？这样的话，跟基线对齐岂不是就成了居中对齐**？简直美滋滋~\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这样又有朋友说了，这样**文字就消失不见了**，一个问题解决了，又出来个新问题，这什么时候是个头啊？？？别急，这个方法简单，那就是**给p元素，单独加一个font-size声明**，这样的话，p元素的内容就出来。我们的目的只是改变empty元素的继承自父元素div的字体大小，完美解决~\n![](https://upload-images.jianshu.io/upload_images/4473919-5cf3e3ccb5042429.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n### 结语\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;至此，line-height与vertical-align的性质及组合用法就介绍完毕，本文**主要参考了张鑫旭大神的《CSS深入理解vertical-align和line-height的基友关系》**，如有雷同，不用怀疑，就是受了他的启发~\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;文中若有错误及不妥之处，欢迎指正~\n\n\n","slug":"深入浅出CSS（一）：line-height与vertical-align的性质","published":1,"updated":"2018-12-26T08:01:25.713Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjq80g9rw000bw4vux3prf2j7","content":"<h3 id=\"引言\"><a href=\"#引言\" class=\"headerlink\" title=\"引言\"></a>引言</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;学会CSS简单，学好CSS太难。CSS带给我的压迫感，甚于JS。虽然大的趋势是将CSS开发平台化，专注于业务逻辑。但是CSS本身可以挖掘的地方其实有很多，而那些趣味性十足（但实用性不大）的demo也确实带给我很多乐趣。所以在决定写《案例分享》系列和《javascript精雕细琢》系列时，《深入浅出CSS》系列我也早就心心念念。本系列会就CSS中一些细节以及奇技淫巧进行分享，志不在提高技术，在提升前端学习乐趣~<br><a id=\"more\"></a></p>\n<blockquote>\n<p>测试代码<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=&quot;en&quot;&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">    &lt;title&gt;vertical与line-height测试&lt;/title&gt;</span><br><span class=\"line\">    &lt;style&gt;</span><br><span class=\"line\">        * &#123;</span><br><span class=\"line\">            margin: 0;</span><br><span class=\"line\">            padding: 0;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        div &#123;</span><br><span class=\"line\">            border: 1px solid #000;</span><br><span class=\"line\">            width:300px;</span><br><span class=\"line\">            height: 200px;</span><br><span class=\"line\">            line-height: 200px;</span><br><span class=\"line\">            text-align: center;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        p &#123;</span><br><span class=\"line\">            display: inline-block;</span><br><span class=\"line\">            vertical-align: middle;</span><br><span class=\"line\">        img &#123;</span><br><span class=\"line\">            vertical-align: middle;</span><br><span class=\"line\">            border: 1px solid #000;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &lt;/style&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">        &lt;p class=&quot;p&quot;&gt;我啊&lt;/p&gt;</span><br><span class=\"line\">        &lt;img src=&quot;http://mat1.gtimg.com/www/qq2018/imgs/qq_logo_2018x2.png&quot; alt=&quot;图片加载失败&quot;&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<h3 id=\"line-height的性质\"><a href=\"#line-height的性质\" class=\"headerlink\" title=\"line-height的性质\"></a>line-height的性质</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line-height在CSS中的定义为行高，具体计算方法如图所示：<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-4b730589164c4674.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由图中可以看出，在<strong>不设置元素高度以及padding、border、margin均为0的情况下，元素本身的高度就是它的line-height值</strong>，而文本与文本之间的间隙就是<strong>(line-height - font-size)</strong>。所以此时通过<strong>设置line-height值，就等于在设置元素高度</strong>（元素高度不固定且padding、border、margin不为0时，高度由padding、border、margin及行高共同控制）。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;那么，在了解了line-height对元素高度的控制原理之后，就不难理解文本元素垂直居中的原理，令height=line-height，或者不设置height（默认line-height），都是通过让height = (line-height - font-size)/2 + font-size +  (line-height - font-size)/2，然后文本居中显示。如果在一个<div>中嵌套一个<p>分别把p元素display: inline-block、display:line，则为下图展示的原理：</p>\n<ol>\n<li><p>display：block(默认);<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-5076fd7a90089ebb.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"><br><strong>p元素与div元素等高且等宽</strong></p>\n</li>\n<li><p>display：inline-block;<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-48ec99a87de6f270.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"><br><strong>p元素与div元素等高，与内容等宽</strong></p>\n</li>\n<li><p>display:：inline;<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-9943a469c184d386.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"><br><strong>p元素与内容等高且等宽</strong></p>\n</li>\n</ol>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上面三张图片，分别展示了p在三种元素类型下的不同表现形式，从中可以理解inline-block的工作机理（子元素继承），实际上是<strong>通过控制高度，使内容（inline）居中，而不是元素本身居中</strong>。那么试想一下，如果在p元素前插入一段纯文本，或者P元素是多行文本，那么div中显示情况又会如何？图中的div的height是固定的100px，那如果不设置height的值，又会如何显示？？请各位自己动手进行验证~<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;另外，<strong>从第一张及第二张图中还可以看出一个小问题，p元素的边框溢出了div的盒子</strong>。通过父元素div设置固定值height与不设置固定值时，确定子元素p的height与父元素div的height的计算关系。希望各位同仁能够找到自己的答案~</p>\n<h3 id=\"vertical-align的性质\"><a href=\"#vertical-align的性质\" class=\"headerlink\" title=\"vertical-align的性质\"></a>vertical-align的性质</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertical-align从字面上理解就是垂直排列，这货有一大堆属性可写。不要觉得这货平常不怎么用，实际上它无处不在。因为浏览器默认设置中，inline与inline-block的对齐方式，就是baseline基线对齐，想要理解各种属性的对齐方式，我们先看一下各种属性的意义，如图所示：<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-e21ae5c85d2bfcd5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这个图实在是难画，从水印也可以看出来，我是直接从网上粘过来的，如有雷同，我选择删除（哈哈，skr）</p>\n<ol>\n<li><p>vertical-align各种属性：<br>　　　　　　vertical-align: baseline;<br>　　　　　　vertical-align: sub;<br>　　　　　　vertical-align: super;<br>　　　　　　vertical-align: text-top;<br>　　　　　　vertical-align: text-bottom;<br>　　　　　　vertical-align: middle;<br>　　　　　　vertical-align: top;<br>　　　　　　vertical-align: bottom;</p>\n</li>\n<li><p>vertical-align对齐方式：<br>1）浏览器默认baseline对齐；<br>2）设置了middle/baseline的情况下，元素自身middle/baseline会和行内其他元素的baseline对齐（一个inline-block元素，如果里面没有inline内联元素，或者overflow不是visible，则该元素的基线就是其margin底边缘，否则，其基线就是元素里面最后一行内联元素的基线——<strong>摘自张鑫旭《CSS深入理解vertical-align和line-height的基友关系》</strong>）；<br>3）设置了top/bottm情况下，自己的top/bottom会和行内其余元素中最高的top/最低的bottom对齐；\n　　</p>\n</li>\n<li>其余补充：　　　　<br>1）verti-align只可用于inline或inline-block；　　　　<br>2）vertical-align必须在目标元素中声明，对其他元素不产生影响；<br>3）vertical-align如果设置%属性的话，以line-height值为计算基数；<br>4）vertical-align默认属性为baseline；</li>\n</ol>\n<h3 id=\"line-height与vertical-align的搭配使用，元素垂直居中\"><a href=\"#line-height与vertical-align的搭配使用，元素垂直居中\" class=\"headerlink\" title=\"line-height与vertical-align的搭配使用，元素垂直居中\"></a>line-height与vertical-align的搭配使用，元素垂直居中</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在第一部分最后我说到了，通过line-height达到的居中效果，实际上是子元素继承了父元素的height与line-height设置，<strong>本质上是内容的居中，而非元素本身的居中</strong>。试想一下，如果div中嵌入的是img而非p元素，如何在一个height设置了固定值的div中，将img垂直居中显示？？（这里的固定值，包括从父元素按%计算而来的固定值。未设置固定高度值的，高度以内容为准，可通过padding-top/bottom或line-height设置居中）<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这就涉及到了line-height与vertical-align的配合使用。</p>\n<p>在实际操作前，首先回忆一下刚才的内容：</p>\n<ol>\n<li>line-height通过控制元素高度与其内容字体高度的差值均分，实现垂直居中；</li>\n<li>vertical-align默认baseline对齐；</li>\n<li>vertical-align在目标元素中声明，且目标元素一定是inline或inline-block属性的元素；</li>\n</ol>\n<p>Duang~准备就绪。现在开始说明操作过程，同样以图片直观的展现：</p>\n<ol>\n<li><p>当给div一个<strong>固定的height值</strong>，在<strong>不设置line-height及vertical-align</strong>时，由于设置了* {margin: 0;padding: 0;}，图片是紧贴顶端的。<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-eb159024457c5674.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"></p>\n</li>\n<li><p>让我们来加一段文字，让理解更直观。此时，我们就能看到<strong>vertical-align的默认属性baseline对齐</strong>。<strong>图片由于不是文字，它的基线就是它的margin底（此图中margin为0），即border-bottom</strong>。<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-47656f4e246628ce.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"></p>\n</li>\n<li><p>下面让我们给img属性增加<strong>vertical-align: middle;</strong>，可以看出文本与图片<strong>似乎居中对齐了</strong>，但是文本呢，有一点emmmmmm，不那么居中！因为<strong>图片是以自身的middle line与文本的baseline对齐的</strong>。所以实际的中点要在对齐线的上方（详情上翻至vertical-align的对齐方式）。<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-dacf683641c4d742.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"></p>\n</li>\n<li><p>设置div的line-height = height值，去除文字的border（防止子元素p继承父元素div的高度后，增加border溢出）。此时文本垂直居中显示，按照上一步的解释，不难看出，图片因为与文本并不是真正的居中对齐，所以实际上它在div中并没有真正的垂直居中。<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-4115996dba610e9b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"></p>\n</li>\n<li><p>解决方案<br>1）那么怎么才能让图片真正的垂直居中呢？脑子转的快的朋友肯定已经想到了，可以把<strong>p元素也声明vertical-align: middle;</strong>啊。这确实是个好方法，但是！如果文本设置了vertical-align后，它自身也并不是垂直居中了的话，那这种方法就不成立了。而且很不幸的是，情况就是这样（控制台可查看p元素高度，已经溢出div盒子）。那么为什么会出现这种情况呢。那就要我们回想一下，如果<strong>行内只有一个p元素或者一个img元素的话，它又是跟谁对齐的</strong>？<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;要理解行内元素对齐，这里就必须提出一个假设，<strong>假设block元素内，存在一个empty元素</strong>。<strong>在block元素内只嵌套了一个inline或inline-block元素时，作为规则的参照物</strong>。而且empty元素虽然看不见，但要<strong>假设它里边有一个继承自父元素font-size的文本</strong>，<strong>这样它才具有正常的baseline、middle line及top、bottom等</strong>。理解了这一假设，就不难理解为什么p元素设置vertical-align: middle;后，图片仍然不是垂直居中。因为<strong>p元素中线与empty元素的基线对齐了</strong>。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;那么有的朋友又会提出问题了，既然图片与文本的基线对齐，文本下移了，图片为什么没有跟着文本的基线一起下移呢？那是因为<strong>基线始终都只有一条，那就是empty元素的基线</strong>。这也就解释了，<strong>为什么p元素设置了vertical-align: middle;后，只有p元素下移，而img元素纹丝不动</strong>。因为<strong>p元素与empty元素由baseline对齐baseline变为了middle line对齐baseline，造成了下移，而img元素始终都与empty元素对齐，所以纹丝不动</strong>。<br>2）俗话说柳暗花明又一村，一条路走不通，必然有另一条路。既然改变p元素的vertical-align行不通，那就尝试其他方法，比如<strong>改变基线的位置</strong>。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这就需要另一个属性<strong>font-size</strong>，既然<strong>基线由行内empty元素的字体大小决定</strong>，那如果我把<strong>font-size设置成0</strong>，那不是<strong>所有线全都汇聚成了一条</strong>，那么<strong>文字的居中显示，不就变成了这条汇聚线的居中显示？这样的话，跟基线对齐岂不是就成了居中对齐</strong>？简直美滋滋~<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这样又有朋友说了，这样<strong>文字就消失不见了</strong>，一个问题解决了，又出来个新问题，这什么时候是个头啊？？？别急，这个方法简单，那就是<strong>给p元素，单独加一个font-size声明</strong>，这样的话，p元素的内容就出来。我们的目的只是改变empty元素的继承自父元素div的字体大小，完美解决~<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-5cf3e3ccb5042429.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"></p>\n</li>\n</ol>\n<h3 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;至此，line-height与vertical-align的性质及组合用法就介绍完毕，本文<strong>主要参考了张鑫旭大神的《CSS深入理解vertical-align和line-height的基友关系》</strong>，如有雷同，不用怀疑，就是受了他的启发~<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;文中若有错误及不妥之处，欢迎指正~</p>\n</div></p>","site":{"data":{}},"excerpt":"<h3 id=\"引言\"><a href=\"#引言\" class=\"headerlink\" title=\"引言\"></a>引言</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;学会CSS简单，学好CSS太难。CSS带给我的压迫感，甚于JS。虽然大的趋势是将CSS开发平台化，专注于业务逻辑。但是CSS本身可以挖掘的地方其实有很多，而那些趣味性十足（但实用性不大）的demo也确实带给我很多乐趣。所以在决定写《案例分享》系列和《javascript精雕细琢》系列时，《深入浅出CSS》系列我也早就心心念念。本系列会就CSS中一些细节以及奇技淫巧进行分享，志不在提高技术，在提升前端学习乐趣~<br>","more":"</p>\n<blockquote>\n<p>测试代码<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=&quot;en&quot;&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">    &lt;title&gt;vertical与line-height测试&lt;/title&gt;</span><br><span class=\"line\">    &lt;style&gt;</span><br><span class=\"line\">        * &#123;</span><br><span class=\"line\">            margin: 0;</span><br><span class=\"line\">            padding: 0;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        div &#123;</span><br><span class=\"line\">            border: 1px solid #000;</span><br><span class=\"line\">            width:300px;</span><br><span class=\"line\">            height: 200px;</span><br><span class=\"line\">            line-height: 200px;</span><br><span class=\"line\">            text-align: center;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        p &#123;</span><br><span class=\"line\">            display: inline-block;</span><br><span class=\"line\">            vertical-align: middle;</span><br><span class=\"line\">        img &#123;</span><br><span class=\"line\">            vertical-align: middle;</span><br><span class=\"line\">            border: 1px solid #000;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &lt;/style&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">        &lt;p class=&quot;p&quot;&gt;我啊&lt;/p&gt;</span><br><span class=\"line\">        &lt;img src=&quot;http://mat1.gtimg.com/www/qq2018/imgs/qq_logo_2018x2.png&quot; alt=&quot;图片加载失败&quot;&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<h3 id=\"line-height的性质\"><a href=\"#line-height的性质\" class=\"headerlink\" title=\"line-height的性质\"></a>line-height的性质</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line-height在CSS中的定义为行高，具体计算方法如图所示：<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-4b730589164c4674.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由图中可以看出，在<strong>不设置元素高度以及padding、border、margin均为0的情况下，元素本身的高度就是它的line-height值</strong>，而文本与文本之间的间隙就是<strong>(line-height - font-size)</strong>。所以此时通过<strong>设置line-height值，就等于在设置元素高度</strong>（元素高度不固定且padding、border、margin不为0时，高度由padding、border、margin及行高共同控制）。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;那么，在了解了line-height对元素高度的控制原理之后，就不难理解文本元素垂直居中的原理，令height=line-height，或者不设置height（默认line-height），都是通过让height = (line-height - font-size)/2 + font-size +  (line-height - font-size)/2，然后文本居中显示。如果在一个<div>中嵌套一个<p>分别把p元素display: inline-block、display:line，则为下图展示的原理：</p>\n<ol>\n<li><p>display：block(默认);<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-5076fd7a90089ebb.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"><br><strong>p元素与div元素等高且等宽</strong></p>\n</li>\n<li><p>display：inline-block;<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-48ec99a87de6f270.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"><br><strong>p元素与div元素等高，与内容等宽</strong></p>\n</li>\n<li><p>display:：inline;<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-9943a469c184d386.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"><br><strong>p元素与内容等高且等宽</strong></p>\n</li>\n</ol>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上面三张图片，分别展示了p在三种元素类型下的不同表现形式，从中可以理解inline-block的工作机理（子元素继承），实际上是<strong>通过控制高度，使内容（inline）居中，而不是元素本身居中</strong>。那么试想一下，如果在p元素前插入一段纯文本，或者P元素是多行文本，那么div中显示情况又会如何？图中的div的height是固定的100px，那如果不设置height的值，又会如何显示？？请各位自己动手进行验证~<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;另外，<strong>从第一张及第二张图中还可以看出一个小问题，p元素的边框溢出了div的盒子</strong>。通过父元素div设置固定值height与不设置固定值时，确定子元素p的height与父元素div的height的计算关系。希望各位同仁能够找到自己的答案~</p>\n<h3 id=\"vertical-align的性质\"><a href=\"#vertical-align的性质\" class=\"headerlink\" title=\"vertical-align的性质\"></a>vertical-align的性质</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertical-align从字面上理解就是垂直排列，这货有一大堆属性可写。不要觉得这货平常不怎么用，实际上它无处不在。因为浏览器默认设置中，inline与inline-block的对齐方式，就是baseline基线对齐，想要理解各种属性的对齐方式，我们先看一下各种属性的意义，如图所示：<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-e21ae5c85d2bfcd5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这个图实在是难画，从水印也可以看出来，我是直接从网上粘过来的，如有雷同，我选择删除（哈哈，skr）</p>\n<ol>\n<li><p>vertical-align各种属性：<br>　　　　　　vertical-align: baseline;<br>　　　　　　vertical-align: sub;<br>　　　　　　vertical-align: super;<br>　　　　　　vertical-align: text-top;<br>　　　　　　vertical-align: text-bottom;<br>　　　　　　vertical-align: middle;<br>　　　　　　vertical-align: top;<br>　　　　　　vertical-align: bottom;</p>\n</li>\n<li><p>vertical-align对齐方式：<br>1）浏览器默认baseline对齐；<br>2）设置了middle/baseline的情况下，元素自身middle/baseline会和行内其他元素的baseline对齐（一个inline-block元素，如果里面没有inline内联元素，或者overflow不是visible，则该元素的基线就是其margin底边缘，否则，其基线就是元素里面最后一行内联元素的基线——<strong>摘自张鑫旭《CSS深入理解vertical-align和line-height的基友关系》</strong>）；<br>3）设置了top/bottm情况下，自己的top/bottom会和行内其余元素中最高的top/最低的bottom对齐；\n　　</p>\n</li>\n<li>其余补充：　　　　<br>1）verti-align只可用于inline或inline-block；　　　　<br>2）vertical-align必须在目标元素中声明，对其他元素不产生影响；<br>3）vertical-align如果设置%属性的话，以line-height值为计算基数；<br>4）vertical-align默认属性为baseline；</li>\n</ol>\n<h3 id=\"line-height与vertical-align的搭配使用，元素垂直居中\"><a href=\"#line-height与vertical-align的搭配使用，元素垂直居中\" class=\"headerlink\" title=\"line-height与vertical-align的搭配使用，元素垂直居中\"></a>line-height与vertical-align的搭配使用，元素垂直居中</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在第一部分最后我说到了，通过line-height达到的居中效果，实际上是子元素继承了父元素的height与line-height设置，<strong>本质上是内容的居中，而非元素本身的居中</strong>。试想一下，如果div中嵌入的是img而非p元素，如何在一个height设置了固定值的div中，将img垂直居中显示？？（这里的固定值，包括从父元素按%计算而来的固定值。未设置固定高度值的，高度以内容为准，可通过padding-top/bottom或line-height设置居中）<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这就涉及到了line-height与vertical-align的配合使用。</p>\n<p>在实际操作前，首先回忆一下刚才的内容：</p>\n<ol>\n<li>line-height通过控制元素高度与其内容字体高度的差值均分，实现垂直居中；</li>\n<li>vertical-align默认baseline对齐；</li>\n<li>vertical-align在目标元素中声明，且目标元素一定是inline或inline-block属性的元素；</li>\n</ol>\n<p>Duang~准备就绪。现在开始说明操作过程，同样以图片直观的展现：</p>\n<ol>\n<li><p>当给div一个<strong>固定的height值</strong>，在<strong>不设置line-height及vertical-align</strong>时，由于设置了* {margin: 0;padding: 0;}，图片是紧贴顶端的。<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-eb159024457c5674.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"></p>\n</li>\n<li><p>让我们来加一段文字，让理解更直观。此时，我们就能看到<strong>vertical-align的默认属性baseline对齐</strong>。<strong>图片由于不是文字，它的基线就是它的margin底（此图中margin为0），即border-bottom</strong>。<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-47656f4e246628ce.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"></p>\n</li>\n<li><p>下面让我们给img属性增加<strong>vertical-align: middle;</strong>，可以看出文本与图片<strong>似乎居中对齐了</strong>，但是文本呢，有一点emmmmmm，不那么居中！因为<strong>图片是以自身的middle line与文本的baseline对齐的</strong>。所以实际的中点要在对齐线的上方（详情上翻至vertical-align的对齐方式）。<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-dacf683641c4d742.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"></p>\n</li>\n<li><p>设置div的line-height = height值，去除文字的border（防止子元素p继承父元素div的高度后，增加border溢出）。此时文本垂直居中显示，按照上一步的解释，不难看出，图片因为与文本并不是真正的居中对齐，所以实际上它在div中并没有真正的垂直居中。<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-4115996dba610e9b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"></p>\n</li>\n<li><p>解决方案<br>1）那么怎么才能让图片真正的垂直居中呢？脑子转的快的朋友肯定已经想到了，可以把<strong>p元素也声明vertical-align: middle;</strong>啊。这确实是个好方法，但是！如果文本设置了vertical-align后，它自身也并不是垂直居中了的话，那这种方法就不成立了。而且很不幸的是，情况就是这样（控制台可查看p元素高度，已经溢出div盒子）。那么为什么会出现这种情况呢。那就要我们回想一下，如果<strong>行内只有一个p元素或者一个img元素的话，它又是跟谁对齐的</strong>？<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;要理解行内元素对齐，这里就必须提出一个假设，<strong>假设block元素内，存在一个empty元素</strong>。<strong>在block元素内只嵌套了一个inline或inline-block元素时，作为规则的参照物</strong>。而且empty元素虽然看不见，但要<strong>假设它里边有一个继承自父元素font-size的文本</strong>，<strong>这样它才具有正常的baseline、middle line及top、bottom等</strong>。理解了这一假设，就不难理解为什么p元素设置vertical-align: middle;后，图片仍然不是垂直居中。因为<strong>p元素中线与empty元素的基线对齐了</strong>。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;那么有的朋友又会提出问题了，既然图片与文本的基线对齐，文本下移了，图片为什么没有跟着文本的基线一起下移呢？那是因为<strong>基线始终都只有一条，那就是empty元素的基线</strong>。这也就解释了，<strong>为什么p元素设置了vertical-align: middle;后，只有p元素下移，而img元素纹丝不动</strong>。因为<strong>p元素与empty元素由baseline对齐baseline变为了middle line对齐baseline，造成了下移，而img元素始终都与empty元素对齐，所以纹丝不动</strong>。<br>2）俗话说柳暗花明又一村，一条路走不通，必然有另一条路。既然改变p元素的vertical-align行不通，那就尝试其他方法，比如<strong>改变基线的位置</strong>。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这就需要另一个属性<strong>font-size</strong>，既然<strong>基线由行内empty元素的字体大小决定</strong>，那如果我把<strong>font-size设置成0</strong>，那不是<strong>所有线全都汇聚成了一条</strong>，那么<strong>文字的居中显示，不就变成了这条汇聚线的居中显示？这样的话，跟基线对齐岂不是就成了居中对齐</strong>？简直美滋滋~<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这样又有朋友说了，这样<strong>文字就消失不见了</strong>，一个问题解决了，又出来个新问题，这什么时候是个头啊？？？别急，这个方法简单，那就是<strong>给p元素，单独加一个font-size声明</strong>，这样的话，p元素的内容就出来。我们的目的只是改变empty元素的继承自父元素div的字体大小，完美解决~<br><img src=\"https://upload-images.jianshu.io/upload_images/4473919-5cf3e3ccb5042429.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"\"></p>\n</li>\n</ol>\n<h3 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;至此，line-height与vertical-align的性质及组合用法就介绍完毕，本文<strong>主要参考了张鑫旭大神的《CSS深入理解vertical-align和line-height的基友关系》</strong>，如有雷同，不用怀疑，就是受了他的启发~<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;文中若有错误及不妥之处，欢迎指正~</p>\n</div></p>"},{"title":"前端案例分享（一）：CSS+JS实现流星雨动画","date":"2018-12-24T17:35:04.000Z","_content":"### 引言\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;平常会做一些有意思的小案例练手，通常都会发到 codepen 上，但是 codepen 不能写分析。<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;所以就在博客上开个案例分享系列，对 demo 做个剖析。目的以分享为主，然后也希望各路大神能给出改进的想法，在 review 中提升技术，发现乐趣~\n\n### 1、效果图\n\n完整效果，请移步 [codepen-流星雨案例](https://codepen.io/HaiLoongLyu/full/Lgqbzy/)<br>\n纯 CSS 案例及本篇案例完整源码，请移步[The night of the metero](https://github.com/LyuHaiLoong/Demos)\n\n![](https://raw.githubusercontent.com/LyuHaiLoong/lyuhailoong.github.io/master/images/post/%E5%89%8D%E7%AB%AF%E6%A1%88%E4%BE%8B%E5%88%86%E4%BA%AB%EF%BC%88%E4%B8%80%EF%BC%89.gif)\n<!--more-->\n### 2、源码\n\n- **HTML**\n\n```\n<body>\n    <div class=\"container\">\n        <div id=\"mask\"></div>\n        <div id=\"sky\"></div>\n        <div id=\"moon\"></div>\n        <div id=\"stars\"></div>\n        <div class=\"cloud cloud-1\"></div>\n        <div class=\"cloud cloud-2\"></div>\n        <div class=\"cloud cloud-3\"></div>\n    </div>\n</body>\n\n```\n\n- **CSS**\n\n```\n  /* ------------reset------------ */\n\n * {\n     margin: 0;\n     padding: 0;\n }\n\n html,\n body {\n     width: 100%;\n     min-width: 1000px;\n     height: 100%;\n     min-height: 400px;\n     overflow: hidden;\n }\n\n /*  ------------画布 ------------ */\n .container {\n     position: relative;\n     height: 100%;\n }\n /* 遮罩层 */\n\n #mask {\n     position: absolute;\n     width: 100%;\n     height: 100%;\n     background: rgba(0, 0, 0, .8);\n     z-index: 900;\n }\n /* 天空背景 */\n\n #sky {\n     width: 100%;\n     height: 100%;\n     background: linear-gradient(rgba(0, 150, 255, 1), rgba(0, 150, 255, .8), rgba(0, 150, 255, .5));\n }\n /* 月亮 */\n\n #moon {\n     position: absolute;\n     top: 50px;\n     right: 200px;\n     width: 120px;\n     height: 120px;\n     background: rgba(251, 255, 25, 0.938);\n     border-radius: 50%;\n     box-shadow: 0 0 20px rgba(251, 255, 25, 0.5);\n     z-index: 9999;\n }\n /* 闪烁星星 */\n\n .blink {\n     position: absolute;\n     background: rgb(255, 255, 255);\n     border-radius: 50%;\n     box-shadow: 0 0 5px rgb(255, 255, 255);\n     opacity: 0;\n     z-index: 10000;\n }\n /* 流星 */\n\n .star {\n     position: absolute;\n     opacity: 0;\n     z-index: 10000;\n }\n\n .star::after {\n     content: \"\";\n     display: block;\n     border: solid;\n     border-width: 2px 0 2px 80px;\n     /*流星随长度逐渐缩小*/\n     border-color: transparent transparent transparent rgba(255, 255, 255, 1);\n     border-radius: 2px 0 0 2px;\n     transform: rotate(-45deg);\n     transform-origin: 0 0 0;\n     box-shadow: 0 0 20px rgba(255, 255, 255, .3);\n }\n /* 云 */\n\n .cloud {\n     position: absolute;\n     width: 100%;\n     height: 100px;\n }\n\n .cloud-1 {\n     bottom: -100px;\n     z-index: 1000;\n     opacity: 1;\n     transform: scale(1.5);\n     -webkit-transform: scale(1.5);\n     -moz-transform: scale(1.5);\n     -ms-transform: scale(1.5);\n     -o-transform: scale(1.5);\n }\n\n .cloud-2 {\n     left: -100px;\n     bottom: -50px;\n     z-index: 999;\n     opacity: .5;\n     transform: rotate(7deg);\n     -webkit-transform: rotate(7deg);\n     -moz-transform: rotate(7deg);\n     -ms-transform: rotate(7deg);\n     -o-transform: rotate(7deg);\n }\n\n .cloud-3 {\n     left: 120px;\n     bottom: -50px;\n     z-index: 999;\n     opacity: .1;\n     transform: rotate(-10deg);\n     -webkit-transform: rotate(-10deg);\n     -moz-transform: rotate(-10deg);\n     -ms-transform: rotate(-10deg);\n     -o-transform: rotate(-10deg);\n }\n\n .circle {\n     position: absolute;\n     border-radius: 50%;\n     background: #fff;\n }\n\n .circle-1 {\n     width: 100px;\n     height: 100px;\n     top: -50px;\n     left: 10px;\n }\n\n .circle-2 {\n     width: 150px;\n     height: 150px;\n     top: -50px;\n     left: 30px;\n }\n\n .circle-3 {\n     width: 300px;\n     height: 300px;\n     top: -100px;\n     left: 80px;\n }\n\n .circle-4 {\n     width: 200px;\n     height: 200px;\n     top: -60px;\n     left: 300px;\n }\n\n .circle-5 {\n     width: 80px;\n     height: 80px;\n     top: -30px;\n     left: 450px;\n }\n\n .circle-6 {\n     width: 200px;\n     height: 200px;\n     top: -50px;\n     left: 500px;\n }\n\n .circle-7 {\n     width: 100px;\n     height: 100px;\n     top: -10px;\n     left: 650px;\n }\n\n .circle-8 {\n     width: 50px;\n     height: 50px;\n     top: 30px;\n     left: 730px;\n }\n\n .circle-9 {\n     width: 100px;\n     height: 100px;\n     top: 30px;\n     left: 750px;\n }\n\n .circle-10 {\n     width: 150px;\n     height: 150px;\n     top: 10px;\n     left: 800px;\n }\n\n .circle-11 {\n     width: 150px;\n     height: 150px;\n     top: -30px;\n     left: 850px;\n }\n\n .circle-12 {\n     width: 250px;\n     height: 250px;\n     top: -50px;\n     left: 900px;\n }\n\n .circle-13 {\n     width: 200px;\n     height: 200px;\n     top: -40px;\n     left: 1000px;\n }\n\n .circle-14 {\n     width: 300px;\n     height: 300px;\n     top: -70px;\n     left: 1100px;\n }\n\n```\n\n- **JS**\n\n```\n//流星动画\nsetInterval(function() {\n    const obj = addChild(\"#sky\", \"div\", 2, \"star\");\n\n    for (let i = 0; i < obj.children.length; i++) {\n        const top = -50 + Math.random() * 200 + \"px\",\n            left = 200 + Math.random() * 1200 + \"px\",\n            scale = 0.3 + Math.random() * 0.5;\n        const timer = 1000 + Math.random() * 1000;\n\n        obj.children[i].style.top = top;\n        obj.children[i].style.left = left;\n        obj.children[i].style.transform = `scale(${scale})`;\n\n        requestAnimation({\n            ele: obj.children[i],\n            attr: [\"top\", \"left\", \"opacity\"],\n            value: [150, -150, .8],\n            time: timer,\n            flag: false,\n            fn: function() {\n                requestAnimation({\n                    ele: obj.children[i],\n                    attr: [\"top\", \"left\", \"opacity\"],\n                    value: [150, -150, 0],\n                    time: timer,\n                    flag: false,\n                    fn: () => {\n                        obj.parent.removeChild(obj.children[i]);\n                    }\n                })\n            }\n        });\n    }\n\n}, 1000);\n\n//闪烁星星动画\nsetInterval(function() {\n    const obj = addChild(\"#stars\", \"div\", 2, \"blink\");\n\n    for (let i = 0; i < obj.children.length; i++) {\n        const top = -50 + Math.random() * 500 + \"px\",\n            left = 200 + Math.random() * 1200 + \"px\",\n            round = 1 + Math.random() * 2 + \"px\";\n        const timer = 1000 + Math.random() * 4000;\n\n        obj.children[i].style.top = top;\n        obj.children[i].style.left = left;\n        obj.children[i].style.width = round;\n        obj.children[i].style.height = round;\n\n        requestAnimation({\n            ele: obj.children[i],\n            attr: \"opacity\",\n            value: .5,\n            time: timer,\n            flag: false,\n            fn: function() {\n                requestAnimation({\n                    ele: obj.children[i],\n                    attr: \"opacity\",\n                    value: 0,\n                    time: timer,\n                    flag: false,\n                    fn: function() {\n                        obj.parent.removeChild(obj.children[i]);\n                    }\n                });\n            }\n        });\n    }\n\n}, 1000);\n\n//月亮移动\nrequestAnimation({\n    ele: \"#moon\",\n    attr: \"right\",\n    value: 1200,\n    time: 10000000,\n});\n\n\n// 添加云\nconst clouds = addChild(\".cloud\", \"div\", 14, \"circle\", true);\nfor (let i = 0; i < clouds.children.length; i++) {\n    for (let j = 0; j < clouds.children[i].length;) {\n        clouds.children[i][j].classList.add(`circle-${++j}`);\n    }\n}\n//云动画\n\nlet flag = 1;\nsetInterval(\n    function() {\n        const clouds = document.querySelectorAll(\".cloud\");\n        const left = Math.random() * 5;\n        bottom = Math.random() * 5;\n\n        let timer = 0;\n        for (let i = 0; i < clouds.length; i++) {\n            requestAnimation({\n                ele: clouds[i],\n                attr: [\"left\", \"bottom\"],\n                value: flag % 2 ? [-left, -bottom] : [left, bottom],\n                time: timer += 500,\n                flag: false,\n                fn: function() {\n                    requestAnimation({\n                        ele: clouds[i],\n                        attr: [\"left\", \"bottom\"],\n                        value: flag % 2 ? [left, bottom] : [-left, -bottom],\n                        time: timer,\n                        flag: false\n                    })\n                }\n            });\n        }\n\n        flag++;\n    }, 2000)\n```\n\n- **封装方法**\n\n```\n//———————————————————————————————————————————动画———————————————————————————————————————————————————\n//运动动画，调用Tween.js\n//ele: dom | class | id | tag  节点 | 类名 | id名 | 标签名，只支持选择一个节点，class类名以及标签名只能选择页面中第一个\n//attr: attribute 属性名\n//value: target value 目标值\n//time: duration 持续时间\n//tween: timing function 函数方程\n//flag: Boolean 判断是按值移动还是按位置移动,默认按位置移动\n//fn: callback 回调函数\n//增加返回值: 将内部参数对象返回，可以通过设置返回对象的属性stop为true打断动画\nfunction requestAnimation(obj) {\n    //—————————————————————————————————————参数设置—————————————————————————————————————————————\n    //默认属性\n    const parameter = {\n        ele: null,\n        attr: null,\n        value: null,\n        time: 1000,\n        tween: \"linear\",\n        flag: true,\n        stop: false,\n        fn: \"\"\n    }\n\n    //合并传入属性\n    Object.assign(parameter, obj); //覆盖重名属性\n\n    //—————————————————————————————————————动画设置—————————————————————————————————————————————\n    //创建运动方程初始参数,方便复用\n    let start = 0; //用于保存初始时间戳\n    let target = (typeof parameter.ele === \"string\" ? document.querySelector(parameter.ele) : parameter.ele), //目标节点\n        attr = parameter.attr, //目标属性\n        beginAttr = parseFloat(getComputedStyle(target)[attr]), //attr起始值\n        value = parameter.value, //运动目标值\n        count = value - beginAttr, //实际运动值\n        time = parameter.time, //运动持续时间,\n        tween = parameter.tween, //运动函数\n        flag = parameter.flag,\n        callback = parameter.fn, //回调函数\n        curVal = 0; //运动当前值\n\n    //判断传入函数是否为数组，多段运动\n    (function() {\n        if (attr instanceof Array) {\n            beginAttr = [];\n            count = [];\n            for (let i of attr) {\n                const val = parseFloat(getComputedStyle(target)[i]);\n                beginAttr.push(val);\n                count.push(value - val);\n            }\n        }\n        if (value instanceof Array) {\n            for (let i in value) {\n                count[i] = value[i] - beginAttr[i];\n            }\n        }\n    })();\n\n    //运动函数\n    function animate(timestamp) {\n        if (parameter.stop) return; //打断\n        //存储初始时间戳\n        if (!start) start = timestamp;\n        //已运动时间\n        let t = timestamp - start;\n        //判断多段运动\n        if (beginAttr instanceof Array) {\n            // const len = beginAttr.length //存数组长度，复用\n\n            //多段运动第1类——多属性，同目标，同时间/不同时间\n            if (typeof count === \"number\") { //同目标\n                //同时间\n                if (typeof time === \"number\") {\n                    if (t > time) t = time; //判断是否超出目标值\n\n                    //循环attr，分别赋值\n                    for (let i in beginAttr) {\n                        if (flag) curVal = Tween[tween](t, beginAttr[i], count, time); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置\n                        else curVal = Tween[tween](t, beginAttr[i], count + beginAttr[i], time); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离\n                        if (attr[i] === \"opacity\") target.style[attr[i]] = curVal; //给属性赋值\n                        else target.style[attr[i]] = curVal + \"px\"; //给属性赋值\n\n                        if (t < time) requestAnimationFrame(animate); //判断是否运动完\n                        else callback && callback(); //调用回调函数\n                    }\n                    return;\n                }\n\n                //不同时间\n                if (time instanceof Array) {\n                    //循环time，attr，分别赋值\n                    for (let i in beginAttr) {\n                        //错误判断\n                        if (!time[i] && time[i] !== 0) {\n                            throw new Error(\n                                \"The input time's length is not equal to attribute's length\");\n                        }\n\n                        //判断是否已经完成动画，完成则跳过此次循环\n                        if (parseFloat(getComputedStyle(target)[attr[i]]) === (typeof value === \"number\" ? value : value[i]))\n                            continue;\n                        // t = timestamp - start; //每次循环初始化t\n                        if (t > time[i]) t = time[i]; //判断是否超出目标值\n\n                        if (flag || attr[i] === \"opacity\") curVal = Tween[tween](t, beginAttr[i], count, i); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置\n                        else curVal = Tween[tween](t, beginAttr[i], count + beginAttr[i], i); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离\n                        if (attr[i] === \"opacity\") target.style[attr[i]] = curVal; //给属性赋值\n                        else target.style[attr[i]] = curVal + \"px\"; //给属性赋值\n                    }\n\n                    if (t < Math.max(...time)) requestAnimationFrame(animate); //判断函数是否运动完\n                    else callback && callback(); //如果已经执行完时间最长的动画，则调用回调函数\n                    return;\n                }\n            }\n\n            //多段运动第2类——多属性，不同目标，同时间/不同时间\n            if (count instanceof Array) {\n                //同时间\n                if (typeof time === \"number\") {\n\n                    if (t > time) t = time; //判断是否超出目标值\n\n                    for (let i in beginAttr) { //循环attr，count，分别赋值\n                        //错误判断\n                        if (!count[i] && count[i] !== 0) {\n                            throw new Error(\n                                \"The input value's length is not equal to attribute's length\");\n                        }\n\n                        if (flag || attr[i] === \"opacity\") curVal = Tween[tween](t, beginAttr[i], count[i], time); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置\n                        else curVal = Tween[tween](t, beginAttr[i], count[i] + beginAttr[i], time); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离\n                        if (attr[i] === \"opacity\") target.style[attr[i]] = curVal; //给属性赋值\n                        else target.style[attr[i]] = curVal + \"px\"; //给属性赋值\n                    }\n\n                    if (t < time) requestAnimationFrame(animate); //判断函数是否运动完\n                    else callback && callback(); //如果已经执行完时间最长的动画，则调用回调函数\n                    return;\n                }\n\n                //不同时间\n                if (time instanceof Array) {\n                    for (let i in beginAttr) {\n                        //错误判断\n                        if (!time[i] && time[i] !== 0) {\n                            throw new Error(\n                                \"The input time's length is not equal to attribute's length\");\n                        }\n\n                        //判断是否已经完成动画，完成则跳过此次循环\n                        if (parseFloat(getComputedStyle(target)[attr[i]]) === (typeof value === \"number\" ? value : value[i]))\n                            continue;\n\n                        if (t > time[i]) t = time[i]; //判断是否超出目标值\n\n                        //错误判断\n                        if (!count[i] && count[i] !== 0) {\n                            throw new Error(\n                                \"The input value's length is not equal to attribute's length\");\n                        }\n\n                        if (flag || attr[i] === \"opacity\") curVal = Tween[tween](t, beginAttr[i], count[i], time[i]); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置\n                        else curVal = Tween[tween](t, beginAttr[i], count[i] + beginAttr[i], time[i]); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离\n                        if (attr[i] === \"opacity\") target.style[attr[i]] = curVal;\n                        else target.style[attr[i]] = curVal + \"px\";\n                    }\n\n                    if (t < Math.max(...time)) requestAnimationFrame(animate);\n                    else callback && callback();\n                    return;\n                }\n            }\n\n        }\n\n        //单运动模式\n        if (t > time) t = time;\n        if (flag || attr === \"opacity\") curVal = Tween[tween](t, beginAttr, count, time); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置\n        else curVal = Tween[tween](t, beginAttr[i], count + beginAttr, time); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离\n        if (attr === \"opacity\") target.style[attr] = curVal;\n        else target.style[attr] = curVal + \"px\";\n\n        if (t < time) requestAnimationFrame(animate);\n        else callback && callback();\n\n    }\n\n    requestAnimationFrame(animate);\n    return parameter; //返回对象，供打断或其他用途\n}\n//Tween.js\n/*\n * t : time 已过时间\n * b : begin 起始值\n * c : count 总的运动值\n * d : duration 持续时间\n *\n * 曲线方程\n *\n * http://www.cnblogs.com/bluedream2009/archive/2010/06/19/1760909.html\n * */\n\nlet Tween = {\n    linear: function(t, b, c, d) { //匀速\n        return c * t / d + b;\n    },\n    easeIn: function(t, b, c, d) { //加速曲线\n        return c * (t /= d) * t + b;\n    },\n    easeOut: function(t, b, c, d) { //减速曲线\n        return -c * (t /= d) * (t - 2) + b;\n    },\n    easeBoth: function(t, b, c, d) { //加速减速曲线\n        if ((t /= d / 2) < 1) {\n            return c / 2 * t * t + b;\n        }\n        return -c / 2 * ((--t) * (t - 2) - 1) + b;\n    },\n    easeInStrong: function(t, b, c, d) { //加加速曲线\n        return c * (t /= d) * t * t * t + b;\n    },\n    easeOutStrong: function(t, b, c, d) { //减减速曲线\n        return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n    },\n    easeBothStrong: function(t, b, c, d) { //加加速减减速曲线\n        if ((t /= d / 2) < 1) {\n            return c / 2 * t * t * t * t + b;\n        }\n        return -c / 2 * ((t -= 2) * t * t * t - 2) + b;\n    },\n    elasticIn: function(t, b, c, d, a, p) { //正弦衰减曲线（弹动渐入）\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d) == 1) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * 0.3;\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            var s = p / 4;\n        } else {\n            var s = p / (2 * Math.PI) * Math.asin(c / a);\n        }\n        return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n    },\n    elasticOut: function(t, b, c, d, a, p) { //正弦增强曲线（弹动渐出）\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d) == 1) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * 0.3;\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            var s = p / 4;\n        } else {\n            var s = p / (2 * Math.PI) * Math.asin(c / a);\n        }\n        return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n    },\n    elasticBoth: function(t, b, c, d, a, p) {\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d / 2) == 2) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * (0.3 * 1.5);\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            var s = p / 4;\n        } else {\n            var s = p / (2 * Math.PI) * Math.asin(c / a);\n        }\n        if (t < 1) {\n            return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) *\n                Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n        }\n        return a * Math.pow(2, -10 * (t -= 1)) *\n            Math.sin((t * d - s) * (2 * Math.PI) / p) * 0.5 + c + b;\n    },\n    backIn: function(t, b, c, d, s) { //回退加速（回退渐入）\n        if (typeof s == 'undefined') {\n            s = 1.70158;\n        }\n        return c * (t /= d) * t * ((s + 1) * t - s) + b;\n    },\n    backOut: function(t, b, c, d, s) {\n        if (typeof s == 'undefined') {\n            s = 3.70158; //回缩的距离\n        }\n        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n    },\n    backBoth: function(t, b, c, d, s) {\n        if (typeof s == 'undefined') {\n            s = 1.70158;\n        }\n        if ((t /= d / 2) < 1) {\n            return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;\n        }\n        return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;\n    },\n    bounceIn: function(t, b, c, d) { //弹球减振（弹球渐出）\n        return c - Tween['bounceOut'](d - t, 0, c, d) + b;\n    },\n    bounceOut: function(t, b, c, d) {\n        if ((t /= d) < (1 / 2.75)) {\n            return c * (7.5625 * t * t) + b;\n        } else if (t < (2 / 2.75)) {\n            return c * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75) + b;\n        } else if (t < (2.5 / 2.75)) {\n            return c * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375) + b;\n        }\n        return c * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375) + b;\n    },\n    bounceBoth: function(t, b, c, d) {\n        if (t < d / 2) {\n            return Tween['bounceIn'](t * 2, 0, c, d) * 0.5 + b;\n        }\n        return Tween['bounceOut'](t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n    }\n}\n\n\n//———————————————————————————————————————————DOM操作———————————————————————————————————————————————————\n// 添加节点\n// ele: 父节点，支持输入变量，id值，class值，标签值。除变量外，其余值必须为字符串\n// node: 添加的标签名，值为字符串\n// n: 节点添加个数\n// className: 节点绑定的class名，，值为字符串，多个class名用空格隔开\n// boolean: 是否选中所有目标父节点。可选参数，不输入则判定为false，则只匹配选中的第一个节点\nfunction addChild(ele, node, n, className, boolean) {\n    //获取节点\n    let parent = null;\n\n    if (typeof ele !== \"string\") parent = ele;\n    else if (ele[0] === \"#\") parent = document.getElementById(ele.slice(1));\n    else if (ele[0] === \".\") {\n        if (boolean === false) parent = document.getElementsByClassName(ele.slice(1))[0];\n        else parent = document.getElementsByClassName(ele.slice(1));\n    } else {\n        if (boolean === false) parent = docuemnt.getElementsByTagName(ele)[0];\n        else parent = document.getElementsByTagNameNS(ele);\n    }\n\n    //声明用于存储父节点及子节点的对象\n    const obj = {\n        \"parent\": parent,\n        \"children\": []\n    };\n\n    //添加节点\n    if (boolean) {\n        for (let i = 0; i < parent.length; i++) {\n            //创建容器碎片\n            const fragment = document.createDocumentFragment();\n            //保存子节点，用于返回值\n            obj.children[i] = [];\n\n            for (let j = 0; j < n; j++) {\n                const target = document.createElement(node);\n                target.className = className;\n                fragment.appendChild(target);\n                //添加子节点到数组，用于返回值\n                obj.children[i][j] = target;\n            }\n\n            parent[i].appendChild(fragment)\n        }\n    } else {\n        //创建碎片容器\n        const fragment = document.createDocumentFragment();\n\n        for (let i = 0; i < n; i++) {\n            const target = document.createElement(node);\n            target.className = className;\n            fragment.appendChild(target);\n            //添加子节点，用于返回值\n            obj.children[i] = target;\n        }\n        //将碎片容器一次性添加到父节点\n        parent.appendChild(fragment);\n    }\n\n    //返回参数，供动画函数调用\n    return obj;\n}\n\n```\n\n### 3、案例解析\n\n- **HTML**\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由于节点很多，并且我想尽量做得逼真有趣一点，就给节点加了随机位置。所以节点的输出都是用 JS 控制的，HTML 这边只写了几个父元素盒子，加上相应的 id 名和 class 类名，结构相对简单。\n\n- **CSS**\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CSS 部分的难点就是流星的样式和用圈圈画云层，然后将云层堆叠出立体效果。<br><br>\n\n> **首先说一下流星的样式：**\n\n```\n#sky .star {\n     position: absolute;\n     opacity: 0;\n     z-index: 10000;\n }\n\n .star::after {\n     content: \"\";\n     display: block;\n     border: solid;\n     border-width: 2px 0 2px 80px;\n     /*流星随长度逐渐缩小*/\n     border-color: transparent transparent transparent rgba(255, 255, 255, 1);\n     border-radius: 2px 0 0 2px;\n     transform: rotate(-45deg);\n     transform-origin: 0 0 0;\n     box-shadow: 0 0 20px rgba(255, 255, 255, .3);\n }\n\n```\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;先提取了公共样式，添加定位属性；<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;然后在 star 后通过 after 伪类添加流星，**用 border 特性画：**<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**1）模型绘制：** **border-width**的顺序为四边**top、right、bottom、left**，同理**border-color**的顺序也为四边**top、right、bottom、left**。这样将 border-width 与 border-color 一一对应后，就能看出**2px 是流星的宽度，80px 是流星的长度，而 0px 就是流星的尾巴**。这样就形成了一个**头部 2px 宽，尾部 0px，长度 80px 的流星模型**;<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**2）稍微逼真：** 通过**border-radius**给流星的头部增加个圆角，让它看起来 emmmmmmm 更逼真？最后通过**roteta**旋转一个角度，让它看起来像是往下掉;<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**3）增加闪光：** 通过**box-shadow** 给流星增加一点光晕，让它看起来有闪光的效果;<br>\n<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过以上 3 步，一个流星就画好了。<br><br>\n\n> **然后是画云：**\n\n```\n因为云的代码比较长，这里就不贴出来了。方法无非是通过一个一个的圆，相互叠加覆盖，完成一个云朵的形状;\n完成一个云层之后，copy一个，然后多个云层通过rotate、opacity、left定位等，做出一个渐隐叠加的立体效果;\n```\n\n- **JS**\n\n**_JS 部分以流星举例说明_**\n\n```\nsetInterval(function() {\n    const obj = addChild(\"#sky\", \"div\", 2, \"star\"); //插入流星\n\n    for (let i = 0; i < obj.children.length; i++) {\n        //随机位置\n        const top = -50 + Math.random() * 200 + \"px\",\n            left = 200 + Math.random() * 1200 + \"px\",\n            scale = 0.3 + Math.random() * 0.5;\n        const timer = 1000 + Math.random() * 1000;\n\n        obj.children[i].style.top = top;\n        obj.children[i].style.left = left;\n        obj.children[i].style.transform = `scale(${scale})`;\n\n        //添加动画\n        requestAnimation({\n            ele: obj.children[i],\n            attr: [\"top\", \"left\", \"opacity\"],\n            value: [150, -150, .8],\n            time: timer,\n            flag: false,\n            fn: function() {\n                requestAnimation({\n                    ele: obj.children[i],\n                    attr: [\"top\", \"left\", \"opacity\"],\n                    value: [150, -150, 0],\n                    time: timer,\n                    flag: false,\n                    fn: () => {\n                        obj.parent.removeChild(obj.children[i]); //动画结束删除节点\n                    }\n                })\n            }\n        });\n    }\n\n}, 1000);\n\n```\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这里边用到了我自己封装的**两个方法**，一个是基于 requestAnimationFrame 的**requestAnimation**，以及基于 appendChild 的**addChild**。<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为了达成星星位置随机的效果，通过定时器 setInterval 不停的**插入**与**删除**流星：<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**首先**，每次添加**2 个流星**到页面，但是**定时器的间隔时间小于流星的动画时间**，这样就能保证页面中的流星的数量不是一个固定值，但肯定是大于 2 的。不然一次 2 个流星略显冷清;<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**然后**，通过 for 循环（也可以用 for-in，for-of，都行。for-of 最简单）给每个新添加到页面中的流星一个随机的位置（top、left）、随机的大小（scale）、随机的动画执行时间（timer）;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**最后**，在 for 循环中，给每个新添加到页面中的流星加上动画，并通过回调函数在执行完动画后删除节点。这里要注意的是，动画要分成**两个阶段**（**出现**与**消失**，主要是**opacity**控制）。另外我这里的处理，每个流星都移动相同的距离**300px**，这个距离我觉得也可以通过随机数控制，但我犯了个懒，就没有做。\n\n### 4、小问题\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;目前我发现的问题有**2 个：**<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;一是 DOM 操作本身的问题。页面不停的添加与删除节点，造成不停地**回流与重绘**，很耗性能;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;二是 requestAnimationFrame 本身的问题。因为定时器不断在添加节点，而 requestAnimationFrame 的特性——**当离开当前页面去浏览其他页面时，动画会暂停**。这就造成了一个问题，**节点一直在加，但动画全停在那没有执行**。那么下次再回到这个页面的时候，就 boom!！！动画就炸了，你会看到画面一卡，很多小蝌蚪集体出动去找妈妈;\n\n### 5、结语\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这个小案例虽然从难度上来看很简单，但是它可拓展性很高——比如表个白啊、寄个相思、耍个浪漫啊等等（手动狗头 doge），而且用纯 CSS 也可以实现（我也写了一版纯 CSS 的，因为不能随机位置随机大小，所以看起来比较静态一点，就不贴了）。所以对于了解 CSS 动画与 JS 动画，是个很不错的练手小案例。<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;感谢看完这篇文章的可爱的人儿，希望你能从中获得灵感~如果能给你带来帮助，那我是极高兴地~如果你把灵感告诉我，那我就 can't happniess anymore 了~<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最后，再次感谢，如果有优化写法，欢迎指导~\n","source":"_posts/前端案例分享（一）：CSS-JS实现流星雨动画.md","raw":"---\ntitle: 前端案例分享（一）：CSS+JS实现流星雨动画\ndate: 2018-12-25 01:35:04\ncategories: \n  - 前端\n  - 案例分享\ntags: \n  - HTML\n  - CSS\n  - JS\n---\n### 引言\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;平常会做一些有意思的小案例练手，通常都会发到 codepen 上，但是 codepen 不能写分析。<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;所以就在博客上开个案例分享系列，对 demo 做个剖析。目的以分享为主，然后也希望各路大神能给出改进的想法，在 review 中提升技术，发现乐趣~\n\n### 1、效果图\n\n完整效果，请移步 [codepen-流星雨案例](https://codepen.io/HaiLoongLyu/full/Lgqbzy/)<br>\n纯 CSS 案例及本篇案例完整源码，请移步[The night of the metero](https://github.com/LyuHaiLoong/Demos)\n\n![](https://raw.githubusercontent.com/LyuHaiLoong/lyuhailoong.github.io/master/images/post/%E5%89%8D%E7%AB%AF%E6%A1%88%E4%BE%8B%E5%88%86%E4%BA%AB%EF%BC%88%E4%B8%80%EF%BC%89.gif)\n<!--more-->\n### 2、源码\n\n- **HTML**\n\n```\n<body>\n    <div class=\"container\">\n        <div id=\"mask\"></div>\n        <div id=\"sky\"></div>\n        <div id=\"moon\"></div>\n        <div id=\"stars\"></div>\n        <div class=\"cloud cloud-1\"></div>\n        <div class=\"cloud cloud-2\"></div>\n        <div class=\"cloud cloud-3\"></div>\n    </div>\n</body>\n\n```\n\n- **CSS**\n\n```\n  /* ------------reset------------ */\n\n * {\n     margin: 0;\n     padding: 0;\n }\n\n html,\n body {\n     width: 100%;\n     min-width: 1000px;\n     height: 100%;\n     min-height: 400px;\n     overflow: hidden;\n }\n\n /*  ------------画布 ------------ */\n .container {\n     position: relative;\n     height: 100%;\n }\n /* 遮罩层 */\n\n #mask {\n     position: absolute;\n     width: 100%;\n     height: 100%;\n     background: rgba(0, 0, 0, .8);\n     z-index: 900;\n }\n /* 天空背景 */\n\n #sky {\n     width: 100%;\n     height: 100%;\n     background: linear-gradient(rgba(0, 150, 255, 1), rgba(0, 150, 255, .8), rgba(0, 150, 255, .5));\n }\n /* 月亮 */\n\n #moon {\n     position: absolute;\n     top: 50px;\n     right: 200px;\n     width: 120px;\n     height: 120px;\n     background: rgba(251, 255, 25, 0.938);\n     border-radius: 50%;\n     box-shadow: 0 0 20px rgba(251, 255, 25, 0.5);\n     z-index: 9999;\n }\n /* 闪烁星星 */\n\n .blink {\n     position: absolute;\n     background: rgb(255, 255, 255);\n     border-radius: 50%;\n     box-shadow: 0 0 5px rgb(255, 255, 255);\n     opacity: 0;\n     z-index: 10000;\n }\n /* 流星 */\n\n .star {\n     position: absolute;\n     opacity: 0;\n     z-index: 10000;\n }\n\n .star::after {\n     content: \"\";\n     display: block;\n     border: solid;\n     border-width: 2px 0 2px 80px;\n     /*流星随长度逐渐缩小*/\n     border-color: transparent transparent transparent rgba(255, 255, 255, 1);\n     border-radius: 2px 0 0 2px;\n     transform: rotate(-45deg);\n     transform-origin: 0 0 0;\n     box-shadow: 0 0 20px rgba(255, 255, 255, .3);\n }\n /* 云 */\n\n .cloud {\n     position: absolute;\n     width: 100%;\n     height: 100px;\n }\n\n .cloud-1 {\n     bottom: -100px;\n     z-index: 1000;\n     opacity: 1;\n     transform: scale(1.5);\n     -webkit-transform: scale(1.5);\n     -moz-transform: scale(1.5);\n     -ms-transform: scale(1.5);\n     -o-transform: scale(1.5);\n }\n\n .cloud-2 {\n     left: -100px;\n     bottom: -50px;\n     z-index: 999;\n     opacity: .5;\n     transform: rotate(7deg);\n     -webkit-transform: rotate(7deg);\n     -moz-transform: rotate(7deg);\n     -ms-transform: rotate(7deg);\n     -o-transform: rotate(7deg);\n }\n\n .cloud-3 {\n     left: 120px;\n     bottom: -50px;\n     z-index: 999;\n     opacity: .1;\n     transform: rotate(-10deg);\n     -webkit-transform: rotate(-10deg);\n     -moz-transform: rotate(-10deg);\n     -ms-transform: rotate(-10deg);\n     -o-transform: rotate(-10deg);\n }\n\n .circle {\n     position: absolute;\n     border-radius: 50%;\n     background: #fff;\n }\n\n .circle-1 {\n     width: 100px;\n     height: 100px;\n     top: -50px;\n     left: 10px;\n }\n\n .circle-2 {\n     width: 150px;\n     height: 150px;\n     top: -50px;\n     left: 30px;\n }\n\n .circle-3 {\n     width: 300px;\n     height: 300px;\n     top: -100px;\n     left: 80px;\n }\n\n .circle-4 {\n     width: 200px;\n     height: 200px;\n     top: -60px;\n     left: 300px;\n }\n\n .circle-5 {\n     width: 80px;\n     height: 80px;\n     top: -30px;\n     left: 450px;\n }\n\n .circle-6 {\n     width: 200px;\n     height: 200px;\n     top: -50px;\n     left: 500px;\n }\n\n .circle-7 {\n     width: 100px;\n     height: 100px;\n     top: -10px;\n     left: 650px;\n }\n\n .circle-8 {\n     width: 50px;\n     height: 50px;\n     top: 30px;\n     left: 730px;\n }\n\n .circle-9 {\n     width: 100px;\n     height: 100px;\n     top: 30px;\n     left: 750px;\n }\n\n .circle-10 {\n     width: 150px;\n     height: 150px;\n     top: 10px;\n     left: 800px;\n }\n\n .circle-11 {\n     width: 150px;\n     height: 150px;\n     top: -30px;\n     left: 850px;\n }\n\n .circle-12 {\n     width: 250px;\n     height: 250px;\n     top: -50px;\n     left: 900px;\n }\n\n .circle-13 {\n     width: 200px;\n     height: 200px;\n     top: -40px;\n     left: 1000px;\n }\n\n .circle-14 {\n     width: 300px;\n     height: 300px;\n     top: -70px;\n     left: 1100px;\n }\n\n```\n\n- **JS**\n\n```\n//流星动画\nsetInterval(function() {\n    const obj = addChild(\"#sky\", \"div\", 2, \"star\");\n\n    for (let i = 0; i < obj.children.length; i++) {\n        const top = -50 + Math.random() * 200 + \"px\",\n            left = 200 + Math.random() * 1200 + \"px\",\n            scale = 0.3 + Math.random() * 0.5;\n        const timer = 1000 + Math.random() * 1000;\n\n        obj.children[i].style.top = top;\n        obj.children[i].style.left = left;\n        obj.children[i].style.transform = `scale(${scale})`;\n\n        requestAnimation({\n            ele: obj.children[i],\n            attr: [\"top\", \"left\", \"opacity\"],\n            value: [150, -150, .8],\n            time: timer,\n            flag: false,\n            fn: function() {\n                requestAnimation({\n                    ele: obj.children[i],\n                    attr: [\"top\", \"left\", \"opacity\"],\n                    value: [150, -150, 0],\n                    time: timer,\n                    flag: false,\n                    fn: () => {\n                        obj.parent.removeChild(obj.children[i]);\n                    }\n                })\n            }\n        });\n    }\n\n}, 1000);\n\n//闪烁星星动画\nsetInterval(function() {\n    const obj = addChild(\"#stars\", \"div\", 2, \"blink\");\n\n    for (let i = 0; i < obj.children.length; i++) {\n        const top = -50 + Math.random() * 500 + \"px\",\n            left = 200 + Math.random() * 1200 + \"px\",\n            round = 1 + Math.random() * 2 + \"px\";\n        const timer = 1000 + Math.random() * 4000;\n\n        obj.children[i].style.top = top;\n        obj.children[i].style.left = left;\n        obj.children[i].style.width = round;\n        obj.children[i].style.height = round;\n\n        requestAnimation({\n            ele: obj.children[i],\n            attr: \"opacity\",\n            value: .5,\n            time: timer,\n            flag: false,\n            fn: function() {\n                requestAnimation({\n                    ele: obj.children[i],\n                    attr: \"opacity\",\n                    value: 0,\n                    time: timer,\n                    flag: false,\n                    fn: function() {\n                        obj.parent.removeChild(obj.children[i]);\n                    }\n                });\n            }\n        });\n    }\n\n}, 1000);\n\n//月亮移动\nrequestAnimation({\n    ele: \"#moon\",\n    attr: \"right\",\n    value: 1200,\n    time: 10000000,\n});\n\n\n// 添加云\nconst clouds = addChild(\".cloud\", \"div\", 14, \"circle\", true);\nfor (let i = 0; i < clouds.children.length; i++) {\n    for (let j = 0; j < clouds.children[i].length;) {\n        clouds.children[i][j].classList.add(`circle-${++j}`);\n    }\n}\n//云动画\n\nlet flag = 1;\nsetInterval(\n    function() {\n        const clouds = document.querySelectorAll(\".cloud\");\n        const left = Math.random() * 5;\n        bottom = Math.random() * 5;\n\n        let timer = 0;\n        for (let i = 0; i < clouds.length; i++) {\n            requestAnimation({\n                ele: clouds[i],\n                attr: [\"left\", \"bottom\"],\n                value: flag % 2 ? [-left, -bottom] : [left, bottom],\n                time: timer += 500,\n                flag: false,\n                fn: function() {\n                    requestAnimation({\n                        ele: clouds[i],\n                        attr: [\"left\", \"bottom\"],\n                        value: flag % 2 ? [left, bottom] : [-left, -bottom],\n                        time: timer,\n                        flag: false\n                    })\n                }\n            });\n        }\n\n        flag++;\n    }, 2000)\n```\n\n- **封装方法**\n\n```\n//———————————————————————————————————————————动画———————————————————————————————————————————————————\n//运动动画，调用Tween.js\n//ele: dom | class | id | tag  节点 | 类名 | id名 | 标签名，只支持选择一个节点，class类名以及标签名只能选择页面中第一个\n//attr: attribute 属性名\n//value: target value 目标值\n//time: duration 持续时间\n//tween: timing function 函数方程\n//flag: Boolean 判断是按值移动还是按位置移动,默认按位置移动\n//fn: callback 回调函数\n//增加返回值: 将内部参数对象返回，可以通过设置返回对象的属性stop为true打断动画\nfunction requestAnimation(obj) {\n    //—————————————————————————————————————参数设置—————————————————————————————————————————————\n    //默认属性\n    const parameter = {\n        ele: null,\n        attr: null,\n        value: null,\n        time: 1000,\n        tween: \"linear\",\n        flag: true,\n        stop: false,\n        fn: \"\"\n    }\n\n    //合并传入属性\n    Object.assign(parameter, obj); //覆盖重名属性\n\n    //—————————————————————————————————————动画设置—————————————————————————————————————————————\n    //创建运动方程初始参数,方便复用\n    let start = 0; //用于保存初始时间戳\n    let target = (typeof parameter.ele === \"string\" ? document.querySelector(parameter.ele) : parameter.ele), //目标节点\n        attr = parameter.attr, //目标属性\n        beginAttr = parseFloat(getComputedStyle(target)[attr]), //attr起始值\n        value = parameter.value, //运动目标值\n        count = value - beginAttr, //实际运动值\n        time = parameter.time, //运动持续时间,\n        tween = parameter.tween, //运动函数\n        flag = parameter.flag,\n        callback = parameter.fn, //回调函数\n        curVal = 0; //运动当前值\n\n    //判断传入函数是否为数组，多段运动\n    (function() {\n        if (attr instanceof Array) {\n            beginAttr = [];\n            count = [];\n            for (let i of attr) {\n                const val = parseFloat(getComputedStyle(target)[i]);\n                beginAttr.push(val);\n                count.push(value - val);\n            }\n        }\n        if (value instanceof Array) {\n            for (let i in value) {\n                count[i] = value[i] - beginAttr[i];\n            }\n        }\n    })();\n\n    //运动函数\n    function animate(timestamp) {\n        if (parameter.stop) return; //打断\n        //存储初始时间戳\n        if (!start) start = timestamp;\n        //已运动时间\n        let t = timestamp - start;\n        //判断多段运动\n        if (beginAttr instanceof Array) {\n            // const len = beginAttr.length //存数组长度，复用\n\n            //多段运动第1类——多属性，同目标，同时间/不同时间\n            if (typeof count === \"number\") { //同目标\n                //同时间\n                if (typeof time === \"number\") {\n                    if (t > time) t = time; //判断是否超出目标值\n\n                    //循环attr，分别赋值\n                    for (let i in beginAttr) {\n                        if (flag) curVal = Tween[tween](t, beginAttr[i], count, time); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置\n                        else curVal = Tween[tween](t, beginAttr[i], count + beginAttr[i], time); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离\n                        if (attr[i] === \"opacity\") target.style[attr[i]] = curVal; //给属性赋值\n                        else target.style[attr[i]] = curVal + \"px\"; //给属性赋值\n\n                        if (t < time) requestAnimationFrame(animate); //判断是否运动完\n                        else callback && callback(); //调用回调函数\n                    }\n                    return;\n                }\n\n                //不同时间\n                if (time instanceof Array) {\n                    //循环time，attr，分别赋值\n                    for (let i in beginAttr) {\n                        //错误判断\n                        if (!time[i] && time[i] !== 0) {\n                            throw new Error(\n                                \"The input time's length is not equal to attribute's length\");\n                        }\n\n                        //判断是否已经完成动画，完成则跳过此次循环\n                        if (parseFloat(getComputedStyle(target)[attr[i]]) === (typeof value === \"number\" ? value : value[i]))\n                            continue;\n                        // t = timestamp - start; //每次循环初始化t\n                        if (t > time[i]) t = time[i]; //判断是否超出目标值\n\n                        if (flag || attr[i] === \"opacity\") curVal = Tween[tween](t, beginAttr[i], count, i); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置\n                        else curVal = Tween[tween](t, beginAttr[i], count + beginAttr[i], i); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离\n                        if (attr[i] === \"opacity\") target.style[attr[i]] = curVal; //给属性赋值\n                        else target.style[attr[i]] = curVal + \"px\"; //给属性赋值\n                    }\n\n                    if (t < Math.max(...time)) requestAnimationFrame(animate); //判断函数是否运动完\n                    else callback && callback(); //如果已经执行完时间最长的动画，则调用回调函数\n                    return;\n                }\n            }\n\n            //多段运动第2类——多属性，不同目标，同时间/不同时间\n            if (count instanceof Array) {\n                //同时间\n                if (typeof time === \"number\") {\n\n                    if (t > time) t = time; //判断是否超出目标值\n\n                    for (let i in beginAttr) { //循环attr，count，分别赋值\n                        //错误判断\n                        if (!count[i] && count[i] !== 0) {\n                            throw new Error(\n                                \"The input value's length is not equal to attribute's length\");\n                        }\n\n                        if (flag || attr[i] === \"opacity\") curVal = Tween[tween](t, beginAttr[i], count[i], time); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置\n                        else curVal = Tween[tween](t, beginAttr[i], count[i] + beginAttr[i], time); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离\n                        if (attr[i] === \"opacity\") target.style[attr[i]] = curVal; //给属性赋值\n                        else target.style[attr[i]] = curVal + \"px\"; //给属性赋值\n                    }\n\n                    if (t < time) requestAnimationFrame(animate); //判断函数是否运动完\n                    else callback && callback(); //如果已经执行完时间最长的动画，则调用回调函数\n                    return;\n                }\n\n                //不同时间\n                if (time instanceof Array) {\n                    for (let i in beginAttr) {\n                        //错误判断\n                        if (!time[i] && time[i] !== 0) {\n                            throw new Error(\n                                \"The input time's length is not equal to attribute's length\");\n                        }\n\n                        //判断是否已经完成动画，完成则跳过此次循环\n                        if (parseFloat(getComputedStyle(target)[attr[i]]) === (typeof value === \"number\" ? value : value[i]))\n                            continue;\n\n                        if (t > time[i]) t = time[i]; //判断是否超出目标值\n\n                        //错误判断\n                        if (!count[i] && count[i] !== 0) {\n                            throw new Error(\n                                \"The input value's length is not equal to attribute's length\");\n                        }\n\n                        if (flag || attr[i] === \"opacity\") curVal = Tween[tween](t, beginAttr[i], count[i], time[i]); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置\n                        else curVal = Tween[tween](t, beginAttr[i], count[i] + beginAttr[i], time[i]); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离\n                        if (attr[i] === \"opacity\") target.style[attr[i]] = curVal;\n                        else target.style[attr[i]] = curVal + \"px\";\n                    }\n\n                    if (t < Math.max(...time)) requestAnimationFrame(animate);\n                    else callback && callback();\n                    return;\n                }\n            }\n\n        }\n\n        //单运动模式\n        if (t > time) t = time;\n        if (flag || attr === \"opacity\") curVal = Tween[tween](t, beginAttr, count, time); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置\n        else curVal = Tween[tween](t, beginAttr[i], count + beginAttr, time); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离\n        if (attr === \"opacity\") target.style[attr] = curVal;\n        else target.style[attr] = curVal + \"px\";\n\n        if (t < time) requestAnimationFrame(animate);\n        else callback && callback();\n\n    }\n\n    requestAnimationFrame(animate);\n    return parameter; //返回对象，供打断或其他用途\n}\n//Tween.js\n/*\n * t : time 已过时间\n * b : begin 起始值\n * c : count 总的运动值\n * d : duration 持续时间\n *\n * 曲线方程\n *\n * http://www.cnblogs.com/bluedream2009/archive/2010/06/19/1760909.html\n * */\n\nlet Tween = {\n    linear: function(t, b, c, d) { //匀速\n        return c * t / d + b;\n    },\n    easeIn: function(t, b, c, d) { //加速曲线\n        return c * (t /= d) * t + b;\n    },\n    easeOut: function(t, b, c, d) { //减速曲线\n        return -c * (t /= d) * (t - 2) + b;\n    },\n    easeBoth: function(t, b, c, d) { //加速减速曲线\n        if ((t /= d / 2) < 1) {\n            return c / 2 * t * t + b;\n        }\n        return -c / 2 * ((--t) * (t - 2) - 1) + b;\n    },\n    easeInStrong: function(t, b, c, d) { //加加速曲线\n        return c * (t /= d) * t * t * t + b;\n    },\n    easeOutStrong: function(t, b, c, d) { //减减速曲线\n        return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n    },\n    easeBothStrong: function(t, b, c, d) { //加加速减减速曲线\n        if ((t /= d / 2) < 1) {\n            return c / 2 * t * t * t * t + b;\n        }\n        return -c / 2 * ((t -= 2) * t * t * t - 2) + b;\n    },\n    elasticIn: function(t, b, c, d, a, p) { //正弦衰减曲线（弹动渐入）\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d) == 1) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * 0.3;\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            var s = p / 4;\n        } else {\n            var s = p / (2 * Math.PI) * Math.asin(c / a);\n        }\n        return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n    },\n    elasticOut: function(t, b, c, d, a, p) { //正弦增强曲线（弹动渐出）\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d) == 1) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * 0.3;\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            var s = p / 4;\n        } else {\n            var s = p / (2 * Math.PI) * Math.asin(c / a);\n        }\n        return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n    },\n    elasticBoth: function(t, b, c, d, a, p) {\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d / 2) == 2) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * (0.3 * 1.5);\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            var s = p / 4;\n        } else {\n            var s = p / (2 * Math.PI) * Math.asin(c / a);\n        }\n        if (t < 1) {\n            return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) *\n                Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n        }\n        return a * Math.pow(2, -10 * (t -= 1)) *\n            Math.sin((t * d - s) * (2 * Math.PI) / p) * 0.5 + c + b;\n    },\n    backIn: function(t, b, c, d, s) { //回退加速（回退渐入）\n        if (typeof s == 'undefined') {\n            s = 1.70158;\n        }\n        return c * (t /= d) * t * ((s + 1) * t - s) + b;\n    },\n    backOut: function(t, b, c, d, s) {\n        if (typeof s == 'undefined') {\n            s = 3.70158; //回缩的距离\n        }\n        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n    },\n    backBoth: function(t, b, c, d, s) {\n        if (typeof s == 'undefined') {\n            s = 1.70158;\n        }\n        if ((t /= d / 2) < 1) {\n            return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;\n        }\n        return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;\n    },\n    bounceIn: function(t, b, c, d) { //弹球减振（弹球渐出）\n        return c - Tween['bounceOut'](d - t, 0, c, d) + b;\n    },\n    bounceOut: function(t, b, c, d) {\n        if ((t /= d) < (1 / 2.75)) {\n            return c * (7.5625 * t * t) + b;\n        } else if (t < (2 / 2.75)) {\n            return c * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75) + b;\n        } else if (t < (2.5 / 2.75)) {\n            return c * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375) + b;\n        }\n        return c * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375) + b;\n    },\n    bounceBoth: function(t, b, c, d) {\n        if (t < d / 2) {\n            return Tween['bounceIn'](t * 2, 0, c, d) * 0.5 + b;\n        }\n        return Tween['bounceOut'](t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n    }\n}\n\n\n//———————————————————————————————————————————DOM操作———————————————————————————————————————————————————\n// 添加节点\n// ele: 父节点，支持输入变量，id值，class值，标签值。除变量外，其余值必须为字符串\n// node: 添加的标签名，值为字符串\n// n: 节点添加个数\n// className: 节点绑定的class名，，值为字符串，多个class名用空格隔开\n// boolean: 是否选中所有目标父节点。可选参数，不输入则判定为false，则只匹配选中的第一个节点\nfunction addChild(ele, node, n, className, boolean) {\n    //获取节点\n    let parent = null;\n\n    if (typeof ele !== \"string\") parent = ele;\n    else if (ele[0] === \"#\") parent = document.getElementById(ele.slice(1));\n    else if (ele[0] === \".\") {\n        if (boolean === false) parent = document.getElementsByClassName(ele.slice(1))[0];\n        else parent = document.getElementsByClassName(ele.slice(1));\n    } else {\n        if (boolean === false) parent = docuemnt.getElementsByTagName(ele)[0];\n        else parent = document.getElementsByTagNameNS(ele);\n    }\n\n    //声明用于存储父节点及子节点的对象\n    const obj = {\n        \"parent\": parent,\n        \"children\": []\n    };\n\n    //添加节点\n    if (boolean) {\n        for (let i = 0; i < parent.length; i++) {\n            //创建容器碎片\n            const fragment = document.createDocumentFragment();\n            //保存子节点，用于返回值\n            obj.children[i] = [];\n\n            for (let j = 0; j < n; j++) {\n                const target = document.createElement(node);\n                target.className = className;\n                fragment.appendChild(target);\n                //添加子节点到数组，用于返回值\n                obj.children[i][j] = target;\n            }\n\n            parent[i].appendChild(fragment)\n        }\n    } else {\n        //创建碎片容器\n        const fragment = document.createDocumentFragment();\n\n        for (let i = 0; i < n; i++) {\n            const target = document.createElement(node);\n            target.className = className;\n            fragment.appendChild(target);\n            //添加子节点，用于返回值\n            obj.children[i] = target;\n        }\n        //将碎片容器一次性添加到父节点\n        parent.appendChild(fragment);\n    }\n\n    //返回参数，供动画函数调用\n    return obj;\n}\n\n```\n\n### 3、案例解析\n\n- **HTML**\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由于节点很多，并且我想尽量做得逼真有趣一点，就给节点加了随机位置。所以节点的输出都是用 JS 控制的，HTML 这边只写了几个父元素盒子，加上相应的 id 名和 class 类名，结构相对简单。\n\n- **CSS**\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CSS 部分的难点就是流星的样式和用圈圈画云层，然后将云层堆叠出立体效果。<br><br>\n\n> **首先说一下流星的样式：**\n\n```\n#sky .star {\n     position: absolute;\n     opacity: 0;\n     z-index: 10000;\n }\n\n .star::after {\n     content: \"\";\n     display: block;\n     border: solid;\n     border-width: 2px 0 2px 80px;\n     /*流星随长度逐渐缩小*/\n     border-color: transparent transparent transparent rgba(255, 255, 255, 1);\n     border-radius: 2px 0 0 2px;\n     transform: rotate(-45deg);\n     transform-origin: 0 0 0;\n     box-shadow: 0 0 20px rgba(255, 255, 255, .3);\n }\n\n```\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;先提取了公共样式，添加定位属性；<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;然后在 star 后通过 after 伪类添加流星，**用 border 特性画：**<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**1）模型绘制：** **border-width**的顺序为四边**top、right、bottom、left**，同理**border-color**的顺序也为四边**top、right、bottom、left**。这样将 border-width 与 border-color 一一对应后，就能看出**2px 是流星的宽度，80px 是流星的长度，而 0px 就是流星的尾巴**。这样就形成了一个**头部 2px 宽，尾部 0px，长度 80px 的流星模型**;<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**2）稍微逼真：** 通过**border-radius**给流星的头部增加个圆角，让它看起来 emmmmmmm 更逼真？最后通过**roteta**旋转一个角度，让它看起来像是往下掉;<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**3）增加闪光：** 通过**box-shadow** 给流星增加一点光晕，让它看起来有闪光的效果;<br>\n<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过以上 3 步，一个流星就画好了。<br><br>\n\n> **然后是画云：**\n\n```\n因为云的代码比较长，这里就不贴出来了。方法无非是通过一个一个的圆，相互叠加覆盖，完成一个云朵的形状;\n完成一个云层之后，copy一个，然后多个云层通过rotate、opacity、left定位等，做出一个渐隐叠加的立体效果;\n```\n\n- **JS**\n\n**_JS 部分以流星举例说明_**\n\n```\nsetInterval(function() {\n    const obj = addChild(\"#sky\", \"div\", 2, \"star\"); //插入流星\n\n    for (let i = 0; i < obj.children.length; i++) {\n        //随机位置\n        const top = -50 + Math.random() * 200 + \"px\",\n            left = 200 + Math.random() * 1200 + \"px\",\n            scale = 0.3 + Math.random() * 0.5;\n        const timer = 1000 + Math.random() * 1000;\n\n        obj.children[i].style.top = top;\n        obj.children[i].style.left = left;\n        obj.children[i].style.transform = `scale(${scale})`;\n\n        //添加动画\n        requestAnimation({\n            ele: obj.children[i],\n            attr: [\"top\", \"left\", \"opacity\"],\n            value: [150, -150, .8],\n            time: timer,\n            flag: false,\n            fn: function() {\n                requestAnimation({\n                    ele: obj.children[i],\n                    attr: [\"top\", \"left\", \"opacity\"],\n                    value: [150, -150, 0],\n                    time: timer,\n                    flag: false,\n                    fn: () => {\n                        obj.parent.removeChild(obj.children[i]); //动画结束删除节点\n                    }\n                })\n            }\n        });\n    }\n\n}, 1000);\n\n```\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这里边用到了我自己封装的**两个方法**，一个是基于 requestAnimationFrame 的**requestAnimation**，以及基于 appendChild 的**addChild**。<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为了达成星星位置随机的效果，通过定时器 setInterval 不停的**插入**与**删除**流星：<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**首先**，每次添加**2 个流星**到页面，但是**定时器的间隔时间小于流星的动画时间**，这样就能保证页面中的流星的数量不是一个固定值，但肯定是大于 2 的。不然一次 2 个流星略显冷清;<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**然后**，通过 for 循环（也可以用 for-in，for-of，都行。for-of 最简单）给每个新添加到页面中的流星一个随机的位置（top、left）、随机的大小（scale）、随机的动画执行时间（timer）;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**最后**，在 for 循环中，给每个新添加到页面中的流星加上动画，并通过回调函数在执行完动画后删除节点。这里要注意的是，动画要分成**两个阶段**（**出现**与**消失**，主要是**opacity**控制）。另外我这里的处理，每个流星都移动相同的距离**300px**，这个距离我觉得也可以通过随机数控制，但我犯了个懒，就没有做。\n\n### 4、小问题\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;目前我发现的问题有**2 个：**<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;一是 DOM 操作本身的问题。页面不停的添加与删除节点，造成不停地**回流与重绘**，很耗性能;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;二是 requestAnimationFrame 本身的问题。因为定时器不断在添加节点，而 requestAnimationFrame 的特性——**当离开当前页面去浏览其他页面时，动画会暂停**。这就造成了一个问题，**节点一直在加，但动画全停在那没有执行**。那么下次再回到这个页面的时候，就 boom!！！动画就炸了，你会看到画面一卡，很多小蝌蚪集体出动去找妈妈;\n\n### 5、结语\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这个小案例虽然从难度上来看很简单，但是它可拓展性很高——比如表个白啊、寄个相思、耍个浪漫啊等等（手动狗头 doge），而且用纯 CSS 也可以实现（我也写了一版纯 CSS 的，因为不能随机位置随机大小，所以看起来比较静态一点，就不贴了）。所以对于了解 CSS 动画与 JS 动画，是个很不错的练手小案例。<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;感谢看完这篇文章的可爱的人儿，希望你能从中获得灵感~如果能给你带来帮助，那我是极高兴地~如果你把灵感告诉我，那我就 can't happniess anymore 了~<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最后，再次感谢，如果有优化写法，欢迎指导~\n","slug":"前端案例分享（一）：CSS-JS实现流星雨动画","published":1,"updated":"2018-12-25T15:36:38.923Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjq80g9vg000hw4vuxy7c7nqd","content":"<h3 id=\"引言\"><a href=\"#引言\" class=\"headerlink\" title=\"引言\"></a>引言</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;平常会做一些有意思的小案例练手，通常都会发到 codepen 上，但是 codepen 不能写分析。<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;所以就在博客上开个案例分享系列，对 demo 做个剖析。目的以分享为主，然后也希望各路大神能给出改进的想法，在 review 中提升技术，发现乐趣~</p>\n<h3 id=\"1、效果图\"><a href=\"#1、效果图\" class=\"headerlink\" title=\"1、效果图\"></a>1、效果图</h3><p>完整效果，请移步 <a href=\"https://codepen.io/HaiLoongLyu/full/Lgqbzy/\" target=\"_blank\" rel=\"noopener\">codepen-流星雨案例</a><br><br>纯 CSS 案例及本篇案例完整源码，请移步<a href=\"https://github.com/LyuHaiLoong/Demos\" target=\"_blank\" rel=\"noopener\">The night of the metero</a></p>\n<p><img src=\"https://raw.githubusercontent.com/LyuHaiLoong/lyuhailoong.github.io/master/images/post/%E5%89%8D%E7%AB%AF%E6%A1%88%E4%BE%8B%E5%88%86%E4%BA%AB%EF%BC%88%E4%B8%80%EF%BC%89.gif\" alt=\"\"><br><a id=\"more\"></a></p>\n<h3 id=\"2、源码\"><a href=\"#2、源码\" class=\"headerlink\" title=\"2、源码\"></a>2、源码</h3><ul>\n<li><strong>HTML</strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;div class=&quot;container&quot;&gt;</span><br><span class=\"line\">        &lt;div id=&quot;mask&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div id=&quot;sky&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div id=&quot;moon&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div id=&quot;stars&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div class=&quot;cloud cloud-1&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div class=&quot;cloud cloud-2&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div class=&quot;cloud cloud-3&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong>CSS</strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> /* ------------reset------------ */</span><br><span class=\"line\"></span><br><span class=\"line\">* &#123;</span><br><span class=\"line\">    margin: 0;</span><br><span class=\"line\">    padding: 0;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">html,</span><br><span class=\"line\">body &#123;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    min-width: 1000px;</span><br><span class=\"line\">    height: 100%;</span><br><span class=\"line\">    min-height: 400px;</span><br><span class=\"line\">    overflow: hidden;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">/*  ------------画布 ------------ */</span><br><span class=\"line\">.container &#123;</span><br><span class=\"line\">    position: relative;</span><br><span class=\"line\">    height: 100%;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">/* 遮罩层 */</span><br><span class=\"line\"></span><br><span class=\"line\">#mask &#123;</span><br><span class=\"line\">    position: absolute;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    height: 100%;</span><br><span class=\"line\">    background: rgba(0, 0, 0, .8);</span><br><span class=\"line\">    z-index: 900;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">/* 天空背景 */</span><br><span class=\"line\"></span><br><span class=\"line\">#sky &#123;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    height: 100%;</span><br><span class=\"line\">    background: linear-gradient(rgba(0, 150, 255, 1), rgba(0, 150, 255, .8), rgba(0, 150, 255, .5));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">/* 月亮 */</span><br><span class=\"line\"></span><br><span class=\"line\">#moon &#123;</span><br><span class=\"line\">    position: absolute;</span><br><span class=\"line\">    top: 50px;</span><br><span class=\"line\">    right: 200px;</span><br><span class=\"line\">    width: 120px;</span><br><span class=\"line\">    height: 120px;</span><br><span class=\"line\">    background: rgba(251, 255, 25, 0.938);</span><br><span class=\"line\">    border-radius: 50%;</span><br><span class=\"line\">    box-shadow: 0 0 20px rgba(251, 255, 25, 0.5);</span><br><span class=\"line\">    z-index: 9999;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">/* 闪烁星星 */</span><br><span class=\"line\"></span><br><span class=\"line\">.blink &#123;</span><br><span class=\"line\">    position: absolute;</span><br><span class=\"line\">    background: rgb(255, 255, 255);</span><br><span class=\"line\">    border-radius: 50%;</span><br><span class=\"line\">    box-shadow: 0 0 5px rgb(255, 255, 255);</span><br><span class=\"line\">    opacity: 0;</span><br><span class=\"line\">    z-index: 10000;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">/* 流星 */</span><br><span class=\"line\"></span><br><span class=\"line\">.star &#123;</span><br><span class=\"line\">    position: absolute;</span><br><span class=\"line\">    opacity: 0;</span><br><span class=\"line\">    z-index: 10000;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.star::after &#123;</span><br><span class=\"line\">    content: &quot;&quot;;</span><br><span class=\"line\">    display: block;</span><br><span class=\"line\">    border: solid;</span><br><span class=\"line\">    border-width: 2px 0 2px 80px;</span><br><span class=\"line\">    /*流星随长度逐渐缩小*/</span><br><span class=\"line\">    border-color: transparent transparent transparent rgba(255, 255, 255, 1);</span><br><span class=\"line\">    border-radius: 2px 0 0 2px;</span><br><span class=\"line\">    transform: rotate(-45deg);</span><br><span class=\"line\">    transform-origin: 0 0 0;</span><br><span class=\"line\">    box-shadow: 0 0 20px rgba(255, 255, 255, .3);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">/* 云 */</span><br><span class=\"line\"></span><br><span class=\"line\">.cloud &#123;</span><br><span class=\"line\">    position: absolute;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    height: 100px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.cloud-1 &#123;</span><br><span class=\"line\">    bottom: -100px;</span><br><span class=\"line\">    z-index: 1000;</span><br><span class=\"line\">    opacity: 1;</span><br><span class=\"line\">    transform: scale(1.5);</span><br><span class=\"line\">    -webkit-transform: scale(1.5);</span><br><span class=\"line\">    -moz-transform: scale(1.5);</span><br><span class=\"line\">    -ms-transform: scale(1.5);</span><br><span class=\"line\">    -o-transform: scale(1.5);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.cloud-2 &#123;</span><br><span class=\"line\">    left: -100px;</span><br><span class=\"line\">    bottom: -50px;</span><br><span class=\"line\">    z-index: 999;</span><br><span class=\"line\">    opacity: .5;</span><br><span class=\"line\">    transform: rotate(7deg);</span><br><span class=\"line\">    -webkit-transform: rotate(7deg);</span><br><span class=\"line\">    -moz-transform: rotate(7deg);</span><br><span class=\"line\">    -ms-transform: rotate(7deg);</span><br><span class=\"line\">    -o-transform: rotate(7deg);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.cloud-3 &#123;</span><br><span class=\"line\">    left: 120px;</span><br><span class=\"line\">    bottom: -50px;</span><br><span class=\"line\">    z-index: 999;</span><br><span class=\"line\">    opacity: .1;</span><br><span class=\"line\">    transform: rotate(-10deg);</span><br><span class=\"line\">    -webkit-transform: rotate(-10deg);</span><br><span class=\"line\">    -moz-transform: rotate(-10deg);</span><br><span class=\"line\">    -ms-transform: rotate(-10deg);</span><br><span class=\"line\">    -o-transform: rotate(-10deg);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle &#123;</span><br><span class=\"line\">    position: absolute;</span><br><span class=\"line\">    border-radius: 50%;</span><br><span class=\"line\">    background: #fff;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-1 &#123;</span><br><span class=\"line\">    width: 100px;</span><br><span class=\"line\">    height: 100px;</span><br><span class=\"line\">    top: -50px;</span><br><span class=\"line\">    left: 10px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-2 &#123;</span><br><span class=\"line\">    width: 150px;</span><br><span class=\"line\">    height: 150px;</span><br><span class=\"line\">    top: -50px;</span><br><span class=\"line\">    left: 30px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-3 &#123;</span><br><span class=\"line\">    width: 300px;</span><br><span class=\"line\">    height: 300px;</span><br><span class=\"line\">    top: -100px;</span><br><span class=\"line\">    left: 80px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-4 &#123;</span><br><span class=\"line\">    width: 200px;</span><br><span class=\"line\">    height: 200px;</span><br><span class=\"line\">    top: -60px;</span><br><span class=\"line\">    left: 300px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-5 &#123;</span><br><span class=\"line\">    width: 80px;</span><br><span class=\"line\">    height: 80px;</span><br><span class=\"line\">    top: -30px;</span><br><span class=\"line\">    left: 450px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-6 &#123;</span><br><span class=\"line\">    width: 200px;</span><br><span class=\"line\">    height: 200px;</span><br><span class=\"line\">    top: -50px;</span><br><span class=\"line\">    left: 500px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-7 &#123;</span><br><span class=\"line\">    width: 100px;</span><br><span class=\"line\">    height: 100px;</span><br><span class=\"line\">    top: -10px;</span><br><span class=\"line\">    left: 650px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-8 &#123;</span><br><span class=\"line\">    width: 50px;</span><br><span class=\"line\">    height: 50px;</span><br><span class=\"line\">    top: 30px;</span><br><span class=\"line\">    left: 730px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-9 &#123;</span><br><span class=\"line\">    width: 100px;</span><br><span class=\"line\">    height: 100px;</span><br><span class=\"line\">    top: 30px;</span><br><span class=\"line\">    left: 750px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-10 &#123;</span><br><span class=\"line\">    width: 150px;</span><br><span class=\"line\">    height: 150px;</span><br><span class=\"line\">    top: 10px;</span><br><span class=\"line\">    left: 800px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-11 &#123;</span><br><span class=\"line\">    width: 150px;</span><br><span class=\"line\">    height: 150px;</span><br><span class=\"line\">    top: -30px;</span><br><span class=\"line\">    left: 850px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-12 &#123;</span><br><span class=\"line\">    width: 250px;</span><br><span class=\"line\">    height: 250px;</span><br><span class=\"line\">    top: -50px;</span><br><span class=\"line\">    left: 900px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-13 &#123;</span><br><span class=\"line\">    width: 200px;</span><br><span class=\"line\">    height: 200px;</span><br><span class=\"line\">    top: -40px;</span><br><span class=\"line\">    left: 1000px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-14 &#123;</span><br><span class=\"line\">    width: 300px;</span><br><span class=\"line\">    height: 300px;</span><br><span class=\"line\">    top: -70px;</span><br><span class=\"line\">    left: 1100px;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong>JS</strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//流星动画</span><br><span class=\"line\">setInterval(function() &#123;</span><br><span class=\"line\">    const obj = addChild(&quot;#sky&quot;, &quot;div&quot;, 2, &quot;star&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">    for (let i = 0; i &lt; obj.children.length; i++) &#123;</span><br><span class=\"line\">        const top = -50 + Math.random() * 200 + &quot;px&quot;,</span><br><span class=\"line\">            left = 200 + Math.random() * 1200 + &quot;px&quot;,</span><br><span class=\"line\">            scale = 0.3 + Math.random() * 0.5;</span><br><span class=\"line\">        const timer = 1000 + Math.random() * 1000;</span><br><span class=\"line\"></span><br><span class=\"line\">        obj.children[i].style.top = top;</span><br><span class=\"line\">        obj.children[i].style.left = left;</span><br><span class=\"line\">        obj.children[i].style.transform = `scale($&#123;scale&#125;)`;</span><br><span class=\"line\"></span><br><span class=\"line\">        requestAnimation(&#123;</span><br><span class=\"line\">            ele: obj.children[i],</span><br><span class=\"line\">            attr: [&quot;top&quot;, &quot;left&quot;, &quot;opacity&quot;],</span><br><span class=\"line\">            value: [150, -150, .8],</span><br><span class=\"line\">            time: timer,</span><br><span class=\"line\">            flag: false,</span><br><span class=\"line\">            fn: function() &#123;</span><br><span class=\"line\">                requestAnimation(&#123;</span><br><span class=\"line\">                    ele: obj.children[i],</span><br><span class=\"line\">                    attr: [&quot;top&quot;, &quot;left&quot;, &quot;opacity&quot;],</span><br><span class=\"line\">                    value: [150, -150, 0],</span><br><span class=\"line\">                    time: timer,</span><br><span class=\"line\">                    flag: false,</span><br><span class=\"line\">                    fn: () =&gt; &#123;</span><br><span class=\"line\">                        obj.parent.removeChild(obj.children[i]);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;, 1000);</span><br><span class=\"line\"></span><br><span class=\"line\">//闪烁星星动画</span><br><span class=\"line\">setInterval(function() &#123;</span><br><span class=\"line\">    const obj = addChild(&quot;#stars&quot;, &quot;div&quot;, 2, &quot;blink&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">    for (let i = 0; i &lt; obj.children.length; i++) &#123;</span><br><span class=\"line\">        const top = -50 + Math.random() * 500 + &quot;px&quot;,</span><br><span class=\"line\">            left = 200 + Math.random() * 1200 + &quot;px&quot;,</span><br><span class=\"line\">            round = 1 + Math.random() * 2 + &quot;px&quot;;</span><br><span class=\"line\">        const timer = 1000 + Math.random() * 4000;</span><br><span class=\"line\"></span><br><span class=\"line\">        obj.children[i].style.top = top;</span><br><span class=\"line\">        obj.children[i].style.left = left;</span><br><span class=\"line\">        obj.children[i].style.width = round;</span><br><span class=\"line\">        obj.children[i].style.height = round;</span><br><span class=\"line\"></span><br><span class=\"line\">        requestAnimation(&#123;</span><br><span class=\"line\">            ele: obj.children[i],</span><br><span class=\"line\">            attr: &quot;opacity&quot;,</span><br><span class=\"line\">            value: .5,</span><br><span class=\"line\">            time: timer,</span><br><span class=\"line\">            flag: false,</span><br><span class=\"line\">            fn: function() &#123;</span><br><span class=\"line\">                requestAnimation(&#123;</span><br><span class=\"line\">                    ele: obj.children[i],</span><br><span class=\"line\">                    attr: &quot;opacity&quot;,</span><br><span class=\"line\">                    value: 0,</span><br><span class=\"line\">                    time: timer,</span><br><span class=\"line\">                    flag: false,</span><br><span class=\"line\">                    fn: function() &#123;</span><br><span class=\"line\">                        obj.parent.removeChild(obj.children[i]);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;, 1000);</span><br><span class=\"line\"></span><br><span class=\"line\">//月亮移动</span><br><span class=\"line\">requestAnimation(&#123;</span><br><span class=\"line\">    ele: &quot;#moon&quot;,</span><br><span class=\"line\">    attr: &quot;right&quot;,</span><br><span class=\"line\">    value: 1200,</span><br><span class=\"line\">    time: 10000000,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">// 添加云</span><br><span class=\"line\">const clouds = addChild(&quot;.cloud&quot;, &quot;div&quot;, 14, &quot;circle&quot;, true);</span><br><span class=\"line\">for (let i = 0; i &lt; clouds.children.length; i++) &#123;</span><br><span class=\"line\">    for (let j = 0; j &lt; clouds.children[i].length;) &#123;</span><br><span class=\"line\">        clouds.children[i][j].classList.add(`circle-$&#123;++j&#125;`);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//云动画</span><br><span class=\"line\"></span><br><span class=\"line\">let flag = 1;</span><br><span class=\"line\">setInterval(</span><br><span class=\"line\">    function() &#123;</span><br><span class=\"line\">        const clouds = document.querySelectorAll(&quot;.cloud&quot;);</span><br><span class=\"line\">        const left = Math.random() * 5;</span><br><span class=\"line\">        bottom = Math.random() * 5;</span><br><span class=\"line\"></span><br><span class=\"line\">        let timer = 0;</span><br><span class=\"line\">        for (let i = 0; i &lt; clouds.length; i++) &#123;</span><br><span class=\"line\">            requestAnimation(&#123;</span><br><span class=\"line\">                ele: clouds[i],</span><br><span class=\"line\">                attr: [&quot;left&quot;, &quot;bottom&quot;],</span><br><span class=\"line\">                value: flag % 2 ? [-left, -bottom] : [left, bottom],</span><br><span class=\"line\">                time: timer += 500,</span><br><span class=\"line\">                flag: false,</span><br><span class=\"line\">                fn: function() &#123;</span><br><span class=\"line\">                    requestAnimation(&#123;</span><br><span class=\"line\">                        ele: clouds[i],</span><br><span class=\"line\">                        attr: [&quot;left&quot;, &quot;bottom&quot;],</span><br><span class=\"line\">                        value: flag % 2 ? [left, bottom] : [-left, -bottom],</span><br><span class=\"line\">                        time: timer,</span><br><span class=\"line\">                        flag: false</span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        flag++;</span><br><span class=\"line\">    &#125;, 2000)</span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong>封装方法</strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//———————————————————————————————————————————动画———————————————————————————————————————————————————</span><br><span class=\"line\">//运动动画，调用Tween.js</span><br><span class=\"line\">//ele: dom | class | id | tag  节点 | 类名 | id名 | 标签名，只支持选择一个节点，class类名以及标签名只能选择页面中第一个</span><br><span class=\"line\">//attr: attribute 属性名</span><br><span class=\"line\">//value: target value 目标值</span><br><span class=\"line\">//time: duration 持续时间</span><br><span class=\"line\">//tween: timing function 函数方程</span><br><span class=\"line\">//flag: Boolean 判断是按值移动还是按位置移动,默认按位置移动</span><br><span class=\"line\">//fn: callback 回调函数</span><br><span class=\"line\">//增加返回值: 将内部参数对象返回，可以通过设置返回对象的属性stop为true打断动画</span><br><span class=\"line\">function requestAnimation(obj) &#123;</span><br><span class=\"line\">    //—————————————————————————————————————参数设置—————————————————————————————————————————————</span><br><span class=\"line\">    //默认属性</span><br><span class=\"line\">    const parameter = &#123;</span><br><span class=\"line\">        ele: null,</span><br><span class=\"line\">        attr: null,</span><br><span class=\"line\">        value: null,</span><br><span class=\"line\">        time: 1000,</span><br><span class=\"line\">        tween: &quot;linear&quot;,</span><br><span class=\"line\">        flag: true,</span><br><span class=\"line\">        stop: false,</span><br><span class=\"line\">        fn: &quot;&quot;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //合并传入属性</span><br><span class=\"line\">    Object.assign(parameter, obj); //覆盖重名属性</span><br><span class=\"line\"></span><br><span class=\"line\">    //—————————————————————————————————————动画设置—————————————————————————————————————————————</span><br><span class=\"line\">    //创建运动方程初始参数,方便复用</span><br><span class=\"line\">    let start = 0; //用于保存初始时间戳</span><br><span class=\"line\">    let target = (typeof parameter.ele === &quot;string&quot; ? document.querySelector(parameter.ele) : parameter.ele), //目标节点</span><br><span class=\"line\">        attr = parameter.attr, //目标属性</span><br><span class=\"line\">        beginAttr = parseFloat(getComputedStyle(target)[attr]), //attr起始值</span><br><span class=\"line\">        value = parameter.value, //运动目标值</span><br><span class=\"line\">        count = value - beginAttr, //实际运动值</span><br><span class=\"line\">        time = parameter.time, //运动持续时间,</span><br><span class=\"line\">        tween = parameter.tween, //运动函数</span><br><span class=\"line\">        flag = parameter.flag,</span><br><span class=\"line\">        callback = parameter.fn, //回调函数</span><br><span class=\"line\">        curVal = 0; //运动当前值</span><br><span class=\"line\"></span><br><span class=\"line\">    //判断传入函数是否为数组，多段运动</span><br><span class=\"line\">    (function() &#123;</span><br><span class=\"line\">        if (attr instanceof Array) &#123;</span><br><span class=\"line\">            beginAttr = [];</span><br><span class=\"line\">            count = [];</span><br><span class=\"line\">            for (let i of attr) &#123;</span><br><span class=\"line\">                const val = parseFloat(getComputedStyle(target)[i]);</span><br><span class=\"line\">                beginAttr.push(val);</span><br><span class=\"line\">                count.push(value - val);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (value instanceof Array) &#123;</span><br><span class=\"line\">            for (let i in value) &#123;</span><br><span class=\"line\">                count[i] = value[i] - beginAttr[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)();</span><br><span class=\"line\"></span><br><span class=\"line\">    //运动函数</span><br><span class=\"line\">    function animate(timestamp) &#123;</span><br><span class=\"line\">        if (parameter.stop) return; //打断</span><br><span class=\"line\">        //存储初始时间戳</span><br><span class=\"line\">        if (!start) start = timestamp;</span><br><span class=\"line\">        //已运动时间</span><br><span class=\"line\">        let t = timestamp - start;</span><br><span class=\"line\">        //判断多段运动</span><br><span class=\"line\">        if (beginAttr instanceof Array) &#123;</span><br><span class=\"line\">            // const len = beginAttr.length //存数组长度，复用</span><br><span class=\"line\"></span><br><span class=\"line\">            //多段运动第1类——多属性，同目标，同时间/不同时间</span><br><span class=\"line\">            if (typeof count === &quot;number&quot;) &#123; //同目标</span><br><span class=\"line\">                //同时间</span><br><span class=\"line\">                if (typeof time === &quot;number&quot;) &#123;</span><br><span class=\"line\">                    if (t &gt; time) t = time; //判断是否超出目标值</span><br><span class=\"line\"></span><br><span class=\"line\">                    //循环attr，分别赋值</span><br><span class=\"line\">                    for (let i in beginAttr) &#123;</span><br><span class=\"line\">                        if (flag) curVal = Tween[tween](t, beginAttr[i], count, time); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置</span><br><span class=\"line\">                        else curVal = Tween[tween](t, beginAttr[i], count + beginAttr[i], time); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离</span><br><span class=\"line\">                        if (attr[i] === &quot;opacity&quot;) target.style[attr[i]] = curVal; //给属性赋值</span><br><span class=\"line\">                        else target.style[attr[i]] = curVal + &quot;px&quot;; //给属性赋值</span><br><span class=\"line\"></span><br><span class=\"line\">                        if (t &lt; time) requestAnimationFrame(animate); //判断是否运动完</span><br><span class=\"line\">                        else callback &amp;&amp; callback(); //调用回调函数</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    return;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                //不同时间</span><br><span class=\"line\">                if (time instanceof Array) &#123;</span><br><span class=\"line\">                    //循环time，attr，分别赋值</span><br><span class=\"line\">                    for (let i in beginAttr) &#123;</span><br><span class=\"line\">                        //错误判断</span><br><span class=\"line\">                        if (!time[i] &amp;&amp; time[i] !== 0) &#123;</span><br><span class=\"line\">                            throw new Error(</span><br><span class=\"line\">                                &quot;The input time&apos;s length is not equal to attribute&apos;s length&quot;);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                        //判断是否已经完成动画，完成则跳过此次循环</span><br><span class=\"line\">                        if (parseFloat(getComputedStyle(target)[attr[i]]) === (typeof value === &quot;number&quot; ? value : value[i]))</span><br><span class=\"line\">                            continue;</span><br><span class=\"line\">                        // t = timestamp - start; //每次循环初始化t</span><br><span class=\"line\">                        if (t &gt; time[i]) t = time[i]; //判断是否超出目标值</span><br><span class=\"line\"></span><br><span class=\"line\">                        if (flag || attr[i] === &quot;opacity&quot;) curVal = Tween[tween](t, beginAttr[i], count, i); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置</span><br><span class=\"line\">                        else curVal = Tween[tween](t, beginAttr[i], count + beginAttr[i], i); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离</span><br><span class=\"line\">                        if (attr[i] === &quot;opacity&quot;) target.style[attr[i]] = curVal; //给属性赋值</span><br><span class=\"line\">                        else target.style[attr[i]] = curVal + &quot;px&quot;; //给属性赋值</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                    if (t &lt; Math.max(...time)) requestAnimationFrame(animate); //判断函数是否运动完</span><br><span class=\"line\">                    else callback &amp;&amp; callback(); //如果已经执行完时间最长的动画，则调用回调函数</span><br><span class=\"line\">                    return;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            //多段运动第2类——多属性，不同目标，同时间/不同时间</span><br><span class=\"line\">            if (count instanceof Array) &#123;</span><br><span class=\"line\">                //同时间</span><br><span class=\"line\">                if (typeof time === &quot;number&quot;) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">                    if (t &gt; time) t = time; //判断是否超出目标值</span><br><span class=\"line\"></span><br><span class=\"line\">                    for (let i in beginAttr) &#123; //循环attr，count，分别赋值</span><br><span class=\"line\">                        //错误判断</span><br><span class=\"line\">                        if (!count[i] &amp;&amp; count[i] !== 0) &#123;</span><br><span class=\"line\">                            throw new Error(</span><br><span class=\"line\">                                &quot;The input value&apos;s length is not equal to attribute&apos;s length&quot;);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                        if (flag || attr[i] === &quot;opacity&quot;) curVal = Tween[tween](t, beginAttr[i], count[i], time); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置</span><br><span class=\"line\">                        else curVal = Tween[tween](t, beginAttr[i], count[i] + beginAttr[i], time); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离</span><br><span class=\"line\">                        if (attr[i] === &quot;opacity&quot;) target.style[attr[i]] = curVal; //给属性赋值</span><br><span class=\"line\">                        else target.style[attr[i]] = curVal + &quot;px&quot;; //给属性赋值</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                    if (t &lt; time) requestAnimationFrame(animate); //判断函数是否运动完</span><br><span class=\"line\">                    else callback &amp;&amp; callback(); //如果已经执行完时间最长的动画，则调用回调函数</span><br><span class=\"line\">                    return;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                //不同时间</span><br><span class=\"line\">                if (time instanceof Array) &#123;</span><br><span class=\"line\">                    for (let i in beginAttr) &#123;</span><br><span class=\"line\">                        //错误判断</span><br><span class=\"line\">                        if (!time[i] &amp;&amp; time[i] !== 0) &#123;</span><br><span class=\"line\">                            throw new Error(</span><br><span class=\"line\">                                &quot;The input time&apos;s length is not equal to attribute&apos;s length&quot;);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                        //判断是否已经完成动画，完成则跳过此次循环</span><br><span class=\"line\">                        if (parseFloat(getComputedStyle(target)[attr[i]]) === (typeof value === &quot;number&quot; ? value : value[i]))</span><br><span class=\"line\">                            continue;</span><br><span class=\"line\"></span><br><span class=\"line\">                        if (t &gt; time[i]) t = time[i]; //判断是否超出目标值</span><br><span class=\"line\"></span><br><span class=\"line\">                        //错误判断</span><br><span class=\"line\">                        if (!count[i] &amp;&amp; count[i] !== 0) &#123;</span><br><span class=\"line\">                            throw new Error(</span><br><span class=\"line\">                                &quot;The input value&apos;s length is not equal to attribute&apos;s length&quot;);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                        if (flag || attr[i] === &quot;opacity&quot;) curVal = Tween[tween](t, beginAttr[i], count[i], time[i]); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置</span><br><span class=\"line\">                        else curVal = Tween[tween](t, beginAttr[i], count[i] + beginAttr[i], time[i]); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离</span><br><span class=\"line\">                        if (attr[i] === &quot;opacity&quot;) target.style[attr[i]] = curVal;</span><br><span class=\"line\">                        else target.style[attr[i]] = curVal + &quot;px&quot;;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                    if (t &lt; Math.max(...time)) requestAnimationFrame(animate);</span><br><span class=\"line\">                    else callback &amp;&amp; callback();</span><br><span class=\"line\">                    return;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        //单运动模式</span><br><span class=\"line\">        if (t &gt; time) t = time;</span><br><span class=\"line\">        if (flag || attr === &quot;opacity&quot;) curVal = Tween[tween](t, beginAttr, count, time); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置</span><br><span class=\"line\">        else curVal = Tween[tween](t, beginAttr[i], count + beginAttr, time); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离</span><br><span class=\"line\">        if (attr === &quot;opacity&quot;) target.style[attr] = curVal;</span><br><span class=\"line\">        else target.style[attr] = curVal + &quot;px&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">        if (t &lt; time) requestAnimationFrame(animate);</span><br><span class=\"line\">        else callback &amp;&amp; callback();</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    requestAnimationFrame(animate);</span><br><span class=\"line\">    return parameter; //返回对象，供打断或其他用途</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//Tween.js</span><br><span class=\"line\">/*</span><br><span class=\"line\"> * t : time 已过时间</span><br><span class=\"line\"> * b : begin 起始值</span><br><span class=\"line\"> * c : count 总的运动值</span><br><span class=\"line\"> * d : duration 持续时间</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * 曲线方程</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * http://www.cnblogs.com/bluedream2009/archive/2010/06/19/1760909.html</span><br><span class=\"line\"> * */</span><br><span class=\"line\"></span><br><span class=\"line\">let Tween = &#123;</span><br><span class=\"line\">    linear: function(t, b, c, d) &#123; //匀速</span><br><span class=\"line\">        return c * t / d + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    easeIn: function(t, b, c, d) &#123; //加速曲线</span><br><span class=\"line\">        return c * (t /= d) * t + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    easeOut: function(t, b, c, d) &#123; //减速曲线</span><br><span class=\"line\">        return -c * (t /= d) * (t - 2) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    easeBoth: function(t, b, c, d) &#123; //加速减速曲线</span><br><span class=\"line\">        if ((t /= d / 2) &lt; 1) &#123;</span><br><span class=\"line\">            return c / 2 * t * t + b;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return -c / 2 * ((--t) * (t - 2) - 1) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    easeInStrong: function(t, b, c, d) &#123; //加加速曲线</span><br><span class=\"line\">        return c * (t /= d) * t * t * t + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    easeOutStrong: function(t, b, c, d) &#123; //减减速曲线</span><br><span class=\"line\">        return -c * ((t = t / d - 1) * t * t * t - 1) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    easeBothStrong: function(t, b, c, d) &#123; //加加速减减速曲线</span><br><span class=\"line\">        if ((t /= d / 2) &lt; 1) &#123;</span><br><span class=\"line\">            return c / 2 * t * t * t * t + b;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return -c / 2 * ((t -= 2) * t * t * t - 2) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    elasticIn: function(t, b, c, d, a, p) &#123; //正弦衰减曲线（弹动渐入）</span><br><span class=\"line\">        if (t === 0) &#123;</span><br><span class=\"line\">            return b;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if ((t /= d) == 1) &#123;</span><br><span class=\"line\">            return b + c;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (!p) &#123;</span><br><span class=\"line\">            p = d * 0.3;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (!a || a &lt; Math.abs(c)) &#123;</span><br><span class=\"line\">            a = c;</span><br><span class=\"line\">            var s = p / 4;</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">            var s = p / (2 * Math.PI) * Math.asin(c / a);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    elasticOut: function(t, b, c, d, a, p) &#123; //正弦增强曲线（弹动渐出）</span><br><span class=\"line\">        if (t === 0) &#123;</span><br><span class=\"line\">            return b;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if ((t /= d) == 1) &#123;</span><br><span class=\"line\">            return b + c;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (!p) &#123;</span><br><span class=\"line\">            p = d * 0.3;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (!a || a &lt; Math.abs(c)) &#123;</span><br><span class=\"line\">            a = c;</span><br><span class=\"line\">            var s = p / 4;</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">            var s = p / (2 * Math.PI) * Math.asin(c / a);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    elasticBoth: function(t, b, c, d, a, p) &#123;</span><br><span class=\"line\">        if (t === 0) &#123;</span><br><span class=\"line\">            return b;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if ((t /= d / 2) == 2) &#123;</span><br><span class=\"line\">            return b + c;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (!p) &#123;</span><br><span class=\"line\">            p = d * (0.3 * 1.5);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (!a || a &lt; Math.abs(c)) &#123;</span><br><span class=\"line\">            a = c;</span><br><span class=\"line\">            var s = p / 4;</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">            var s = p / (2 * Math.PI) * Math.asin(c / a);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (t &lt; 1) &#123;</span><br><span class=\"line\">            return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) *</span><br><span class=\"line\">                Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return a * Math.pow(2, -10 * (t -= 1)) *</span><br><span class=\"line\">            Math.sin((t * d - s) * (2 * Math.PI) / p) * 0.5 + c + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    backIn: function(t, b, c, d, s) &#123; //回退加速（回退渐入）</span><br><span class=\"line\">        if (typeof s == &apos;undefined&apos;) &#123;</span><br><span class=\"line\">            s = 1.70158;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return c * (t /= d) * t * ((s + 1) * t - s) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    backOut: function(t, b, c, d, s) &#123;</span><br><span class=\"line\">        if (typeof s == &apos;undefined&apos;) &#123;</span><br><span class=\"line\">            s = 3.70158; //回缩的距离</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    backBoth: function(t, b, c, d, s) &#123;</span><br><span class=\"line\">        if (typeof s == &apos;undefined&apos;) &#123;</span><br><span class=\"line\">            s = 1.70158;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if ((t /= d / 2) &lt; 1) &#123;</span><br><span class=\"line\">            return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    bounceIn: function(t, b, c, d) &#123; //弹球减振（弹球渐出）</span><br><span class=\"line\">        return c - Tween[&apos;bounceOut&apos;](d - t, 0, c, d) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    bounceOut: function(t, b, c, d) &#123;</span><br><span class=\"line\">        if ((t /= d) &lt; (1 / 2.75)) &#123;</span><br><span class=\"line\">            return c * (7.5625 * t * t) + b;</span><br><span class=\"line\">        &#125; else if (t &lt; (2 / 2.75)) &#123;</span><br><span class=\"line\">            return c * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75) + b;</span><br><span class=\"line\">        &#125; else if (t &lt; (2.5 / 2.75)) &#123;</span><br><span class=\"line\">            return c * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375) + b;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return c * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    bounceBoth: function(t, b, c, d) &#123;</span><br><span class=\"line\">        if (t &lt; d / 2) &#123;</span><br><span class=\"line\">            return Tween[&apos;bounceIn&apos;](t * 2, 0, c, d) * 0.5 + b;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return Tween[&apos;bounceOut&apos;](t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">//———————————————————————————————————————————DOM操作———————————————————————————————————————————————————</span><br><span class=\"line\">// 添加节点</span><br><span class=\"line\">// ele: 父节点，支持输入变量，id值，class值，标签值。除变量外，其余值必须为字符串</span><br><span class=\"line\">// node: 添加的标签名，值为字符串</span><br><span class=\"line\">// n: 节点添加个数</span><br><span class=\"line\">// className: 节点绑定的class名，，值为字符串，多个class名用空格隔开</span><br><span class=\"line\">// boolean: 是否选中所有目标父节点。可选参数，不输入则判定为false，则只匹配选中的第一个节点</span><br><span class=\"line\">function addChild(ele, node, n, className, boolean) &#123;</span><br><span class=\"line\">    //获取节点</span><br><span class=\"line\">    let parent = null;</span><br><span class=\"line\"></span><br><span class=\"line\">    if (typeof ele !== &quot;string&quot;) parent = ele;</span><br><span class=\"line\">    else if (ele[0] === &quot;#&quot;) parent = document.getElementById(ele.slice(1));</span><br><span class=\"line\">    else if (ele[0] === &quot;.&quot;) &#123;</span><br><span class=\"line\">        if (boolean === false) parent = document.getElementsByClassName(ele.slice(1))[0];</span><br><span class=\"line\">        else parent = document.getElementsByClassName(ele.slice(1));</span><br><span class=\"line\">    &#125; else &#123;</span><br><span class=\"line\">        if (boolean === false) parent = docuemnt.getElementsByTagName(ele)[0];</span><br><span class=\"line\">        else parent = document.getElementsByTagNameNS(ele);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //声明用于存储父节点及子节点的对象</span><br><span class=\"line\">    const obj = &#123;</span><br><span class=\"line\">        &quot;parent&quot;: parent,</span><br><span class=\"line\">        &quot;children&quot;: []</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    //添加节点</span><br><span class=\"line\">    if (boolean) &#123;</span><br><span class=\"line\">        for (let i = 0; i &lt; parent.length; i++) &#123;</span><br><span class=\"line\">            //创建容器碎片</span><br><span class=\"line\">            const fragment = document.createDocumentFragment();</span><br><span class=\"line\">            //保存子节点，用于返回值</span><br><span class=\"line\">            obj.children[i] = [];</span><br><span class=\"line\"></span><br><span class=\"line\">            for (let j = 0; j &lt; n; j++) &#123;</span><br><span class=\"line\">                const target = document.createElement(node);</span><br><span class=\"line\">                target.className = className;</span><br><span class=\"line\">                fragment.appendChild(target);</span><br><span class=\"line\">                //添加子节点到数组，用于返回值</span><br><span class=\"line\">                obj.children[i][j] = target;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            parent[i].appendChild(fragment)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; else &#123;</span><br><span class=\"line\">        //创建碎片容器</span><br><span class=\"line\">        const fragment = document.createDocumentFragment();</span><br><span class=\"line\"></span><br><span class=\"line\">        for (let i = 0; i &lt; n; i++) &#123;</span><br><span class=\"line\">            const target = document.createElement(node);</span><br><span class=\"line\">            target.className = className;</span><br><span class=\"line\">            fragment.appendChild(target);</span><br><span class=\"line\">            //添加子节点，用于返回值</span><br><span class=\"line\">            obj.children[i] = target;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        //将碎片容器一次性添加到父节点</span><br><span class=\"line\">        parent.appendChild(fragment);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //返回参数，供动画函数调用</span><br><span class=\"line\">    return obj;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"3、案例解析\"><a href=\"#3、案例解析\" class=\"headerlink\" title=\"3、案例解析\"></a>3、案例解析</h3><ul>\n<li><strong>HTML</strong></li>\n</ul>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由于节点很多，并且我想尽量做得逼真有趣一点，就给节点加了随机位置。所以节点的输出都是用 JS 控制的，HTML 这边只写了几个父元素盒子，加上相应的 id 名和 class 类名，结构相对简单。</p>\n<ul>\n<li><strong>CSS</strong></li>\n</ul>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CSS 部分的难点就是流星的样式和用圈圈画云层，然后将云层堆叠出立体效果。<br><br></p>\n<blockquote>\n<p><strong>首先说一下流星的样式：</strong></p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#sky .star &#123;</span><br><span class=\"line\">     position: absolute;</span><br><span class=\"line\">     opacity: 0;</span><br><span class=\"line\">     z-index: 10000;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> .star::after &#123;</span><br><span class=\"line\">     content: &quot;&quot;;</span><br><span class=\"line\">     display: block;</span><br><span class=\"line\">     border: solid;</span><br><span class=\"line\">     border-width: 2px 0 2px 80px;</span><br><span class=\"line\">     /*流星随长度逐渐缩小*/</span><br><span class=\"line\">     border-color: transparent transparent transparent rgba(255, 255, 255, 1);</span><br><span class=\"line\">     border-radius: 2px 0 0 2px;</span><br><span class=\"line\">     transform: rotate(-45deg);</span><br><span class=\"line\">     transform-origin: 0 0 0;</span><br><span class=\"line\">     box-shadow: 0 0 20px rgba(255, 255, 255, .3);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;先提取了公共样式，添加定位属性；<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;然后在 star 后通过 after 伪类添加流星，<strong>用 border 特性画：</strong><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>1）模型绘制：</strong> <strong>border-width</strong>的顺序为四边<strong>top、right、bottom、left</strong>，同理<strong>border-color</strong>的顺序也为四边<strong>top、right、bottom、left</strong>。这样将 border-width 与 border-color 一一对应后，就能看出<strong>2px 是流星的宽度，80px 是流星的长度，而 0px 就是流星的尾巴</strong>。这样就形成了一个<strong>头部 2px 宽，尾部 0px，长度 80px 的流星模型</strong>;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>2）稍微逼真：</strong> 通过<strong>border-radius</strong>给流星的头部增加个圆角，让它看起来 emmmmmmm 更逼真？最后通过<strong>roteta</strong>旋转一个角度，让它看起来像是往下掉;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>3）增加闪光：</strong> 通过<strong>box-shadow</strong> 给流星增加一点光晕，让它看起来有闪光的效果;<br><br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过以上 3 步，一个流星就画好了。<br><br></p>\n<blockquote>\n<p><strong>然后是画云：</strong></p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">因为云的代码比较长，这里就不贴出来了。方法无非是通过一个一个的圆，相互叠加覆盖，完成一个云朵的形状;</span><br><span class=\"line\">完成一个云层之后，copy一个，然后多个云层通过rotate、opacity、left定位等，做出一个渐隐叠加的立体效果;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong>JS</strong></li>\n</ul>\n<p><strong><em>JS 部分以流星举例说明</em></strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setInterval(function() &#123;</span><br><span class=\"line\">    const obj = addChild(&quot;#sky&quot;, &quot;div&quot;, 2, &quot;star&quot;); //插入流星</span><br><span class=\"line\"></span><br><span class=\"line\">    for (let i = 0; i &lt; obj.children.length; i++) &#123;</span><br><span class=\"line\">        //随机位置</span><br><span class=\"line\">        const top = -50 + Math.random() * 200 + &quot;px&quot;,</span><br><span class=\"line\">            left = 200 + Math.random() * 1200 + &quot;px&quot;,</span><br><span class=\"line\">            scale = 0.3 + Math.random() * 0.5;</span><br><span class=\"line\">        const timer = 1000 + Math.random() * 1000;</span><br><span class=\"line\"></span><br><span class=\"line\">        obj.children[i].style.top = top;</span><br><span class=\"line\">        obj.children[i].style.left = left;</span><br><span class=\"line\">        obj.children[i].style.transform = `scale($&#123;scale&#125;)`;</span><br><span class=\"line\"></span><br><span class=\"line\">        //添加动画</span><br><span class=\"line\">        requestAnimation(&#123;</span><br><span class=\"line\">            ele: obj.children[i],</span><br><span class=\"line\">            attr: [&quot;top&quot;, &quot;left&quot;, &quot;opacity&quot;],</span><br><span class=\"line\">            value: [150, -150, .8],</span><br><span class=\"line\">            time: timer,</span><br><span class=\"line\">            flag: false,</span><br><span class=\"line\">            fn: function() &#123;</span><br><span class=\"line\">                requestAnimation(&#123;</span><br><span class=\"line\">                    ele: obj.children[i],</span><br><span class=\"line\">                    attr: [&quot;top&quot;, &quot;left&quot;, &quot;opacity&quot;],</span><br><span class=\"line\">                    value: [150, -150, 0],</span><br><span class=\"line\">                    time: timer,</span><br><span class=\"line\">                    flag: false,</span><br><span class=\"line\">                    fn: () =&gt; &#123;</span><br><span class=\"line\">                        obj.parent.removeChild(obj.children[i]); //动画结束删除节点</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;, 1000);</span><br></pre></td></tr></table></figure>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这里边用到了我自己封装的<strong>两个方法</strong>，一个是基于 requestAnimationFrame 的<strong>requestAnimation</strong>，以及基于 appendChild 的<strong>addChild</strong>。<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为了达成星星位置随机的效果，通过定时器 setInterval 不停的<strong>插入</strong>与<strong>删除</strong>流星：<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>首先</strong>，每次添加<strong>2 个流星</strong>到页面，但是<strong>定时器的间隔时间小于流星的动画时间</strong>，这样就能保证页面中的流星的数量不是一个固定值，但肯定是大于 2 的。不然一次 2 个流星略显冷清;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>然后</strong>，通过 for 循环（也可以用 for-in，for-of，都行。for-of 最简单）给每个新添加到页面中的流星一个随机的位置（top、left）、随机的大小（scale）、随机的动画执行时间（timer）;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>最后</strong>，在 for 循环中，给每个新添加到页面中的流星加上动画，并通过回调函数在执行完动画后删除节点。这里要注意的是，动画要分成<strong>两个阶段</strong>（<strong>出现</strong>与<strong>消失</strong>，主要是<strong>opacity</strong>控制）。另外我这里的处理，每个流星都移动相同的距离<strong>300px</strong>，这个距离我觉得也可以通过随机数控制，但我犯了个懒，就没有做。</p>\n<h3 id=\"4、小问题\"><a href=\"#4、小问题\" class=\"headerlink\" title=\"4、小问题\"></a>4、小问题</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;目前我发现的问题有<strong>2 个：</strong><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;一是 DOM 操作本身的问题。页面不停的添加与删除节点，造成不停地<strong>回流与重绘</strong>，很耗性能;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;二是 requestAnimationFrame 本身的问题。因为定时器不断在添加节点，而 requestAnimationFrame 的特性——<strong>当离开当前页面去浏览其他页面时，动画会暂停</strong>。这就造成了一个问题，<strong>节点一直在加，但动画全停在那没有执行</strong>。那么下次再回到这个页面的时候，就 boom!！！动画就炸了，你会看到画面一卡，很多小蝌蚪集体出动去找妈妈;</p>\n<h3 id=\"5、结语\"><a href=\"#5、结语\" class=\"headerlink\" title=\"5、结语\"></a>5、结语</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这个小案例虽然从难度上来看很简单，但是它可拓展性很高——比如表个白啊、寄个相思、耍个浪漫啊等等（手动狗头 doge），而且用纯 CSS 也可以实现（我也写了一版纯 CSS 的，因为不能随机位置随机大小，所以看起来比较静态一点，就不贴了）。所以对于了解 CSS 动画与 JS 动画，是个很不错的练手小案例。<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;感谢看完这篇文章的可爱的人儿，希望你能从中获得灵感~如果能给你带来帮助，那我是极高兴地~如果你把灵感告诉我，那我就 can’t happniess anymore 了~<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最后，再次感谢，如果有优化写法，欢迎指导~</p>\n","site":{"data":{}},"excerpt":"<h3 id=\"引言\"><a href=\"#引言\" class=\"headerlink\" title=\"引言\"></a>引言</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;平常会做一些有意思的小案例练手，通常都会发到 codepen 上，但是 codepen 不能写分析。<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;所以就在博客上开个案例分享系列，对 demo 做个剖析。目的以分享为主，然后也希望各路大神能给出改进的想法，在 review 中提升技术，发现乐趣~</p>\n<h3 id=\"1、效果图\"><a href=\"#1、效果图\" class=\"headerlink\" title=\"1、效果图\"></a>1、效果图</h3><p>完整效果，请移步 <a href=\"https://codepen.io/HaiLoongLyu/full/Lgqbzy/\" target=\"_blank\" rel=\"noopener\">codepen-流星雨案例</a><br><br>纯 CSS 案例及本篇案例完整源码，请移步<a href=\"https://github.com/LyuHaiLoong/Demos\" target=\"_blank\" rel=\"noopener\">The night of the metero</a></p>\n<p><img src=\"https://raw.githubusercontent.com/LyuHaiLoong/lyuhailoong.github.io/master/images/post/%E5%89%8D%E7%AB%AF%E6%A1%88%E4%BE%8B%E5%88%86%E4%BA%AB%EF%BC%88%E4%B8%80%EF%BC%89.gif\" alt=\"\"><br>","more":"</p>\n<h3 id=\"2、源码\"><a href=\"#2、源码\" class=\"headerlink\" title=\"2、源码\"></a>2、源码</h3><ul>\n<li><strong>HTML</strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;div class=&quot;container&quot;&gt;</span><br><span class=\"line\">        &lt;div id=&quot;mask&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div id=&quot;sky&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div id=&quot;moon&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div id=&quot;stars&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div class=&quot;cloud cloud-1&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div class=&quot;cloud cloud-2&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">        &lt;div class=&quot;cloud cloud-3&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong>CSS</strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> /* ------------reset------------ */</span><br><span class=\"line\"></span><br><span class=\"line\">* &#123;</span><br><span class=\"line\">    margin: 0;</span><br><span class=\"line\">    padding: 0;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">html,</span><br><span class=\"line\">body &#123;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    min-width: 1000px;</span><br><span class=\"line\">    height: 100%;</span><br><span class=\"line\">    min-height: 400px;</span><br><span class=\"line\">    overflow: hidden;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">/*  ------------画布 ------------ */</span><br><span class=\"line\">.container &#123;</span><br><span class=\"line\">    position: relative;</span><br><span class=\"line\">    height: 100%;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">/* 遮罩层 */</span><br><span class=\"line\"></span><br><span class=\"line\">#mask &#123;</span><br><span class=\"line\">    position: absolute;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    height: 100%;</span><br><span class=\"line\">    background: rgba(0, 0, 0, .8);</span><br><span class=\"line\">    z-index: 900;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">/* 天空背景 */</span><br><span class=\"line\"></span><br><span class=\"line\">#sky &#123;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    height: 100%;</span><br><span class=\"line\">    background: linear-gradient(rgba(0, 150, 255, 1), rgba(0, 150, 255, .8), rgba(0, 150, 255, .5));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">/* 月亮 */</span><br><span class=\"line\"></span><br><span class=\"line\">#moon &#123;</span><br><span class=\"line\">    position: absolute;</span><br><span class=\"line\">    top: 50px;</span><br><span class=\"line\">    right: 200px;</span><br><span class=\"line\">    width: 120px;</span><br><span class=\"line\">    height: 120px;</span><br><span class=\"line\">    background: rgba(251, 255, 25, 0.938);</span><br><span class=\"line\">    border-radius: 50%;</span><br><span class=\"line\">    box-shadow: 0 0 20px rgba(251, 255, 25, 0.5);</span><br><span class=\"line\">    z-index: 9999;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">/* 闪烁星星 */</span><br><span class=\"line\"></span><br><span class=\"line\">.blink &#123;</span><br><span class=\"line\">    position: absolute;</span><br><span class=\"line\">    background: rgb(255, 255, 255);</span><br><span class=\"line\">    border-radius: 50%;</span><br><span class=\"line\">    box-shadow: 0 0 5px rgb(255, 255, 255);</span><br><span class=\"line\">    opacity: 0;</span><br><span class=\"line\">    z-index: 10000;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">/* 流星 */</span><br><span class=\"line\"></span><br><span class=\"line\">.star &#123;</span><br><span class=\"line\">    position: absolute;</span><br><span class=\"line\">    opacity: 0;</span><br><span class=\"line\">    z-index: 10000;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.star::after &#123;</span><br><span class=\"line\">    content: &quot;&quot;;</span><br><span class=\"line\">    display: block;</span><br><span class=\"line\">    border: solid;</span><br><span class=\"line\">    border-width: 2px 0 2px 80px;</span><br><span class=\"line\">    /*流星随长度逐渐缩小*/</span><br><span class=\"line\">    border-color: transparent transparent transparent rgba(255, 255, 255, 1);</span><br><span class=\"line\">    border-radius: 2px 0 0 2px;</span><br><span class=\"line\">    transform: rotate(-45deg);</span><br><span class=\"line\">    transform-origin: 0 0 0;</span><br><span class=\"line\">    box-shadow: 0 0 20px rgba(255, 255, 255, .3);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">/* 云 */</span><br><span class=\"line\"></span><br><span class=\"line\">.cloud &#123;</span><br><span class=\"line\">    position: absolute;</span><br><span class=\"line\">    width: 100%;</span><br><span class=\"line\">    height: 100px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.cloud-1 &#123;</span><br><span class=\"line\">    bottom: -100px;</span><br><span class=\"line\">    z-index: 1000;</span><br><span class=\"line\">    opacity: 1;</span><br><span class=\"line\">    transform: scale(1.5);</span><br><span class=\"line\">    -webkit-transform: scale(1.5);</span><br><span class=\"line\">    -moz-transform: scale(1.5);</span><br><span class=\"line\">    -ms-transform: scale(1.5);</span><br><span class=\"line\">    -o-transform: scale(1.5);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.cloud-2 &#123;</span><br><span class=\"line\">    left: -100px;</span><br><span class=\"line\">    bottom: -50px;</span><br><span class=\"line\">    z-index: 999;</span><br><span class=\"line\">    opacity: .5;</span><br><span class=\"line\">    transform: rotate(7deg);</span><br><span class=\"line\">    -webkit-transform: rotate(7deg);</span><br><span class=\"line\">    -moz-transform: rotate(7deg);</span><br><span class=\"line\">    -ms-transform: rotate(7deg);</span><br><span class=\"line\">    -o-transform: rotate(7deg);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.cloud-3 &#123;</span><br><span class=\"line\">    left: 120px;</span><br><span class=\"line\">    bottom: -50px;</span><br><span class=\"line\">    z-index: 999;</span><br><span class=\"line\">    opacity: .1;</span><br><span class=\"line\">    transform: rotate(-10deg);</span><br><span class=\"line\">    -webkit-transform: rotate(-10deg);</span><br><span class=\"line\">    -moz-transform: rotate(-10deg);</span><br><span class=\"line\">    -ms-transform: rotate(-10deg);</span><br><span class=\"line\">    -o-transform: rotate(-10deg);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle &#123;</span><br><span class=\"line\">    position: absolute;</span><br><span class=\"line\">    border-radius: 50%;</span><br><span class=\"line\">    background: #fff;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-1 &#123;</span><br><span class=\"line\">    width: 100px;</span><br><span class=\"line\">    height: 100px;</span><br><span class=\"line\">    top: -50px;</span><br><span class=\"line\">    left: 10px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-2 &#123;</span><br><span class=\"line\">    width: 150px;</span><br><span class=\"line\">    height: 150px;</span><br><span class=\"line\">    top: -50px;</span><br><span class=\"line\">    left: 30px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-3 &#123;</span><br><span class=\"line\">    width: 300px;</span><br><span class=\"line\">    height: 300px;</span><br><span class=\"line\">    top: -100px;</span><br><span class=\"line\">    left: 80px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-4 &#123;</span><br><span class=\"line\">    width: 200px;</span><br><span class=\"line\">    height: 200px;</span><br><span class=\"line\">    top: -60px;</span><br><span class=\"line\">    left: 300px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-5 &#123;</span><br><span class=\"line\">    width: 80px;</span><br><span class=\"line\">    height: 80px;</span><br><span class=\"line\">    top: -30px;</span><br><span class=\"line\">    left: 450px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-6 &#123;</span><br><span class=\"line\">    width: 200px;</span><br><span class=\"line\">    height: 200px;</span><br><span class=\"line\">    top: -50px;</span><br><span class=\"line\">    left: 500px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-7 &#123;</span><br><span class=\"line\">    width: 100px;</span><br><span class=\"line\">    height: 100px;</span><br><span class=\"line\">    top: -10px;</span><br><span class=\"line\">    left: 650px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-8 &#123;</span><br><span class=\"line\">    width: 50px;</span><br><span class=\"line\">    height: 50px;</span><br><span class=\"line\">    top: 30px;</span><br><span class=\"line\">    left: 730px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-9 &#123;</span><br><span class=\"line\">    width: 100px;</span><br><span class=\"line\">    height: 100px;</span><br><span class=\"line\">    top: 30px;</span><br><span class=\"line\">    left: 750px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-10 &#123;</span><br><span class=\"line\">    width: 150px;</span><br><span class=\"line\">    height: 150px;</span><br><span class=\"line\">    top: 10px;</span><br><span class=\"line\">    left: 800px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-11 &#123;</span><br><span class=\"line\">    width: 150px;</span><br><span class=\"line\">    height: 150px;</span><br><span class=\"line\">    top: -30px;</span><br><span class=\"line\">    left: 850px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-12 &#123;</span><br><span class=\"line\">    width: 250px;</span><br><span class=\"line\">    height: 250px;</span><br><span class=\"line\">    top: -50px;</span><br><span class=\"line\">    left: 900px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-13 &#123;</span><br><span class=\"line\">    width: 200px;</span><br><span class=\"line\">    height: 200px;</span><br><span class=\"line\">    top: -40px;</span><br><span class=\"line\">    left: 1000px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.circle-14 &#123;</span><br><span class=\"line\">    width: 300px;</span><br><span class=\"line\">    height: 300px;</span><br><span class=\"line\">    top: -70px;</span><br><span class=\"line\">    left: 1100px;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong>JS</strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//流星动画</span><br><span class=\"line\">setInterval(function() &#123;</span><br><span class=\"line\">    const obj = addChild(&quot;#sky&quot;, &quot;div&quot;, 2, &quot;star&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">    for (let i = 0; i &lt; obj.children.length; i++) &#123;</span><br><span class=\"line\">        const top = -50 + Math.random() * 200 + &quot;px&quot;,</span><br><span class=\"line\">            left = 200 + Math.random() * 1200 + &quot;px&quot;,</span><br><span class=\"line\">            scale = 0.3 + Math.random() * 0.5;</span><br><span class=\"line\">        const timer = 1000 + Math.random() * 1000;</span><br><span class=\"line\"></span><br><span class=\"line\">        obj.children[i].style.top = top;</span><br><span class=\"line\">        obj.children[i].style.left = left;</span><br><span class=\"line\">        obj.children[i].style.transform = `scale($&#123;scale&#125;)`;</span><br><span class=\"line\"></span><br><span class=\"line\">        requestAnimation(&#123;</span><br><span class=\"line\">            ele: obj.children[i],</span><br><span class=\"line\">            attr: [&quot;top&quot;, &quot;left&quot;, &quot;opacity&quot;],</span><br><span class=\"line\">            value: [150, -150, .8],</span><br><span class=\"line\">            time: timer,</span><br><span class=\"line\">            flag: false,</span><br><span class=\"line\">            fn: function() &#123;</span><br><span class=\"line\">                requestAnimation(&#123;</span><br><span class=\"line\">                    ele: obj.children[i],</span><br><span class=\"line\">                    attr: [&quot;top&quot;, &quot;left&quot;, &quot;opacity&quot;],</span><br><span class=\"line\">                    value: [150, -150, 0],</span><br><span class=\"line\">                    time: timer,</span><br><span class=\"line\">                    flag: false,</span><br><span class=\"line\">                    fn: () =&gt; &#123;</span><br><span class=\"line\">                        obj.parent.removeChild(obj.children[i]);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;, 1000);</span><br><span class=\"line\"></span><br><span class=\"line\">//闪烁星星动画</span><br><span class=\"line\">setInterval(function() &#123;</span><br><span class=\"line\">    const obj = addChild(&quot;#stars&quot;, &quot;div&quot;, 2, &quot;blink&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">    for (let i = 0; i &lt; obj.children.length; i++) &#123;</span><br><span class=\"line\">        const top = -50 + Math.random() * 500 + &quot;px&quot;,</span><br><span class=\"line\">            left = 200 + Math.random() * 1200 + &quot;px&quot;,</span><br><span class=\"line\">            round = 1 + Math.random() * 2 + &quot;px&quot;;</span><br><span class=\"line\">        const timer = 1000 + Math.random() * 4000;</span><br><span class=\"line\"></span><br><span class=\"line\">        obj.children[i].style.top = top;</span><br><span class=\"line\">        obj.children[i].style.left = left;</span><br><span class=\"line\">        obj.children[i].style.width = round;</span><br><span class=\"line\">        obj.children[i].style.height = round;</span><br><span class=\"line\"></span><br><span class=\"line\">        requestAnimation(&#123;</span><br><span class=\"line\">            ele: obj.children[i],</span><br><span class=\"line\">            attr: &quot;opacity&quot;,</span><br><span class=\"line\">            value: .5,</span><br><span class=\"line\">            time: timer,</span><br><span class=\"line\">            flag: false,</span><br><span class=\"line\">            fn: function() &#123;</span><br><span class=\"line\">                requestAnimation(&#123;</span><br><span class=\"line\">                    ele: obj.children[i],</span><br><span class=\"line\">                    attr: &quot;opacity&quot;,</span><br><span class=\"line\">                    value: 0,</span><br><span class=\"line\">                    time: timer,</span><br><span class=\"line\">                    flag: false,</span><br><span class=\"line\">                    fn: function() &#123;</span><br><span class=\"line\">                        obj.parent.removeChild(obj.children[i]);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;, 1000);</span><br><span class=\"line\"></span><br><span class=\"line\">//月亮移动</span><br><span class=\"line\">requestAnimation(&#123;</span><br><span class=\"line\">    ele: &quot;#moon&quot;,</span><br><span class=\"line\">    attr: &quot;right&quot;,</span><br><span class=\"line\">    value: 1200,</span><br><span class=\"line\">    time: 10000000,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">// 添加云</span><br><span class=\"line\">const clouds = addChild(&quot;.cloud&quot;, &quot;div&quot;, 14, &quot;circle&quot;, true);</span><br><span class=\"line\">for (let i = 0; i &lt; clouds.children.length; i++) &#123;</span><br><span class=\"line\">    for (let j = 0; j &lt; clouds.children[i].length;) &#123;</span><br><span class=\"line\">        clouds.children[i][j].classList.add(`circle-$&#123;++j&#125;`);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//云动画</span><br><span class=\"line\"></span><br><span class=\"line\">let flag = 1;</span><br><span class=\"line\">setInterval(</span><br><span class=\"line\">    function() &#123;</span><br><span class=\"line\">        const clouds = document.querySelectorAll(&quot;.cloud&quot;);</span><br><span class=\"line\">        const left = Math.random() * 5;</span><br><span class=\"line\">        bottom = Math.random() * 5;</span><br><span class=\"line\"></span><br><span class=\"line\">        let timer = 0;</span><br><span class=\"line\">        for (let i = 0; i &lt; clouds.length; i++) &#123;</span><br><span class=\"line\">            requestAnimation(&#123;</span><br><span class=\"line\">                ele: clouds[i],</span><br><span class=\"line\">                attr: [&quot;left&quot;, &quot;bottom&quot;],</span><br><span class=\"line\">                value: flag % 2 ? [-left, -bottom] : [left, bottom],</span><br><span class=\"line\">                time: timer += 500,</span><br><span class=\"line\">                flag: false,</span><br><span class=\"line\">                fn: function() &#123;</span><br><span class=\"line\">                    requestAnimation(&#123;</span><br><span class=\"line\">                        ele: clouds[i],</span><br><span class=\"line\">                        attr: [&quot;left&quot;, &quot;bottom&quot;],</span><br><span class=\"line\">                        value: flag % 2 ? [left, bottom] : [-left, -bottom],</span><br><span class=\"line\">                        time: timer,</span><br><span class=\"line\">                        flag: false</span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        flag++;</span><br><span class=\"line\">    &#125;, 2000)</span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong>封装方法</strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//———————————————————————————————————————————动画———————————————————————————————————————————————————</span><br><span class=\"line\">//运动动画，调用Tween.js</span><br><span class=\"line\">//ele: dom | class | id | tag  节点 | 类名 | id名 | 标签名，只支持选择一个节点，class类名以及标签名只能选择页面中第一个</span><br><span class=\"line\">//attr: attribute 属性名</span><br><span class=\"line\">//value: target value 目标值</span><br><span class=\"line\">//time: duration 持续时间</span><br><span class=\"line\">//tween: timing function 函数方程</span><br><span class=\"line\">//flag: Boolean 判断是按值移动还是按位置移动,默认按位置移动</span><br><span class=\"line\">//fn: callback 回调函数</span><br><span class=\"line\">//增加返回值: 将内部参数对象返回，可以通过设置返回对象的属性stop为true打断动画</span><br><span class=\"line\">function requestAnimation(obj) &#123;</span><br><span class=\"line\">    //—————————————————————————————————————参数设置—————————————————————————————————————————————</span><br><span class=\"line\">    //默认属性</span><br><span class=\"line\">    const parameter = &#123;</span><br><span class=\"line\">        ele: null,</span><br><span class=\"line\">        attr: null,</span><br><span class=\"line\">        value: null,</span><br><span class=\"line\">        time: 1000,</span><br><span class=\"line\">        tween: &quot;linear&quot;,</span><br><span class=\"line\">        flag: true,</span><br><span class=\"line\">        stop: false,</span><br><span class=\"line\">        fn: &quot;&quot;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //合并传入属性</span><br><span class=\"line\">    Object.assign(parameter, obj); //覆盖重名属性</span><br><span class=\"line\"></span><br><span class=\"line\">    //—————————————————————————————————————动画设置—————————————————————————————————————————————</span><br><span class=\"line\">    //创建运动方程初始参数,方便复用</span><br><span class=\"line\">    let start = 0; //用于保存初始时间戳</span><br><span class=\"line\">    let target = (typeof parameter.ele === &quot;string&quot; ? document.querySelector(parameter.ele) : parameter.ele), //目标节点</span><br><span class=\"line\">        attr = parameter.attr, //目标属性</span><br><span class=\"line\">        beginAttr = parseFloat(getComputedStyle(target)[attr]), //attr起始值</span><br><span class=\"line\">        value = parameter.value, //运动目标值</span><br><span class=\"line\">        count = value - beginAttr, //实际运动值</span><br><span class=\"line\">        time = parameter.time, //运动持续时间,</span><br><span class=\"line\">        tween = parameter.tween, //运动函数</span><br><span class=\"line\">        flag = parameter.flag,</span><br><span class=\"line\">        callback = parameter.fn, //回调函数</span><br><span class=\"line\">        curVal = 0; //运动当前值</span><br><span class=\"line\"></span><br><span class=\"line\">    //判断传入函数是否为数组，多段运动</span><br><span class=\"line\">    (function() &#123;</span><br><span class=\"line\">        if (attr instanceof Array) &#123;</span><br><span class=\"line\">            beginAttr = [];</span><br><span class=\"line\">            count = [];</span><br><span class=\"line\">            for (let i of attr) &#123;</span><br><span class=\"line\">                const val = parseFloat(getComputedStyle(target)[i]);</span><br><span class=\"line\">                beginAttr.push(val);</span><br><span class=\"line\">                count.push(value - val);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (value instanceof Array) &#123;</span><br><span class=\"line\">            for (let i in value) &#123;</span><br><span class=\"line\">                count[i] = value[i] - beginAttr[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)();</span><br><span class=\"line\"></span><br><span class=\"line\">    //运动函数</span><br><span class=\"line\">    function animate(timestamp) &#123;</span><br><span class=\"line\">        if (parameter.stop) return; //打断</span><br><span class=\"line\">        //存储初始时间戳</span><br><span class=\"line\">        if (!start) start = timestamp;</span><br><span class=\"line\">        //已运动时间</span><br><span class=\"line\">        let t = timestamp - start;</span><br><span class=\"line\">        //判断多段运动</span><br><span class=\"line\">        if (beginAttr instanceof Array) &#123;</span><br><span class=\"line\">            // const len = beginAttr.length //存数组长度，复用</span><br><span class=\"line\"></span><br><span class=\"line\">            //多段运动第1类——多属性，同目标，同时间/不同时间</span><br><span class=\"line\">            if (typeof count === &quot;number&quot;) &#123; //同目标</span><br><span class=\"line\">                //同时间</span><br><span class=\"line\">                if (typeof time === &quot;number&quot;) &#123;</span><br><span class=\"line\">                    if (t &gt; time) t = time; //判断是否超出目标值</span><br><span class=\"line\"></span><br><span class=\"line\">                    //循环attr，分别赋值</span><br><span class=\"line\">                    for (let i in beginAttr) &#123;</span><br><span class=\"line\">                        if (flag) curVal = Tween[tween](t, beginAttr[i], count, time); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置</span><br><span class=\"line\">                        else curVal = Tween[tween](t, beginAttr[i], count + beginAttr[i], time); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离</span><br><span class=\"line\">                        if (attr[i] === &quot;opacity&quot;) target.style[attr[i]] = curVal; //给属性赋值</span><br><span class=\"line\">                        else target.style[attr[i]] = curVal + &quot;px&quot;; //给属性赋值</span><br><span class=\"line\"></span><br><span class=\"line\">                        if (t &lt; time) requestAnimationFrame(animate); //判断是否运动完</span><br><span class=\"line\">                        else callback &amp;&amp; callback(); //调用回调函数</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    return;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                //不同时间</span><br><span class=\"line\">                if (time instanceof Array) &#123;</span><br><span class=\"line\">                    //循环time，attr，分别赋值</span><br><span class=\"line\">                    for (let i in beginAttr) &#123;</span><br><span class=\"line\">                        //错误判断</span><br><span class=\"line\">                        if (!time[i] &amp;&amp; time[i] !== 0) &#123;</span><br><span class=\"line\">                            throw new Error(</span><br><span class=\"line\">                                &quot;The input time&apos;s length is not equal to attribute&apos;s length&quot;);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                        //判断是否已经完成动画，完成则跳过此次循环</span><br><span class=\"line\">                        if (parseFloat(getComputedStyle(target)[attr[i]]) === (typeof value === &quot;number&quot; ? value : value[i]))</span><br><span class=\"line\">                            continue;</span><br><span class=\"line\">                        // t = timestamp - start; //每次循环初始化t</span><br><span class=\"line\">                        if (t &gt; time[i]) t = time[i]; //判断是否超出目标值</span><br><span class=\"line\"></span><br><span class=\"line\">                        if (flag || attr[i] === &quot;opacity&quot;) curVal = Tween[tween](t, beginAttr[i], count, i); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置</span><br><span class=\"line\">                        else curVal = Tween[tween](t, beginAttr[i], count + beginAttr[i], i); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离</span><br><span class=\"line\">                        if (attr[i] === &quot;opacity&quot;) target.style[attr[i]] = curVal; //给属性赋值</span><br><span class=\"line\">                        else target.style[attr[i]] = curVal + &quot;px&quot;; //给属性赋值</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                    if (t &lt; Math.max(...time)) requestAnimationFrame(animate); //判断函数是否运动完</span><br><span class=\"line\">                    else callback &amp;&amp; callback(); //如果已经执行完时间最长的动画，则调用回调函数</span><br><span class=\"line\">                    return;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            //多段运动第2类——多属性，不同目标，同时间/不同时间</span><br><span class=\"line\">            if (count instanceof Array) &#123;</span><br><span class=\"line\">                //同时间</span><br><span class=\"line\">                if (typeof time === &quot;number&quot;) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">                    if (t &gt; time) t = time; //判断是否超出目标值</span><br><span class=\"line\"></span><br><span class=\"line\">                    for (let i in beginAttr) &#123; //循环attr，count，分别赋值</span><br><span class=\"line\">                        //错误判断</span><br><span class=\"line\">                        if (!count[i] &amp;&amp; count[i] !== 0) &#123;</span><br><span class=\"line\">                            throw new Error(</span><br><span class=\"line\">                                &quot;The input value&apos;s length is not equal to attribute&apos;s length&quot;);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                        if (flag || attr[i] === &quot;opacity&quot;) curVal = Tween[tween](t, beginAttr[i], count[i], time); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置</span><br><span class=\"line\">                        else curVal = Tween[tween](t, beginAttr[i], count[i] + beginAttr[i], time); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离</span><br><span class=\"line\">                        if (attr[i] === &quot;opacity&quot;) target.style[attr[i]] = curVal; //给属性赋值</span><br><span class=\"line\">                        else target.style[attr[i]] = curVal + &quot;px&quot;; //给属性赋值</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                    if (t &lt; time) requestAnimationFrame(animate); //判断函数是否运动完</span><br><span class=\"line\">                    else callback &amp;&amp; callback(); //如果已经执行完时间最长的动画，则调用回调函数</span><br><span class=\"line\">                    return;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                //不同时间</span><br><span class=\"line\">                if (time instanceof Array) &#123;</span><br><span class=\"line\">                    for (let i in beginAttr) &#123;</span><br><span class=\"line\">                        //错误判断</span><br><span class=\"line\">                        if (!time[i] &amp;&amp; time[i] !== 0) &#123;</span><br><span class=\"line\">                            throw new Error(</span><br><span class=\"line\">                                &quot;The input time&apos;s length is not equal to attribute&apos;s length&quot;);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                        //判断是否已经完成动画，完成则跳过此次循环</span><br><span class=\"line\">                        if (parseFloat(getComputedStyle(target)[attr[i]]) === (typeof value === &quot;number&quot; ? value : value[i]))</span><br><span class=\"line\">                            continue;</span><br><span class=\"line\"></span><br><span class=\"line\">                        if (t &gt; time[i]) t = time[i]; //判断是否超出目标值</span><br><span class=\"line\"></span><br><span class=\"line\">                        //错误判断</span><br><span class=\"line\">                        if (!count[i] &amp;&amp; count[i] !== 0) &#123;</span><br><span class=\"line\">                            throw new Error(</span><br><span class=\"line\">                                &quot;The input value&apos;s length is not equal to attribute&apos;s length&quot;);</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                        if (flag || attr[i] === &quot;opacity&quot;) curVal = Tween[tween](t, beginAttr[i], count[i], time[i]); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置</span><br><span class=\"line\">                        else curVal = Tween[tween](t, beginAttr[i], count[i] + beginAttr[i], time[i]); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离</span><br><span class=\"line\">                        if (attr[i] === &quot;opacity&quot;) target.style[attr[i]] = curVal;</span><br><span class=\"line\">                        else target.style[attr[i]] = curVal + &quot;px&quot;;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                    if (t &lt; Math.max(...time)) requestAnimationFrame(animate);</span><br><span class=\"line\">                    else callback &amp;&amp; callback();</span><br><span class=\"line\">                    return;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        //单运动模式</span><br><span class=\"line\">        if (t &gt; time) t = time;</span><br><span class=\"line\">        if (flag || attr === &quot;opacity&quot;) curVal = Tween[tween](t, beginAttr, count, time); //调用Tween，返回当前属性值,此时计算方法为移动到写入位置</span><br><span class=\"line\">        else curVal = Tween[tween](t, beginAttr[i], count + beginAttr, time); //调用Tween，返回当前属性值，此时计算方法为移动了写入距离</span><br><span class=\"line\">        if (attr === &quot;opacity&quot;) target.style[attr] = curVal;</span><br><span class=\"line\">        else target.style[attr] = curVal + &quot;px&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">        if (t &lt; time) requestAnimationFrame(animate);</span><br><span class=\"line\">        else callback &amp;&amp; callback();</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    requestAnimationFrame(animate);</span><br><span class=\"line\">    return parameter; //返回对象，供打断或其他用途</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">//Tween.js</span><br><span class=\"line\">/*</span><br><span class=\"line\"> * t : time 已过时间</span><br><span class=\"line\"> * b : begin 起始值</span><br><span class=\"line\"> * c : count 总的运动值</span><br><span class=\"line\"> * d : duration 持续时间</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * 曲线方程</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * http://www.cnblogs.com/bluedream2009/archive/2010/06/19/1760909.html</span><br><span class=\"line\"> * */</span><br><span class=\"line\"></span><br><span class=\"line\">let Tween = &#123;</span><br><span class=\"line\">    linear: function(t, b, c, d) &#123; //匀速</span><br><span class=\"line\">        return c * t / d + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    easeIn: function(t, b, c, d) &#123; //加速曲线</span><br><span class=\"line\">        return c * (t /= d) * t + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    easeOut: function(t, b, c, d) &#123; //减速曲线</span><br><span class=\"line\">        return -c * (t /= d) * (t - 2) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    easeBoth: function(t, b, c, d) &#123; //加速减速曲线</span><br><span class=\"line\">        if ((t /= d / 2) &lt; 1) &#123;</span><br><span class=\"line\">            return c / 2 * t * t + b;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return -c / 2 * ((--t) * (t - 2) - 1) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    easeInStrong: function(t, b, c, d) &#123; //加加速曲线</span><br><span class=\"line\">        return c * (t /= d) * t * t * t + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    easeOutStrong: function(t, b, c, d) &#123; //减减速曲线</span><br><span class=\"line\">        return -c * ((t = t / d - 1) * t * t * t - 1) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    easeBothStrong: function(t, b, c, d) &#123; //加加速减减速曲线</span><br><span class=\"line\">        if ((t /= d / 2) &lt; 1) &#123;</span><br><span class=\"line\">            return c / 2 * t * t * t * t + b;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return -c / 2 * ((t -= 2) * t * t * t - 2) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    elasticIn: function(t, b, c, d, a, p) &#123; //正弦衰减曲线（弹动渐入）</span><br><span class=\"line\">        if (t === 0) &#123;</span><br><span class=\"line\">            return b;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if ((t /= d) == 1) &#123;</span><br><span class=\"line\">            return b + c;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (!p) &#123;</span><br><span class=\"line\">            p = d * 0.3;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (!a || a &lt; Math.abs(c)) &#123;</span><br><span class=\"line\">            a = c;</span><br><span class=\"line\">            var s = p / 4;</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">            var s = p / (2 * Math.PI) * Math.asin(c / a);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    elasticOut: function(t, b, c, d, a, p) &#123; //正弦增强曲线（弹动渐出）</span><br><span class=\"line\">        if (t === 0) &#123;</span><br><span class=\"line\">            return b;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if ((t /= d) == 1) &#123;</span><br><span class=\"line\">            return b + c;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (!p) &#123;</span><br><span class=\"line\">            p = d * 0.3;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (!a || a &lt; Math.abs(c)) &#123;</span><br><span class=\"line\">            a = c;</span><br><span class=\"line\">            var s = p / 4;</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">            var s = p / (2 * Math.PI) * Math.asin(c / a);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    elasticBoth: function(t, b, c, d, a, p) &#123;</span><br><span class=\"line\">        if (t === 0) &#123;</span><br><span class=\"line\">            return b;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if ((t /= d / 2) == 2) &#123;</span><br><span class=\"line\">            return b + c;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (!p) &#123;</span><br><span class=\"line\">            p = d * (0.3 * 1.5);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (!a || a &lt; Math.abs(c)) &#123;</span><br><span class=\"line\">            a = c;</span><br><span class=\"line\">            var s = p / 4;</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">            var s = p / (2 * Math.PI) * Math.asin(c / a);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (t &lt; 1) &#123;</span><br><span class=\"line\">            return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) *</span><br><span class=\"line\">                Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return a * Math.pow(2, -10 * (t -= 1)) *</span><br><span class=\"line\">            Math.sin((t * d - s) * (2 * Math.PI) / p) * 0.5 + c + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    backIn: function(t, b, c, d, s) &#123; //回退加速（回退渐入）</span><br><span class=\"line\">        if (typeof s == &apos;undefined&apos;) &#123;</span><br><span class=\"line\">            s = 1.70158;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return c * (t /= d) * t * ((s + 1) * t - s) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    backOut: function(t, b, c, d, s) &#123;</span><br><span class=\"line\">        if (typeof s == &apos;undefined&apos;) &#123;</span><br><span class=\"line\">            s = 3.70158; //回缩的距离</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    backBoth: function(t, b, c, d, s) &#123;</span><br><span class=\"line\">        if (typeof s == &apos;undefined&apos;) &#123;</span><br><span class=\"line\">            s = 1.70158;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if ((t /= d / 2) &lt; 1) &#123;</span><br><span class=\"line\">            return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    bounceIn: function(t, b, c, d) &#123; //弹球减振（弹球渐出）</span><br><span class=\"line\">        return c - Tween[&apos;bounceOut&apos;](d - t, 0, c, d) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    bounceOut: function(t, b, c, d) &#123;</span><br><span class=\"line\">        if ((t /= d) &lt; (1 / 2.75)) &#123;</span><br><span class=\"line\">            return c * (7.5625 * t * t) + b;</span><br><span class=\"line\">        &#125; else if (t &lt; (2 / 2.75)) &#123;</span><br><span class=\"line\">            return c * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75) + b;</span><br><span class=\"line\">        &#125; else if (t &lt; (2.5 / 2.75)) &#123;</span><br><span class=\"line\">            return c * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375) + b;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return c * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375) + b;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    bounceBoth: function(t, b, c, d) &#123;</span><br><span class=\"line\">        if (t &lt; d / 2) &#123;</span><br><span class=\"line\">            return Tween[&apos;bounceIn&apos;](t * 2, 0, c, d) * 0.5 + b;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        return Tween[&apos;bounceOut&apos;](t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">//———————————————————————————————————————————DOM操作———————————————————————————————————————————————————</span><br><span class=\"line\">// 添加节点</span><br><span class=\"line\">// ele: 父节点，支持输入变量，id值，class值，标签值。除变量外，其余值必须为字符串</span><br><span class=\"line\">// node: 添加的标签名，值为字符串</span><br><span class=\"line\">// n: 节点添加个数</span><br><span class=\"line\">// className: 节点绑定的class名，，值为字符串，多个class名用空格隔开</span><br><span class=\"line\">// boolean: 是否选中所有目标父节点。可选参数，不输入则判定为false，则只匹配选中的第一个节点</span><br><span class=\"line\">function addChild(ele, node, n, className, boolean) &#123;</span><br><span class=\"line\">    //获取节点</span><br><span class=\"line\">    let parent = null;</span><br><span class=\"line\"></span><br><span class=\"line\">    if (typeof ele !== &quot;string&quot;) parent = ele;</span><br><span class=\"line\">    else if (ele[0] === &quot;#&quot;) parent = document.getElementById(ele.slice(1));</span><br><span class=\"line\">    else if (ele[0] === &quot;.&quot;) &#123;</span><br><span class=\"line\">        if (boolean === false) parent = document.getElementsByClassName(ele.slice(1))[0];</span><br><span class=\"line\">        else parent = document.getElementsByClassName(ele.slice(1));</span><br><span class=\"line\">    &#125; else &#123;</span><br><span class=\"line\">        if (boolean === false) parent = docuemnt.getElementsByTagName(ele)[0];</span><br><span class=\"line\">        else parent = document.getElementsByTagNameNS(ele);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //声明用于存储父节点及子节点的对象</span><br><span class=\"line\">    const obj = &#123;</span><br><span class=\"line\">        &quot;parent&quot;: parent,</span><br><span class=\"line\">        &quot;children&quot;: []</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    //添加节点</span><br><span class=\"line\">    if (boolean) &#123;</span><br><span class=\"line\">        for (let i = 0; i &lt; parent.length; i++) &#123;</span><br><span class=\"line\">            //创建容器碎片</span><br><span class=\"line\">            const fragment = document.createDocumentFragment();</span><br><span class=\"line\">            //保存子节点，用于返回值</span><br><span class=\"line\">            obj.children[i] = [];</span><br><span class=\"line\"></span><br><span class=\"line\">            for (let j = 0; j &lt; n; j++) &#123;</span><br><span class=\"line\">                const target = document.createElement(node);</span><br><span class=\"line\">                target.className = className;</span><br><span class=\"line\">                fragment.appendChild(target);</span><br><span class=\"line\">                //添加子节点到数组，用于返回值</span><br><span class=\"line\">                obj.children[i][j] = target;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            parent[i].appendChild(fragment)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; else &#123;</span><br><span class=\"line\">        //创建碎片容器</span><br><span class=\"line\">        const fragment = document.createDocumentFragment();</span><br><span class=\"line\"></span><br><span class=\"line\">        for (let i = 0; i &lt; n; i++) &#123;</span><br><span class=\"line\">            const target = document.createElement(node);</span><br><span class=\"line\">            target.className = className;</span><br><span class=\"line\">            fragment.appendChild(target);</span><br><span class=\"line\">            //添加子节点，用于返回值</span><br><span class=\"line\">            obj.children[i] = target;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        //将碎片容器一次性添加到父节点</span><br><span class=\"line\">        parent.appendChild(fragment);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    //返回参数，供动画函数调用</span><br><span class=\"line\">    return obj;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"3、案例解析\"><a href=\"#3、案例解析\" class=\"headerlink\" title=\"3、案例解析\"></a>3、案例解析</h3><ul>\n<li><strong>HTML</strong></li>\n</ul>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由于节点很多，并且我想尽量做得逼真有趣一点，就给节点加了随机位置。所以节点的输出都是用 JS 控制的，HTML 这边只写了几个父元素盒子，加上相应的 id 名和 class 类名，结构相对简单。</p>\n<ul>\n<li><strong>CSS</strong></li>\n</ul>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CSS 部分的难点就是流星的样式和用圈圈画云层，然后将云层堆叠出立体效果。<br><br></p>\n<blockquote>\n<p><strong>首先说一下流星的样式：</strong></p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#sky .star &#123;</span><br><span class=\"line\">     position: absolute;</span><br><span class=\"line\">     opacity: 0;</span><br><span class=\"line\">     z-index: 10000;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> .star::after &#123;</span><br><span class=\"line\">     content: &quot;&quot;;</span><br><span class=\"line\">     display: block;</span><br><span class=\"line\">     border: solid;</span><br><span class=\"line\">     border-width: 2px 0 2px 80px;</span><br><span class=\"line\">     /*流星随长度逐渐缩小*/</span><br><span class=\"line\">     border-color: transparent transparent transparent rgba(255, 255, 255, 1);</span><br><span class=\"line\">     border-radius: 2px 0 0 2px;</span><br><span class=\"line\">     transform: rotate(-45deg);</span><br><span class=\"line\">     transform-origin: 0 0 0;</span><br><span class=\"line\">     box-shadow: 0 0 20px rgba(255, 255, 255, .3);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;先提取了公共样式，添加定位属性；<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;然后在 star 后通过 after 伪类添加流星，<strong>用 border 特性画：</strong><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>1）模型绘制：</strong> <strong>border-width</strong>的顺序为四边<strong>top、right、bottom、left</strong>，同理<strong>border-color</strong>的顺序也为四边<strong>top、right、bottom、left</strong>。这样将 border-width 与 border-color 一一对应后，就能看出<strong>2px 是流星的宽度，80px 是流星的长度，而 0px 就是流星的尾巴</strong>。这样就形成了一个<strong>头部 2px 宽，尾部 0px，长度 80px 的流星模型</strong>;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>2）稍微逼真：</strong> 通过<strong>border-radius</strong>给流星的头部增加个圆角，让它看起来 emmmmmmm 更逼真？最后通过<strong>roteta</strong>旋转一个角度，让它看起来像是往下掉;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>3）增加闪光：</strong> 通过<strong>box-shadow</strong> 给流星增加一点光晕，让它看起来有闪光的效果;<br><br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过以上 3 步，一个流星就画好了。<br><br></p>\n<blockquote>\n<p><strong>然后是画云：</strong></p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">因为云的代码比较长，这里就不贴出来了。方法无非是通过一个一个的圆，相互叠加覆盖，完成一个云朵的形状;</span><br><span class=\"line\">完成一个云层之后，copy一个，然后多个云层通过rotate、opacity、left定位等，做出一个渐隐叠加的立体效果;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong>JS</strong></li>\n</ul>\n<p><strong><em>JS 部分以流星举例说明</em></strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setInterval(function() &#123;</span><br><span class=\"line\">    const obj = addChild(&quot;#sky&quot;, &quot;div&quot;, 2, &quot;star&quot;); //插入流星</span><br><span class=\"line\"></span><br><span class=\"line\">    for (let i = 0; i &lt; obj.children.length; i++) &#123;</span><br><span class=\"line\">        //随机位置</span><br><span class=\"line\">        const top = -50 + Math.random() * 200 + &quot;px&quot;,</span><br><span class=\"line\">            left = 200 + Math.random() * 1200 + &quot;px&quot;,</span><br><span class=\"line\">            scale = 0.3 + Math.random() * 0.5;</span><br><span class=\"line\">        const timer = 1000 + Math.random() * 1000;</span><br><span class=\"line\"></span><br><span class=\"line\">        obj.children[i].style.top = top;</span><br><span class=\"line\">        obj.children[i].style.left = left;</span><br><span class=\"line\">        obj.children[i].style.transform = `scale($&#123;scale&#125;)`;</span><br><span class=\"line\"></span><br><span class=\"line\">        //添加动画</span><br><span class=\"line\">        requestAnimation(&#123;</span><br><span class=\"line\">            ele: obj.children[i],</span><br><span class=\"line\">            attr: [&quot;top&quot;, &quot;left&quot;, &quot;opacity&quot;],</span><br><span class=\"line\">            value: [150, -150, .8],</span><br><span class=\"line\">            time: timer,</span><br><span class=\"line\">            flag: false,</span><br><span class=\"line\">            fn: function() &#123;</span><br><span class=\"line\">                requestAnimation(&#123;</span><br><span class=\"line\">                    ele: obj.children[i],</span><br><span class=\"line\">                    attr: [&quot;top&quot;, &quot;left&quot;, &quot;opacity&quot;],</span><br><span class=\"line\">                    value: [150, -150, 0],</span><br><span class=\"line\">                    time: timer,</span><br><span class=\"line\">                    flag: false,</span><br><span class=\"line\">                    fn: () =&gt; &#123;</span><br><span class=\"line\">                        obj.parent.removeChild(obj.children[i]); //动画结束删除节点</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;, 1000);</span><br></pre></td></tr></table></figure>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这里边用到了我自己封装的<strong>两个方法</strong>，一个是基于 requestAnimationFrame 的<strong>requestAnimation</strong>，以及基于 appendChild 的<strong>addChild</strong>。<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为了达成星星位置随机的效果，通过定时器 setInterval 不停的<strong>插入</strong>与<strong>删除</strong>流星：<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>首先</strong>，每次添加<strong>2 个流星</strong>到页面，但是<strong>定时器的间隔时间小于流星的动画时间</strong>，这样就能保证页面中的流星的数量不是一个固定值，但肯定是大于 2 的。不然一次 2 个流星略显冷清;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>然后</strong>，通过 for 循环（也可以用 for-in，for-of，都行。for-of 最简单）给每个新添加到页面中的流星一个随机的位置（top、left）、随机的大小（scale）、随机的动画执行时间（timer）;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>最后</strong>，在 for 循环中，给每个新添加到页面中的流星加上动画，并通过回调函数在执行完动画后删除节点。这里要注意的是，动画要分成<strong>两个阶段</strong>（<strong>出现</strong>与<strong>消失</strong>，主要是<strong>opacity</strong>控制）。另外我这里的处理，每个流星都移动相同的距离<strong>300px</strong>，这个距离我觉得也可以通过随机数控制，但我犯了个懒，就没有做。</p>\n<h3 id=\"4、小问题\"><a href=\"#4、小问题\" class=\"headerlink\" title=\"4、小问题\"></a>4、小问题</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;目前我发现的问题有<strong>2 个：</strong><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;一是 DOM 操作本身的问题。页面不停的添加与删除节点，造成不停地<strong>回流与重绘</strong>，很耗性能;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;二是 requestAnimationFrame 本身的问题。因为定时器不断在添加节点，而 requestAnimationFrame 的特性——<strong>当离开当前页面去浏览其他页面时，动画会暂停</strong>。这就造成了一个问题，<strong>节点一直在加，但动画全停在那没有执行</strong>。那么下次再回到这个页面的时候，就 boom!！！动画就炸了，你会看到画面一卡，很多小蝌蚪集体出动去找妈妈;</p>\n<h3 id=\"5、结语\"><a href=\"#5、结语\" class=\"headerlink\" title=\"5、结语\"></a>5、结语</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这个小案例虽然从难度上来看很简单，但是它可拓展性很高——比如表个白啊、寄个相思、耍个浪漫啊等等（手动狗头 doge），而且用纯 CSS 也可以实现（我也写了一版纯 CSS 的，因为不能随机位置随机大小，所以看起来比较静态一点，就不贴了）。所以对于了解 CSS 动画与 JS 动画，是个很不错的练手小案例。<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;感谢看完这篇文章的可爱的人儿，希望你能从中获得灵感~如果能给你带来帮助，那我是极高兴地~如果你把灵感告诉我，那我就 can’t happniess anymore 了~<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最后，再次感谢，如果有优化写法，欢迎指导~</p>"}],"PostAsset":[],"PostCategory":[{"post_id":"cjq80g9qv0003w4vusvuqqk66","category_id":"cjq80g9r30006w4vuqblsvd7x","_id":"cjq80g9r80009w4vu46ta7pms"},{"post_id":"cjq80g9qv0003w4vusvuqqk66","category_id":"cjq80g9r60008w4vu03cg8khb","_id":"cjq80g9r8000aw4vu4if2fu4x"},{"post_id":"cjq80g9rw000bw4vux3prf2j7","category_id":"cjq80g9r30006w4vuqblsvd7x","_id":"cjq80g9s0000fw4vuqx5ze2ah"},{"post_id":"cjq80g9rw000bw4vux3prf2j7","category_id":"cjq80g9rz000dw4vufjarxjxs","_id":"cjq80g9s1000gw4vuco599gn4"},{"post_id":"cjq80g9vg000hw4vuxy7c7nqd","category_id":"cjq80g9r30006w4vuqblsvd7x","_id":"cjq80g9vn000mw4vung2mdis5"},{"post_id":"cjq80g9vg000hw4vuxy7c7nqd","category_id":"cjq80g9vj000jw4vub8gp335t","_id":"cjq80g9vp000ow4vutzr9fj8r"}],"PostTag":[{"post_id":"cjq80g9lx0000w4vust4v8cqg","tag_id":"cjq80g9mc0001w4vus7xroe77","_id":"cjq80g9mi0002w4vu4cf3q1dn"},{"post_id":"cjq80g9qv0003w4vusvuqqk66","tag_id":"cjq80g9mc0001w4vus7xroe77","_id":"cjq80g9r40007w4vuc78h2stq"},{"post_id":"cjq80g9rw000bw4vux3prf2j7","tag_id":"cjq80g9rz000cw4vuhvgu0opj","_id":"cjq80g9s0000ew4vufnmonpt4"},{"post_id":"cjq80g9vg000hw4vuxy7c7nqd","tag_id":"cjq80g9vi000iw4vube64zacw","_id":"cjq80g9vl000kw4vuh8beqct1"},{"post_id":"cjq80g9vg000hw4vuxy7c7nqd","tag_id":"cjq80g9rz000cw4vuhvgu0opj","_id":"cjq80g9vn000lw4vuk6ybr083"},{"post_id":"cjq80g9vg000hw4vuxy7c7nqd","tag_id":"cjq80g9mc0001w4vus7xroe77","_id":"cjq80g9vo000nw4vuuyu4yask"}],"Tag":[{"name":"JS","_id":"cjq80g9mc0001w4vus7xroe77"},{"name":"CSS","_id":"cjq80g9rz000cw4vuhvgu0opj"},{"name":"HTML","_id":"cjq80g9vi000iw4vube64zacw"}]}}